!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function o(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?t(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(t,o,n){return(o=function(t){var o=function(t,o){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,o||"default");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}(t,"string");return"symbol"===e(o)?o:String(o)}(o))in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,t}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,s=[],c=!0,l=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(p){l=!0,r=p}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(l)throw r}}return s}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}System.register(["./vendor-legacy-fa6962a8.js"],(function(t,n){"use strict";var a,i,s,c,l,p,u,d,f,b,m,v,g,h,y,w,T,A,k=document.createElement("style");return k.textContent=":root{background-color:#fff}@media (prefers-color-scheme: dark){:root{background-color:#1a202c;color:#fff}}html{height:100%}body{margin:0;overflow:hidden;height:100%;width:100%;padding:env(safe-area-inset-top,20px) env(safe-area-inset-right,20px) env(safe-area-inset-bottom,20px) env(safe-area-inset-left,20px)}div#root{height:100%;width:100%}*{box-sizing:border-box}\n",document.head.appendChild(k),{setters:[function(e){a=e.r,i=e.i,s=e.d,c=e.R,l=e.a,p=e.c,u=e.b,d=e.e,f=e.u,b=e.f,m=e.g,v=e.h,g=e.j,h=e.P,y=e.I,w=e.k,T=e.l,A=e.m}],execute:function(){var k={CookiesModal:{header:"Cookies on this website",text1:"At RMG we use cookies to help ensure that our website and services are able to function properly. These cookies are necessary and so are set automatically.",text2:"We would also like to use some cookies to:",item1:"improve our website based on how you use it",text3:"These cookies are optional. If you'd like to accept all optional cookies, select 'Accept all cookies'. If you'd like to reject them, select 'Reject'.",accept:"Accept all cookies",reject:"Reject"}},S={CookiesModal:{header:"本网站的 Cookies",text1:"在 RMG，我们使用 Cookies 来确保本网站及服务可以正常运作。这些 Cookies 是必需的，因此已默认启动。",text2:"我们也会以 Cookies 的方式：",item1:"分析您的使用模式，用来改进本网站",text3:"这些 Cookies 是可选的。如果您想允许所有可选 Cookies，请选择“接受所有 Cookies”。如果您想禁用 Cookies，请选择“拒绝”。",accept:"接受所有 Cookies",reject:"拒绝"},About:"关于","Allow cookies to help improve our website":"允许用 Cookies 帮助改进本网站",Appearance:"外观","Close all tabs":"关闭所有标签页","Close app":"关闭应用程式","Close tab":"关闭标签页","Contribution Wiki":"贡献者指南",Contributors:"贡献者","Core contributors":"核心贡献者",Dark:"深色",Light:"浅色",More:"更多","New tab":"新标签页",Privacy:"隐私","Privacy settings":"隐私设置","Refreshing is required for changes to take effect.":"刷新页面后变更才会生效","Resource contributors":"资源贡献者","Resource Administrator":"资源管理员",Running:"正在运行",Save:"保存","Select an app to start your own rail map design!":"选择一个应用程序来开始你的线路图设计！",Switch:"切换","Switch to":"切换至",System:"跟随系统",Tab:"标签页","Terms and conditions":"条款与细则","Visit GitHub":"访问 GitHub","Welcome to Rail Map Toolkit":"欢迎使用线路图工具包"},C={CookiesModal:{header:"本網站的 Cookies",text1:"在 RMG，我們使用 Cookies 以確保本網站及服務可以正常運作。這些 Cookies 是必需的，因此已預設啟用。",text2:"我們亦會以 Cookies 的方式：",item1:"分析閣下的使用模式，用來改進本網站",text3:"這些 Cookies 是可選的。如果閣下想容許所有可選 Cookies，請選擇「接受所有 Cookies」。如果閣下想禁用 Cookies，請選擇「拒絕」。",accept:"接受所有 Cookies",reject:"拒絕"},About:"關於","Allow cookies to help improve our website":"容許以 Cookies 幫助改進本網站",Appearance:"外觀","Close all tabs":"關閉所有分頁","Close app":"關閉應用程式","Close tab":"關閉分頁","Contribution Wiki":"貢獻者指南",Contributors:"貢獻者","Core contributors":"主要貢獻者",Dark:"深色",Light:"淺色",More:"更多","New tab":"新分頁",Privacy:"私隱","Privacy settings":"私隱設定","Refreshing is required for changes to take effect.":"重新整理頁面後變更才會生效","Resource contributors":"資源貢獻者","Resource Administrator":"資源管理員",Running:"運行中",Save:"儲存","Select an app to start your own rail map design!":"選擇一個應用程式以開始你的路綫圖設計！",Switch:"切換","Switch to":"切換至",System:"跟隨系統",Tab:"分頁","Terms and conditions":"條款及細則","Visit GitHub":"造訪 GitHub","Welcome to Rail Map Toolkit":"歡迎使用路綫圖工具組"},O={CookiesModal:{header:"이 웹 사이트의 쿠키",text1:"RMG에서는 쿠키를 사용하여 웹 사이트 및 서비스가 제대로 작동하는지 확인합니다.이러한 쿠키는 필수이므로 기본적으로 시작됩니다.",text2:"저희도 쿠키 방식으로：",item1:"당신의 사용 패턴을 분석하여, 본 사이트를 개선합니다",text3:"이 쿠키들은 선택 사항입니다.모든 선택 가능한 쿠키를 허용하려면 '모든 쿠키 허용'을 선택하십시오.쿠키를 사용하지 않으려면 '거부'를 선택하십시오.",accept:"모든 쿠키 허용",reject:"거부"},About:"관한","Allow cookies to help improve our website":"쿠키를 사용하여 이 웹 사이트를 개선할 수 있도록 허용",Appearance:"화면 스타일","Contribution Wiki":"기여자 안내",Contributors:"기여자","Core contributors":"핵심 기여자",Dark:"다크 모드",Light:"라이트 모드","Privacy settings":"개인 정보 보호 설정","Refreshing is required for changes to take effect.":"페이지를 새로 고친 후에만 변경 가능","Resource contributors":"자원 기여자","Resource Administrator":"자원 관리자",Save:"저장","Select an app to start your own rail map design!":"응용 프로그램을 선택하여 노선도 설계를 시작하십시오.","Switch to":"곳으로 전환",System:"시스템 모드","Terms and conditions":"조항과 세칙","Visit GitHub":"GitHub 방문하기","Welcome to Rail Map Toolkit":"노선도 툴킷에 오신 것을 환영합니다"},P=(new a.I18nBuilder).use(i).withAppName("Rail Map Toolkit").withLng(a.getLanguage()).withDefaultResource(s).withResource("en",k).withResource("zh-Hans",S).withResource("zh-Hant",C).withResource("ko",O).build(),E=t("b",{rmg:{name:"Rail Map Generator",url:"/rmg/",allowedEnvs:[c.DEV,c.UAT,c.PRD],allowMultiInstances:!0},rmp:{name:"Rail Map Painter",url:"/rmp/",allowedEnvs:[c.DEV,c.UAT,c.PRD]},"rmg-palette":{name:"Palette",url:"/rmg-palette/",allowedEnvs:[c.DEV,c.UAT,c.PRD]},"rmg-components":{name:"Components",url:"/rmg-components/",allowedEnvs:[c.DEV,c.UAT]},"rmg-templates":{name:"RMG Templates",url:"/rmg-templates/",allowedEnvs:[c.DEV,c.UAT,c.PRD]},"rmg-templates-upload":{name:"RMG Templates - Upload",url:"/rmg-templates/new",allowedEnvs:[c.DEV,c.UAT,c.PRD]},"seed-project":{name:"Seed Project",url:"/seed-project/",allowedEnvs:[c.DEV,c.UAT]},"rmg-translate":{name:"Translate",url:"/rmg-translate/",allowedEnvs:[c.DEV,c.UAT]}}),R=t("g",(function(e){return Object.entries(E).filter((function(t){var o=r(t,2);o[0];return o[1].allowedEnvs.includes(e)})).map((function(e){return r(e,1)[0]}))})),j=function(e){return e.OPENED_TABS="rmg-home__openedTabs",e.ACTIVE_TAB="rmg-home__activeTab",e}(j||{}),I=(t("m",{GitHub:"GitHub Pages",GitLab:"GitLab Pages",Bitbucket:"Bitbucket Cloud",localhost:"localhost",unknown:"unknown"}),t("f",(function(e,t){return"https://".concat(t===c.PRD?"":"uat-","railmapgen.").concat(e===l.GITLAB?"gitlab":"github",".io")})),t("E",function(e){return e.APP_LOAD="APP_LOAD",e.OPEN_APP="OPEN_APP",e.CLOSE_APP="CLOSE_APP",e.TOGGLE_NAV_MENU="TOGGLE_NAV_MENU",e.CHANGE_LANGUAGE="CHANGE_LANGUAGE",e.SWITCH_MIRROR="SWITCH_MIRROR",e}(I||{}))),x=t("F","rmg-home:frame-"),M=p({name:"app",initialState:{isShowMenu:!0,openedTabs:[],activeTab:void 0},reducers:{toggleMenu:function(e){e.isShowMenu=!e.isShowMenu},setOpenedTabs:function(e,t){e.openedTabs=t.payload},updateTabUrl:function(e,t){var n=t.payload,r=n.id,a=n.url;e.openedTabs=e.openedTabs.map((function(e){return e.id===r?o(o({},e),{},{url:a}):e}))},setActiveTab:function(e,t){e.activeTab=t.payload},openApp:function(e,t){var o=t.payload,n=o.appId,r=o.url,a=e.openedTabs.find((function(t){return t.id===e.activeTab})),i=e.openedTabs.find((function(e){return e.app===n}));if((null==a?void 0:a.app)===n);else if(i)e.activeTab=i.id;else{var s=crypto.randomUUID();e.openedTabs.push({id:s,app:n,url:null!=r?r:E[n].url}),e.activeTab=s}},openAppInNew:function(e,t){var o=crypto.randomUUID();e.openedTabs.push({id:o,app:t.payload}),e.activeTab=o},closeTab:function(e,t){var o=t.payload,n=e.openedTabs.slice().sort((function(e,t){var o=Object.keys(E);return o.indexOf(e.app)-o.indexOf(t.app)}));if(e.openedTabs=e.openedTabs.filter((function(e){return e.id!==o})),e.activeTab===o){var r,a=n.findIndex((function(e){return e.id===o}));e.activeTab=null===(r=n.filter((function(e){return e.id!==o}))[Math.max(0,a-1)])||void 0===r?void 0:r.id}},closeApp:function(e,t){var o,n=t.payload,r=Object.keys(E).filter((function(t){return e.openedTabs.some((function(e){return e.app===t}))})),a=null===(o=e.openedTabs.find((function(t){return t.id===e.activeTab})))||void 0===o?void 0:o.app,i=e.openedTabs.filter((function(e){return e.app!==n}));if(e.openedTabs=i,a===n){var s,c=r.findIndex((function(e){return e===n}));e.activeTab=null===(s=i.find((function(e){return e.app===r[Math.max(0,c-1)]})))||void 0===s?void 0:s.id}}}}),D=M.actions,G=D.toggleMenu,_=D.setOpenedTabs,U=D.updateTabUrl,N=D.setActiveTab,L=D.openApp,V=D.openAppInNew,H=D.closeTab,B=D.closeApp;t({t:G,s:N,c:L,o:V,d:H,e:B});var W=M.reducer,J=u(),z=d({reducer:{app:W},middleware:function(e){return e().prepend(J.middleware)}}),q=(t("a",(function(){return f()})),t("u",b),J.startListening);window.rmgStore=z;function F(e){!function(e){try{var t=window.localStorage.getItem(j.OPENED_TABS),o=window.localStorage.getItem("rmg-home__openedApps");if(t){var n=JSON.parse(t);if(Array.isArray(n)){var r=n.filter((function(e){return e.app in E}));e.dispatch(_(r))}else console.warn("initOpenedTabs():: Cannot parse invalid opened tabs state from local storage")}else if(o){var a=JSON.parse(o);if(Array.isArray(a)&&"string"==typeof a[0]){var i=a.map((function(e){return{id:crypto.randomUUID(),app:e}}));e.dispatch(_(i))}else console.warn("initOpenedTabs():: cannot parse invalid opened apps state from local storage")}}catch(s){console.warn("initOpenedTabs():: cannot parse opened apps state from local storage",s)}}(e),function(e){var t,o=window.localStorage.getItem(j.ACTIVE_TAB),n=e.getState().app.openedTabs;o&&n.some((function(e){return e.id===o}))?e.dispatch(N(o)):e.dispatch(N(null===(t=n[0])||void 0===t?void 0:t.id))}(e),q({predicate:function(e,t,o){return JSON.stringify(t.app.openedTabs)!==JSON.stringify(o.app.openedTabs)},effect:function(e,t){window.localStorage.setItem(j.OPENED_TABS,JSON.stringify(t.getState().app.openedTabs))}}),q({predicate:function(e,t,o){return t.app.activeTab!==o.app.activeTab},effect:function(e,t){var o=t.getState().app.activeTab;void 0!==o&&window.localStorage.setItem(j.ACTIVE_TAB,o)}}),function(e){var t=new URLSearchParams(window.location.search).get("app");console.log("openSearchedApp():: searchParams app=".concat(t)),R(a.getEnv()).includes(t)?e.dispatch(L({appId:t})):console.warn("openSearchedApp():: app ".concat(t," not found"))}(e)}var $=m.lazy((function(){return function(){return n.import("./app-root-legacy-1a063858.js")}()}));a.ready().then((function(){F(z),v(document.getElementById("root")).render(g.jsx(m.StrictMode,{children:g.jsx(h,{store:z,children:g.jsx(y,{i18n:P,children:g.jsx(w,{children:g.jsx(T,{suspenseFallback:g.jsx(A,{isIndeterminate:!0}),allowReset:!0,children:g.jsx($,{})})})})})})),a.onAppOpen((function(t){var o=R(a.getEnv());"object"===e(t)?t.appId in o&&z.dispatch(L({appId:t.appId,url:t.url})):o.includes(t)&&z.dispatch(L({appId:t}))})),a.onUrlUpdate((function(e,t){if(t){var o=t.slice(x.length);console.log("Received URL update for frame=".concat(o,", url=").concat(e)),z.dispatch(U({id:o,url:e}))}})),a.event(I.APP_LOAD,{openedApps:z.getState().app.openedTabs.map((function(e){return e.app}))})}))}}}))}();
