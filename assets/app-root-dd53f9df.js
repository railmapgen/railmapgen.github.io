import{o as j,k as t,V as Ce,H as Me,p as le,q as k,T as v,h as u,B as G,s as P,t as Be,v as We,w as ce,x as w,y as H,M as De,z as He,A as Ge,C as ue,D as Se,r as p,E as U,F as V,G as T,J as _,K as ne,L as B,N as W,O as M,Q as Ve,a as $,S as Fe,U as $e,W as ke,X as Q,n as qe,Y as Ae,Z as ze,_ as Re,$ as Pe,a0 as he,a1 as de,a2 as Je,a3 as Qe,a4 as q,a5 as Ye,a6 as Ke,a7 as Xe,a8 as Ze,a9 as fe,aa as et}from"./vendor-f2635ea8.js";import{F as tt,u as se,a as Ie,b as L,E,o as nt,c as st,t as Y,s as at,d as rt,e as ot,g as it,m as lt,f as ct}from"./index-889eaf67.js";const ut="/assets/rmp-logo512-652b509a.png",ht={flex:1,justifyContent:"center",mb:10,"& > div":{mb:3},"& img":{w:120,p:2,backgroundColor:"white",borderRadius:12}};function dt(){const{t:e}=j();return t.jsxs(Ce,{sx:ht,children:[t.jsxs(Me,{spacing:3,children:[t.jsx(le,{src:"/logo512.png"}),t.jsx(le,{src:ut,backgroundColor:"white"})]}),t.jsx(k,{children:e("Welcome to Rail Map Toolkit")}),t.jsx(v,{fontSize:"lg",textAlign:"center",children:e("Select an app to start your own rail map design!")})]})}function ft(e){var a;const{tab:n,isActive:r}=e,[s]=u.useState((a=n.url)!=null?a:"/"+n.app+"/");return t.jsx(G,{display:r?"block":"none",flex:1,children:t.jsx("iframe",{id:tt+n.id,src:s,loading:"lazy",title:n.app,width:"100%",height:"100%"})})}/**
 * @remix-run/router v1.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N(){return N=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},N.apply(this,arguments)}var R;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(R||(R={}));const pe="popstate";function pt(e){e===void 0&&(e={});function n(s,a){let{pathname:i,search:l,hash:o}=s.location;return K("",{pathname:i,search:l,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:Oe(a)}return gt(n,r,null,e)}function C(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function mt(){return Math.random().toString(36).substr(2,8)}function me(e,n){return{usr:e.state,key:e.key,idx:n}}function K(e,n,r,s){return r===void 0&&(r=null),N({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?F(n):n,{state:r,key:n&&n.key||s||mt()})}function Oe(e){let{pathname:n="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function F(e){let n={};if(e){let r=e.indexOf("#");r>=0&&(n.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(n.search=e.substr(s),e=e.substr(0,s)),e&&(n.pathname=e)}return n}function gt(e,n,r,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,l=a.history,o=R.Pop,c=null,d=m();d==null&&(d=0,l.replaceState(N({},l.state,{idx:d}),""));function m(){return(l.state||{idx:null}).idx}function b(){o=R.Pop;let f=m(),h=f==null?null:f-d;d=f,c&&c({action:o,location:g.location,delta:h})}function y(f,h){o=R.Push;let x=K(g.location,f,h);r&&r(x,f),d=m()+1;let O=me(x,d),D=g.createHref(x);try{l.pushState(O,"",D)}catch(vn){a.location.assign(D)}i&&c&&c({action:o,location:g.location,delta:1})}function I(f,h){o=R.Replace;let x=K(g.location,f,h);r&&r(x,f),d=m();let O=me(x,d),D=g.createHref(x);l.replaceState(O,"",D),i&&c&&c({action:o,location:g.location,delta:0})}function z(f){let h=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof f=="string"?f:Oe(f);return C(h,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,h)}let g={get action(){return o},get location(){return e(a,l)},listen(f){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(pe,b),c=f,()=>{a.removeEventListener(pe,b),c=null}},createHref(f){return n(a,f)},createURL:z,encodeLocation(f){let h=z(f);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:y,replace:I,go(f){return l.go(f)}};return g}var ge;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ge||(ge={}));function xt(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let r=n.endsWith("/")?n.length-1:n.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function vt(e,n){n===void 0&&(n="/");let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?F(e):e;return{pathname:r?r.startsWith("/")?r:jt(r,n):n,search:Ct(s),hash:Mt(a)}}function jt(e,n){let r=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function J(e,n,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bt(e){return e.filter((n,r)=>r===0||n.route.path&&n.route.path.length>0)}function yt(e,n,r,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=F(e):(a=N({},e),C(!a.pathname||!a.pathname.includes("?"),J("?","pathname","search",a)),C(!a.pathname||!a.pathname.includes("#"),J("#","pathname","hash",a)),C(!a.search||!a.search.includes("#"),J("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,o;if(s||l==null)o=r;else{let b=n.length-1;if(l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),b-=1;a.pathname=y.join("/")}o=b>=0?n[b]:"/"}let c=vt(a,o),d=l&&l!=="/"&&l.endsWith("/"),m=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const wt=e=>e.join("/").replace(/\/\/+/g,"/"),Ct=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Mt=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Ee=["post","put","patch","delete"];new Set(Ee);const St=["get",...Ee];new Set(St);/**
 * React Router v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function X(){return X=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},X.apply(this,arguments)}const kt=u.createContext(null),ae=u.createContext(null),re=u.createContext(null),oe=u.createContext({outlet:null,matches:[],isDataRoute:!1});function ie(){return u.useContext(re)!=null}function Le(){return ie()||C(!1),u.useContext(re).location}function Ne(e){u.useContext(ae).static||u.useLayoutEffect(e)}function At(){let{isDataRoute:e}=u.useContext(oe);return e?Ot():zt()}function zt(){ie()||C(!1);let{basename:e,navigator:n}=u.useContext(ae),{matches:r}=u.useContext(oe),{pathname:s}=Le(),a=JSON.stringify(bt(r).map(o=>o.pathnameBase)),i=u.useRef(!1);return Ne(()=>{i.current=!0}),u.useCallback(function(o,c){if(c===void 0&&(c={}),!i.current)return;if(typeof o=="number"){n.go(o);return}let d=yt(o,JSON.parse(a),s,c.relative==="path");e!=="/"&&(d.pathname=d.pathname==="/"?e:wt([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,a,s])}var Z;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(Z||(Z={}));var ee;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(ee||(ee={}));function Rt(e){let n=u.useContext(kt);return n||C(!1),n}function Pt(e){let n=u.useContext(oe);return n||C(!1),n}function It(e){let n=Pt(),r=n.matches[n.matches.length-1];return r.route.id||C(!1),r.route.id}function Ot(){let{router:e}=Rt(Z.UseNavigateStable),n=It(ee.UseNavigateStable),r=u.useRef(!1);return Ne(()=>{r.current=!0}),u.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,X({fromRouteId:n},i)))},[e,n])}function Et(e){let{basename:n="/",children:r=null,location:s,navigationType:a=R.Pop,navigator:i,static:l=!1}=e;ie()&&C(!1);let o=n.replace(/^\/*/,"/"),c=u.useMemo(()=>({basename:o,navigator:i,static:l}),[o,i,l]);typeof s=="string"&&(s=F(s));let{pathname:d="/",search:m="",hash:b="",state:y=null,key:I="default"}=s,z=u.useMemo(()=>{let g=xt(d,o);return g==null?null:{location:{pathname:g,search:m,hash:b,state:y,key:I},navigationType:a}},[o,d,m,b,y,I,a]);return z==null?null:u.createElement(ae.Provider,{value:c},u.createElement(re.Provider,{children:r,value:z}))}var xe;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(xe||(xe={}));new Promise(()=>{});/**
 * React Router DOM v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function te(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((n,r)=>{let s=e[r];return n.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function Lt(e,n){let r=te(e);if(n)for(let s of n.keys())r.has(s)||n.getAll(s).forEach(a=>{r.append(s,a)});return r}function Nt(e){let{basename:n,children:r,window:s}=e,a=u.useRef();a.current==null&&(a.current=pt({window:s,v5Compat:!0}));let i=a.current,[l,o]=u.useState({action:i.action,location:i.location});return u.useLayoutEffect(()=>i.listen(o),[i]),u.createElement(Et,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:i})}var ve;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(ve||(ve={}));var je;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(je||(je={}));function Ut(e){let n=u.useRef(te(e)),r=u.useRef(!1),s=Le(),a=u.useMemo(()=>Lt(s.search,r.current?null:n.current),[s.search]),i=At(),l=u.useCallback((o,c)=>{const d=te(typeof o=="function"?o(a):o);r.current=!0,i("?"+d,c)},[i,a]);return[a,l]}function Tt(){const{openedTabs:e,activeTab:n}=se(a=>a.app),[r,s]=Ut();return u.useEffect(()=>{var a;if(n){const i=(a=e.find(l=>l.id===n))==null?void 0:a.app;s(i?{app:i}:{})}else s({})},[n]),e.length===0?t.jsx(dt,{}):t.jsx(t.Fragment,{children:e.map(a=>t.jsx(ft,{tab:a,isActive:n===a.id},a.id))})}var Ue={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},be=P.createContext&&P.createContext(Ue),A=globalThis&&globalThis.__assign||function(){return A=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},A.apply(this,arguments)},_t=globalThis&&globalThis.__rest||function(e,n){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)n.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};function Te(e){return e&&e.map(function(n,r){return P.createElement(n.tag,A({key:r},n.attr),Te(n.child))})}function S(e){return function(n){return P.createElement(Bt,A({attr:A({},e.attr)},n),Te(e.child))}}function Bt(e){var n=function(r){var s=e.attr,a=e.size,i=e.title,l=_t(e,["attr","size","title"]),o=a||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),P.createElement("svg",A({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,l,{className:c,style:A(A({color:e.color||r.color},r.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&P.createElement("title",null,i),e.children)};return be!==void 0?P.createElement(be.Consumer,null,function(r){return n(r)}):n(Ue)}function Wt(e){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}}]})(e)}function Dt(e){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-1 6h2v2h-2V7zm0 4h2v6h-2v-6z"}}]})(e)}function Ht(e){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}}]})(e)}function Gt(e){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z"}}]})(e)}function ye(e){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}}]})(e)}function Vt(e){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}}]})(e)}function Ft(e){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}}]})(e)}function $t(e){return S({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}}]})(e)}const we={"& button:first-of-type":{w:"100%",overflow:"hidden",justifyContent:"flex-start",textOverflow:"ellipsis",textAlign:"start","& span.chakra-button__icon":{ml:-1,color:"orange.300",'[data-theme="dark"] &':{color:"orange.200"}}},'&[aria-current="true"] > button':{bg:"primary.50",_hover:{bg:"primary.100"},'[data-theme="dark"] &':{bg:"primary.700",_hover:{bg:"primary.600"}}}};function qt(e){var f;const{appId:n,onAboutOpen:r}=e,{t:s}=j(),a=Ie(),i=Be(`(min-width: ${We.breakpoints.sm})`),{activeTab:l,openedTabs:o}=se(h=>h.app),c=L[n],d=c.name.split(" - ").map(s).join(" - "),m=o.some(h=>h.app===n),b=!c.allowMultiInstances&&((f=o.find(h=>h.id===l))==null?void 0:f.app)===n,y=h=>{m||p.event(E.OPEN_APP,{appId:n,isOpenInNew:h}),a(h?nt(n):st({appId:n})),i[0]||(a(Y()),p.toggleNavMenu(!1))},I=h=>{a(at(h)),i[0]||(a(Y()),p.toggleNavMenu(!1))},z=h=>{a(rt(h)),p.event(E.CLOSE_APP,{app:n})},g=h=>{a(ot(h)),p.event(E.CLOSE_APP,{app:h})};return t.jsxs(t.Fragment,{children:[t.jsxs(ce,{variant:b?"solid":"ghost",size:"md",isAttached:!0,"aria-current":b,sx:we,children:[t.jsx(w,{onClick:()=>y(!1),leftIcon:m?t.jsx(Gt,{title:s("Running")}):t.jsx(G,{w:4}),children:d}),c.allowMultiInstances&&t.jsx(H,{"aria-label":s("New tab"),title:s("New tab"),icon:t.jsx(Ht,{}),onClick:()=>y(!0)}),t.jsxs(De,{children:[t.jsx(He,{as:H,icon:t.jsx(Ft,{}),"aria-label":s("More"),title:s("More")}),t.jsxs(Ge,{children:[m&&t.jsx(ue,{icon:t.jsx(ye,{}),onClick:()=>g(n),children:c.allowMultiInstances?s("Close all tabs"):s("Close app")}),t.jsx(ue,{icon:t.jsx(Wt,{}),onClick:r,children:s("About")})]})]})]}),c.allowMultiInstances&&o.filter(h=>h.app===n).map((h,x)=>{const O=h.id===l;return t.jsxs(ce,{variant:O?"solid":"ghost",size:"sm",ml:8,mr:1,isAttached:!0,"aria-current":O,sx:we,children:[t.jsxs(w,{onClick:()=>I(h.id),children:[t.jsx(Se,{mr:2,children:x+1}),s("Tab")+" "+(x+1).toString()+" - "+d]}),t.jsx(H,{"aria-label":s("Close tab"),title:s("Close tab"),icon:t.jsx(ye,{}),onClick:()=>z(h.id)})]},h.id)})]})}const Jt=async e=>{const n=`/${e}/info.json`;try{return(await(await fetch(n)).json()).version}catch(r){return console.log(`Failed to get version for ${e}`),"unknown"}},Qt=async e=>{const n=`/${e}/legacy-contributor-list.txt`;return(await(await fetch(n)).text()).split(`
`)};function Yt(e){var o,c,d;const{appId:n,onClose:r}=e,{t:s}=j(),[a,i]=u.useState("Unknown"),l=n?(d=(c=(o=L[n])==null?void 0:o.url)==null?void 0:c.split("/"))==null?void 0:d[1]:void 0;return u.useEffect(()=>{l?Jt(l).then(m=>i(m)):i("Unknown")},[l]),t.jsxs(U,{isOpen:!!n,onClose:r,size:"xl",scrollBehavior:"inside",children:[t.jsx(V,{}),t.jsxs(T,{children:[t.jsxs(_,{children:[s("About")+" "+(n?L[n].name.split(" - ").map(s).join(" - "):""),t.jsx(Se,{ml:1,children:a})]}),t.jsx(ne,{}),t.jsx(B,{}),t.jsx(W,{children:t.jsx(w,{colorScheme:"primary",onClick:()=>window.open("https://github.com/railmapgen/"+l,"_blank"),children:s("Visit GitHub")})})]})]})}const Kt={flexDirection:"column","& h4":{mx:3,my:2},"& > div":{flexDirection:"column"}};function Xt(){const{t:e}=j(),[n,r]=u.useState(),s=it(p.getEnv());return t.jsxs(M,{sx:Kt,children:[t.jsx(k,{as:"h4",size:"md",children:e("Apps")}),t.jsx(M,{children:s.map(a=>t.jsx(qt,{appId:a,onAboutOpen:()=>r(a)},a))}),t.jsx(Yt,{appId:n,onClose:()=>r(void 0)})]})}const Zt={flexDirection:"column",py:1,"& h4":{mx:3,my:2},"& > div":{px:2}};function en(){const{t:e}=j(),{setColourMode:n}=Ve(),r={light:e("Light"),dark:e("Dark"),system:e("System")},a=p.getInstance()===$.GITHUB?$.GITLAB:$.GITHUB,i=()=>{const o=ct(a,p.getEnv());window.open(o,"_blank"),p.event(E.SWITCH_MIRROR,{mirrorUrl:o})},l=[{type:"select",label:e("Language"),value:p.getLanguage(),options:Fe.reduce((o,c)=>({...o,[c]:$e[c][c]}),{}),onChange:o=>{const c=o;p.setLanguage(c),p.getI18nInstance().changeLanguage(c),p.event(E.CHANGE_LANGUAGE,{language:c})}},{type:"select",label:e("Appearance"),value:p.getColourMode(),options:r,onChange:o=>n(o)},{type:"custom",label:e("Switch to")+" "+lt[a],component:t.jsx(w,{size:"xs",onClick:i,children:e("Switch")}),minW:"full",oneLine:!0}];return t.jsxs(M,{sx:Zt,children:[t.jsx(k,{as:"h4",size:"md",children:e("Settings")}),t.jsx(G,{children:t.jsx(ke,{fields:l})})]})}const tn=async e=>{const n=`https://api.github.com/repos/railmapgen/${e}/contributors`;return(await(await fetch(n)).json()).map(a=>a.login)},nn=["","wongchito","thekingofcity","github-actions[bot]"],sn=async e=>{const{showContributors:n,legacyContributors:r}=L[e];if(!n)return[];const s=[tn(e)];r&&s.push(Qt(e));try{const a=await Promise.all(s),i=new Set(a.flat());return Array.from(i).filter(l=>!nn.includes(l))}catch(a){console.error("[rmt] unable to fetch contributors for:",e);return}};function _e(e){const{login:n,urlRepo:r,...s}=e,a=r?`https://github.com/railmapgen/${r}/issues?q=is:issue+author:${n}`:`https://github.com/${n}`;return t.jsx(Q,{name:n,title:n,src:`https://github.com/${n}.png`,loading:"lazy",onClick:()=>window.open(a,"_blank"),cursor:"pointer",...s})}const an={position:"relative",minH:20,"& .chakra-alert":{flexDirection:"column"},"& .chakra-alert__icon":{boxSize:7,mr:0,mb:1}};function rn(e){const{appId:n}=e,{t:r}=j(),[s,a]=u.useState(),[i,l]=u.useState(!0);return u.useEffect(()=>{sn(n).then(a).finally(()=>{l(!1)})},[]),t.jsx(M,{sx:an,children:i?t.jsx(qe,{isIndeterminate:!0}):s?t.jsx(Ae,{spacing:1.5,children:s.map(o=>t.jsx(ze,{children:t.jsx(_e,{login:o,urlRepo:n,size:"sm"})},o))}):t.jsxs(Re,{status:"warning",children:[t.jsx(Pe,{}),r("Unable to load contributors")]})})}const on=["52PD","linchen1965"],ln={"& h5":{mt:6,mb:4,"&:first-of-type":{mt:0}},"& h6":{mt:5,mb:2,"&:first-of-type":{mt:0}},"& .dev-team-stack":{"& > span":{minW:"75%",borderRadius:"lg",cursor:"pointer","& > span:last-of-type":{display:"block"},"& p":{fontSize:"sm","&:first-of-type":{fontSize:"lg",fontWeight:"bold",mb:1}}},"& .chakra-avatar":{ml:1,mr:3,my:4}},"& i":{mt:3,fontSize:"xs"}};function cn(e){const{isOpen:n,onClose:r}=e,{t:s}=j();return t.jsxs(U,{isOpen:n,onClose:r,size:"xl",scrollBehavior:"inside",children:[t.jsx(V,{}),t.jsxs(T,{children:[t.jsx(_,{children:s("Contributors")}),t.jsx(ne,{}),t.jsxs(B,{sx:ln,children:[t.jsx(k,{as:"h5",size:"sm",children:s("Developer team")}),t.jsxs(Ce,{className:"dev-team-stack",children:[t.jsxs(he,{size:"lg",onClick:()=>window.open("https://github.com/wongchito","_blank"),children:[t.jsx(Q,{src:"https://github.com/wongchito.png",size:"lg"}),t.jsxs(de,{children:[t.jsx(v,{children:"Chito Wong"}),t.jsx(v,{children:"Project initiator"}),t.jsx(v,{children:"Author of Rail Map Toolkit platform"}),t.jsx(v,{children:"Author of Rail Map Generator"})]})]}),t.jsxs(he,{size:"lg",onClick:()=>window.open("https://github.com/thekingofcity","_blank"),children:[t.jsx(Q,{src:"https://github.com/thekingofcity.png",size:"lg"}),t.jsxs(de,{children:[t.jsx(v,{children:"thekingofcity"}),t.jsx(v,{children:"Author of Rail Map Painter"}),t.jsx(v,{children:"Author of RMG (Shanghai Metro style)"}),t.jsx(v,{children:"Desktop version (Electron) maintainer"})]})]})]}),t.jsx(k,{as:"h5",size:"sm",children:s("Resource administrators")}),t.jsx(Ae,{spacing:1.5,children:on.map(a=>t.jsx(ze,{children:t.jsx(_e,{login:a,size:"md"})},a))}),t.jsx(k,{as:"h5",size:"sm",children:s("Resource contributors")}),Object.entries(L).filter(([a,i])=>i.showContributors).map(([a,i])=>t.jsxs(t.Fragment,{children:[t.jsx(k,{as:"h6",size:"xs",mt:5,mb:2,children:s(i.name)}),t.jsx(rn,{appId:a},a)]})),t.jsx(v,{as:"i",children:s("Notes: Contributors are sorted by number of commits and commit time.")})]}),t.jsx(W,{children:t.jsx(w,{colorScheme:"primary",onClick:()=>window.open("https://github.com/railmapgen/rmg/wiki/How-to-add-color-palette-and-line-templates","_blank"),children:s("Contribution Wiki")})})]})]})}function un(e){const{isOpen:n,onClose:r}=e,{t:s}=j(),[a,i]=u.useState(p.isAllowAnalytics()),[l,o]=u.useState();u.useEffect(()=>{n||o(void 0)},[n]);const c=[{type:"switch",label:s("Allow cookies to help improve our website"),isChecked:a,onChange:i,oneLine:!0}],d=()=>{p.allowAnalytics(a).refreshRequired?o("Refreshing is required for changes to take effect."):r()};return t.jsxs(U,{isOpen:n,onClose:r,children:[t.jsx(V,{}),t.jsxs(T,{children:[l&&t.jsxs(Re,{status:"info",variant:"solid",size:"xs",children:[t.jsx(Pe,{}),s(l)]}),t.jsxs(G,{position:"relative",children:[t.jsx(_,{children:s("Privacy settings")}),t.jsx(ne,{})]}),t.jsx(B,{children:t.jsx(ke,{fields:c})}),t.jsx(W,{children:t.jsx(w,{colorScheme:"primary",isDisabled:!!l,onClick:d,children:s("Save")})})]})]})}function hn(e){return S({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M126.12 315.1A47.06 47.06 0 1179.06 268h47.06zm23.72 0a47.06 47.06 0 0194.12 0v117.84a47.06 47.06 0 11-94.12 0zm47.06-188.98A47.06 47.06 0 11244 79.06v47.06zm0 23.72a47.06 47.06 0 010 94.12H79.06a47.06 47.06 0 010-94.12zm188.98 47.06a47.06 47.06 0 1147.06 47.1h-47.06zm-23.72 0a47.06 47.06 0 01-94.12 0V79.06a47.06 47.06 0 1194.12 0zM315.1 385.88a47.06 47.06 0 11-47.1 47.06v-47.06zm0-23.72a47.06 47.06 0 010-94.12h117.84a47.06 47.06 0 110 94.12z"}}]})(e)}function dn(){const{t:e}=j(),[n,r]=u.useState(!1),[s,a]=u.useState(!1);return t.jsxs(M,{direction:"column",children:[t.jsx(Je,{}),t.jsxs(Qe,{templateColumns:"repeat(3, auto)",children:[t.jsx(q,{children:t.jsx(w,{as:Ye,variant:"ghost",size:"sm",w:"100%",leftIcon:t.jsx(hn,{}),target:"_blank",href:"https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A",children:"Slack"})}),t.jsx(q,{children:t.jsx(w,{variant:"ghost",size:"sm",w:"100%",leftIcon:t.jsx($t,{}),onClick:()=>r(!0),children:e("Contributors")})}),t.jsx(q,{children:t.jsx(w,{variant:"ghost",size:"sm",w:"100%",leftIcon:t.jsx(Dt,{}),onClick:()=>a(!0),children:e("Privacy")})})]}),t.jsx(cn,{isOpen:n,onClose:()=>r(!1)}),t.jsx(un,{isOpen:s,onClose:()=>a(!1)})]})}const fn={flexShrink:0,flexDirection:"column",overflow:"hidden",alignItems:"flex-end",transition:"0.3s ease-in-out",maxW:0,visibility:"hidden",boxShadow:"lg",zIndex:100,".show-menu &":{maxW:{base:"100%",sm:360},w:{base:"100%",sm:"unset"},visibility:"initial"},"& > div":{flexDirection:"column",h:"100%",w:{base:"100vw",sm:360},"& > div:nth-of-type(1)":{flex:0,flexDirection:"row",alignItems:"center",minHeight:10,pl:12},"& > div:nth-of-type(2)":{flexDirection:"column",flex:1,overflow:"hidden","& > div:first-of-type":{flex:1,overflowY:"auto"}}}};function pn(){const{t:e}=j();return t.jsx(M,{as:"section",sx:fn,children:t.jsxs(M,{children:[t.jsxs(M,{children:[t.jsx(k,{as:"h4",size:"md",children:e("Rail Map Toolkit")}),t.jsx(Ke,{environment:p.getEnv(),version:p.getAppVersion()})]}),t.jsxs(M,{children:[t.jsx(Xt,{}),t.jsx(en,{})]}),t.jsx(dn,{})]})})}function mn(e){const{isOpen:n,onClose:r}=e,{t:s}=j(),a=u.useRef(null),i=()=>{p.allowAnalytics(!0),r()},l=()=>{p.allowAnalytics(!1).refreshRequired?window.location.reload():r()};return t.jsxs(U,{initialFocusRef:a,isOpen:n,onClose:()=>{},children:[t.jsx(V,{}),t.jsxs(T,{children:[t.jsx(_,{children:s("CookiesModal.header")}),t.jsxs(B,{children:[t.jsx(v,{children:s("CookiesModal.text1")}),t.jsx(v,{mt:2,children:s("CookiesModal.text2")}),t.jsx(Xe,{children:t.jsxs(Ze,{children:[" ",s("CookiesModal.item1")]})}),t.jsx(v,{mt:2,children:s("CookiesModal.text3")})]}),t.jsx(W,{children:t.jsxs(Me,{children:[t.jsx(w,{variant:"ghost",onClick:l,children:s("CookiesModal.reject")}),t.jsx(w,{ref:a,colorScheme:"primary",onClick:i,children:s("CookiesModal.accept")})]})})]})]})}const gn=()=>{};function xn(){const{t:e}=j();return t.jsx(U,{isOpen:!0,onClose:gn,children:t.jsxs(T,{children:[t.jsx(_,{children:e("Rail Map Toolkit is opened in another window")}),t.jsx(B,{children:e("You cannot open multiple Rail Map Toolkit at the same time. Please close this window.")}),t.jsx(W,{})]})})}function yn(){const{t:e}=j(),n=Ie(),{isPrimary:r,isShowMenu:s}=se(o=>o.app),[a,i]=u.useState(!1);u.useEffect(()=>{p.isAnalyticsQADone()||i(!0)},[]);const l=()=>{p.toggleNavMenu(!s),n(Y()),p.event(E.TOGGLE_NAV_MENU,{})};return r===!1?t.jsx(fe,{children:t.jsx(xn,{})}):t.jsx(Nt,{basename:"/",children:t.jsxs(fe,{className:s?"show-menu":"",children:[t.jsx(H,{variant:s?"ghost":"solid",colorScheme:s?void 0:"primary",size:"md","aria-label":e("Toggle menu"),title:e("Toggle menu"),icon:t.jsx(Vt,{}),position:"absolute",zIndex:110,borderRadius:0,onClick:l}),t.jsxs(et,{sx:{flexDirection:"row"},children:[t.jsx(pn,{}),t.jsx(Tt,{})]}),t.jsx(mn,{isOpen:a,onClose:()=>i(!1)})]})})}export{yn as default};
