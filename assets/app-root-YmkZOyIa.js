import{j as e,ap as O,aq as pe,ar as ne,H as z,$ as f,B as P,as as v,ad as ye,al as Ae,at as se,a1 as j,ae as L,au as Re,av as Ie,aw as _e,ax as oe,M as xe,ay as A,V as Y,az as R,Y as I,Z as ge,_,a0 as N,F as w,aA as F,aB as D,aC as G,W as J,g as Q,a5 as y,a6 as B,P as Ee,h as Le,k as De,N as Te,O as Oe,Q as Pe,R as Ne,aD as Be,D as Fe,aE as Ge,aF as V,a8 as ae,a4 as ie,aG as Ve,aH as Ue}from"./chakra-Hg5wZurr.js";import{l as p,r as u,m as me,B as $e}from"./react-ChmrgLrp.js";import{F as We,u as M,a as E,b as H,E as k,o as qe,c as Ke,t as q,s as Ye,d as Je,e as Qe,g as je,h as U,f as K,n as Ze,L as Xe,N as et,i as fe,j as tt,k as nt,r as st,l as ot}from"./main-m_QKmsM1.js";import{r as l,e as b,f as C,b as ve,u as at,i as it,g as $,h as rt}from"./rmg-theme-provider-hiWJ7DBh.js";import{R as ze}from"./rmg-fields-7Auzl2dt.js";var lt=["en","zh-Hans","zh-Hant"],ct=["ja","ko"],re={ar:{ar:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",en:"Arabic",ko:"ì•„ëžì–´","zh-Hans":"é˜¿æ‹‰ä¼¯æ–‡","zh-Hant":"é˜¿æ‹‰ä¼¯æ–‡"},az:{az:"AzÉ™rbaycanca",en:"Azerbaijani",ko:"ì•„ì œë¥´ë°”ì´ìž”ì–´","zh-Hans":"é˜¿å¡žæ‹œç–†æ–‡","zh-Hant":"é˜¿å¡žæ‹œç–†æ–‡"},ca:{ca:"CatalÃ ",en:"Catalan",ko:"ì¹´íƒˆë£¨ëƒì–´","zh-Hans":"åŠ æ³°ç½—å°¼äºšæ–‡","zh-Hant":"åŠ æ³°éš†å°¼äºžæ–‡"},da:{da:"Dansk",en:"Danish",ko:"ë´ë§ˆí¬ì–´","zh-Hans":"ä¸¹éº¦æ–‡","zh-Hant":"ä¸¹éº¥æ–‡"},de:{de:"Deutsch",en:"German",ko:"ë…ì¼ì–´","zh-Hans":"å¾·æ–‡","zh-Hant":"å¾·æ–‡"},el:{el:"Î•Î»Î»Î·Î½Î¹ÎºÎ¬",en:"Greek",ko:"ê·¸ë¦¬ìŠ¤ì–´","zh-Hans":"å¸Œè…Šæ–‡","zh-Hant":"å¸Œè‡˜æ–‡"},en:{en:"English",ja:"è‹±èªž",ko:"ì˜ì–´","zh-Hans":"è‹±æ–‡","zh-Hant":"è‹±æ–‡"},es:{en:"Spanish",es:"EspaÃ±ol",ko:"ìŠ¤íŽ˜ì¸ì–´","zh-Hans":"è¥¿ç­ç‰™æ–‡","zh-Hant":"è¥¿ç­ç‰™æ–‡"},fa:{en:"Persian",fa:"ÙØ§Ø±Ø³ÛŒ",ko:"íŽ˜ë¥´ì‹œì•„ì–´","zh-Hans":"æ³¢æ–¯æ–‡","zh-Hant":"æ³¢æ–¯æ–‡"},fr:{en:"French",fr:"FranÃ§ais",ko:"í”„ëž‘ìŠ¤ì–´","zh-Hans":"æ³•æ–‡","zh-Hant":"æ³•æ–‡"},ga:{en:"Irish",ga:"Gaeilge",ko:"ì•„ì¼ëžœë“œì–´","zh-Hans":"çˆ±å°”å…°æ–‡","zh-Hant":"æ„›çˆ¾è˜­æ–‡"},gd:{en:"Scottish Gaelic",gd:"GÃ idhlig",ko:"ìŠ¤ì½”í‹€ëžœë“œ ê²Œì¼ì–´","zh-Hans":"è‹æ ¼å…°ç›–å°”æ–‡","zh-Hant":"è˜‡æ ¼è˜­è“‹çˆ¾æ–‡"},hi:{en:"Hindi",hi:"à¤¹à¤¿à¤¨à¥à¤¦à¥€",ko:"ížŒë””ì–´","zh-Hans":"å°åœ°æ–‡","zh-Hant":"å°åœ°æ–‡"},hu:{en:"Hungarian",hu:"Magyar",ko:"í—ê°€ë¦¬ì–´","zh-Hans":"åŒˆç‰™åˆ©æ–‡","zh-Hant":"åŒˆç‰™åˆ©æ–‡"},id:{en:"Indoesian",id:"Bahasa Indonesia",ko:"ì¸ë„ë„¤ì‹œì•„ì–´","zh-Hans":"å°å°¼æ–‡","zh-Hant":"å°å°¼æ–‡"},it:{en:"Italian",it:"Italiano",ko:"ì´íƒˆë¦¬ì•„ì–´","zh-Hans":"æ„å¤§åˆ©æ–‡","zh-Hant":"æ„å¤§åˆ©æ–‡"},ja:{en:"Japanese",ja:"æ—¥æœ¬èªž",ko:"ì¼ë³¸ì–´","zh-Hans":"æ—¥æ–‡","zh-Hant":"æ—¥æ–‡"},kk:{en:"Kazakh",kk:"ÒšÐ°Ð·Ð°Ò›ÑˆÐ°",ko:"ì¹´ìžíì–´","zh-Hans":"å“ˆè¨å…‹æ–‡","zh-Hant":"å“ˆè–©å…‹æ–‡"},ko:{en:"Korean",ja:"éŸ“å›½èªž",ko:"í•œêµ­ì–´","zh-Hans":"éŸ©æ–‡","zh-Hant":"éŸ“æ–‡"},ms:{en:"Malay",ko:"ë§ë ˆì´ì–´",ms:"Bahasa Melayu","zh-Hans":"é©¬æ¥æ–‡","zh-Hant":"é¦¬ä¾†æ–‡"},no:{en:"Norwegian",ko:"ë…¸ë¥´ì›¨ì´ì–´",no:"Norsk","zh-Hans":"æŒªå¨æ–‡","zh-Hant":"æŒªå¨æ–‡"},pl:{en:"Polish",ko:"í´ëž€ë“œì–´",pl:"Polski","zh-Hans":"æ³¢å…°æ–‡","zh-Hant":"æ³¢è˜­æ–‡"},pt:{en:"Portuguese",ko:"í¬ë¥´íˆ¬ê°ˆì–´",pt:"PortuguÃªs","zh-Hans":"è‘¡è„ç‰™æ–‡","zh-Hant":"è‘¡è„ç‰™æ–‡"},ro:{en:"Romanian",ko:"ë£¨ë§ˆë‹ˆì•„ì–´",ro:"RomÃ¢nÄƒ","zh-Hans":"ç½—é©¬å°¼äºšæ–‡","zh-Hant":"ç¾…é¦¬å°¼äºžæ–‡"},ru:{en:"Russian",ko:"ëŸ¬ì‹œì•„ì–´",ru:"Ð ÑƒÑÑÐºÐ¸Ð¹","zh-Hans":"ä¿„æ–‡","zh-Hant":"ä¿„æ–‡"},sv:{en:"Swedish",ko:"ìŠ¤ì›¨ë´ì–´",sv:"Svenska","zh-Hans":"ç‘žå…¸æ–‡","zh-Hant":"ç‘žå…¸æ–‡"},th:{en:"Thai",ko:"íƒœêµ­ì–´",th:"à¸ à¸²à¸©à¸²à¹„à¸—à¸¢","zh-Hans":"æ³°æ–‡","zh-Hant":"æ³°æ–‡"},tr:{en:"Turkish",ko:"íŠ€ë¥´í‚¤ì˜ˆì–´",tr:"TÃ¼rkÃ§e","zh-Hans":"åœŸè€³å…¶æ–‡","zh-Hant":"åœŸè€³å…¶æ–‡"},uk:{en:"Ukrainian",ko:"ìš°í¬ë¼ì´ë‚˜ì–´",uk:"Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°","zh-Hans":"ä¹Œå…‹å…°æ–‡","zh-Hant":"çƒå…‹è˜­æ–‡"},ur:{en:"Urdo",ko:"ìš°ë¥´ë‘ì–´",ur:"Ø§Ø±Ø¯Ùˆ","zh-Hans":"ä¹Œå°”éƒ½æ–‡","zh-Hant":"çƒçˆ¾éƒ½æ–‡"},uz:{en:"Uzbek",ko:"ìš°ì¦ˆë² í¬ì–´",uz:"OÊ»zbekcha","zh-Hans":"ä¹Œå…¹åˆ«å…‹æ–‡","zh-Hant":"çƒèŒ²åˆ¥å…‹æ–‡"},vi:{en:"Vietnamese",ko:"ë² íŠ¸ë‚¨ì–´",vi:"Tiáº¿ng Viá»‡t","zh-Hans":"è¶Šå—æ–‡","zh-Hant":"è¶Šå—æ–‡"},"zh-Hans":{en:"Simplified Chinese",ja:"ä¸­å›½èªžï¼ˆç°¡ä½“å­—ï¼‰",ko:"ì¤‘êµ­ì–´ ê°„ì²´ìž","zh-Hans":"ç®€ä½“ä¸­æ–‡","zh-Hant":"ç°¡é«”ä¸­æ–‡"},"zh-Hant":{en:"Traditional Chinese",ja:"ä¸­å›½èªžï¼ˆç¹ä½“å­—ï¼‰",ko:"ì¤‘êµ­ì–´ ì •ì²´ìž","zh-Hans":"ç¹ä½“ä¸­æ–‡","zh-Hant":"ç¹é«”ä¸­æ–‡"}};const ht="/assets/rmp-logo512-Hh3pLqZ3.png",dt={flex:1,justifyContent:"center",mb:10,"& > div":{mb:3},"& img":{w:120,p:2,backgroundColor:"white",borderRadius:12}};function ut(){const{t}=p();return e.jsxs(O,{sx:dt,children:[e.jsxs(pe,{spacing:3,children:[e.jsx(ne,{src:"/logo512.png"}),e.jsx(ne,{src:ht,backgroundColor:"white"})]}),e.jsx(z,{children:t("Welcome to Rail Map Toolkit")}),e.jsx(f,{fontSize:"lg",textAlign:"center",children:t("Select an app to start your own rail map design!")})]})}function pt(t){var a;const{tab:n,isActive:o}=t,[s]=u.useState((a=n.url)!=null?a:"/"+n.app+"/");return e.jsx(P,{display:o?"block":"none",flex:1,children:e.jsx("iframe",{id:We+n.id,src:s,loading:"lazy",title:n.app,width:"100%",height:"100%"})})}function xt(){const{openedTabs:t,activeTab:n}=M(s=>s.app),[,o]=me();return u.useEffect(()=>{var s;if(n){const a=(s=t.find(r=>r.id===n))==null?void 0:s.app;o(a?{app:a}:{})}else o({})},[n]),t.length===0?e.jsx(ut,{}):e.jsx(e.Fragment,{children:t.map(s=>e.jsx(pt,{tab:s,isActive:n===s.id},s.id))})}function gt(t){return v({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},child:[]}]})(t)}function mt(t){return v({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(t)}function T(t){return v({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(t)}function jt(t){return v({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function ft(t){return v({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function vt(t){return v({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z"},child:[]}]})(t)}function zt(t){return v({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"},child:[]}]})(t)}function le(t){return v({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function wt(t){return v({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(t)}function kt(t){return v({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function bt(t){return v({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(t)}const ce={"& button:first-of-type":{w:"100%",overflow:"hidden",justifyContent:"flex-start",textOverflow:"ellipsis",textAlign:"start","& span.chakra-button__icon":{ml:-1,color:"orange.300",'[data-theme="dark"] &':{color:"orange.200"}}},'&[aria-current="true"] > button':{bg:"primary.50",_hover:{bg:"primary.100"},'[data-theme="dark"] &':{bg:"primary.700",_hover:{bg:"primary.600"}}},"& > div":{zIndex:6}};function Ct(t){var X;const{appId:n,onAboutOpen:o}=t,{t:s}=p(),a=E(),r=ye("(min-width: ".concat(Ae.breakpoints.sm,")")),{activeTab:i,openedTabs:h}=M(c=>c.app),x=H[n],d=x.name.split(" - ").map(c=>s(c)).join(" - "),m=h.some(c=>c.app===n),g=!x.allowMultiInstances&&((X=h.find(c=>c.id===i))==null?void 0:X.app)===n,S=c=>{m||l.event(k.OPEN_APP,{appId:n,isOpenInNew:c}),a(c?qe(n):Ke({appId:n})),r[0]||(a(q()),l.toggleNavMenu(!1))},He=c=>{a(Ye(c)),r[0]||(a(q()),l.toggleNavMenu(!1))},Me=c=>{a(Je(c)),l.event(k.CLOSE_APP,{app:n})},Se=c=>{a(Qe(c)),l.event(k.CLOSE_APP,{app:c})};return e.jsxs(e.Fragment,{children:[e.jsxs(se,{variant:g?"solid":"ghost",size:"md",isAttached:!0,"aria-current":g,sx:ce,children:[e.jsx(j,{onClick:()=>S(!1),leftIcon:m?e.jsx(vt,{title:s("Running")}):e.jsx(P,{w:4}),children:d}),x.allowMultiInstances&&e.jsx(L,{"aria-label":s("New tab"),title:s("New tab"),icon:e.jsx(ft,{}),onClick:()=>S(!0)}),e.jsxs(Re,{children:[e.jsx(Ie,{as:L,icon:e.jsx(kt,{}),"aria-label":s("More"),title:s("More")}),e.jsxs(_e,{children:[m&&e.jsx(oe,{icon:e.jsx(le,{}),onClick:()=>Se(n),children:x.allowMultiInstances?s("Close all tabs"):s("Close app")}),e.jsx(oe,{icon:e.jsx(mt,{}),onClick:o,children:s("About")})]})]})]}),x.allowMultiInstances&&h.filter(c=>c.app===n).map((c,ee)=>{const te=c.id===i;return e.jsxs(se,{variant:te?"solid":"ghost",size:"sm",ml:8,mr:1,isAttached:!0,"aria-current":te,sx:ce,children:[e.jsxs(j,{onClick:()=>He(c.id),children:[e.jsx(xe,{mr:2,children:ee+1}),s("Tab")+" "+(ee+1).toString()+" - "+d]}),e.jsx(L,{"aria-label":s("Close tab"),title:s("Close tab"),icon:e.jsx(le,{}),onClick:()=>Me(c.id)})]},c.id)})]})}const Ht=async t=>{const n="/".concat(t,"/info.json");try{return(await(await fetch(n)).json()).version}catch(o){return console.log("Failed to get version for ".concat(t)),"unknown"}},Mt=async(t,n)=>{const o="/".concat(t,"/legacy-contributor-list.txt");return(await(await fetch(o,{signal:n})).text()).split("\n")};function St(t){var h,x,d;const{appId:n,onClose:o}=t,{t:s}=p(),[a,r]=u.useState("Unknown"),i=n?(d=(x=(h=H[n])==null?void 0:h.url)==null?void 0:x.split("/"))==null?void 0:d[1]:void 0;return u.useEffect(()=>{i?Ht(i).then(m=>r(m)):r("Unknown")},[i]),e.jsxs(A,{isOpen:!!n,onClose:o,size:"xl",scrollBehavior:"inside",children:[e.jsx(Y,{}),e.jsxs(R,{children:[e.jsxs(I,{children:[s("About")+" "+(n?H[n].name.split(" - ").map(m=>s(m)).join(" - "):""),e.jsx(xe,{ml:1,children:a})]}),e.jsx(ge,{}),e.jsx(_,{}),e.jsx(N,{children:e.jsx(j,{colorScheme:"primary",onClick:()=>window.open("https://github.com/railmapgen/"+i,"_blank"),children:s("Visit GitHub")})})]})]})}function he({assetType:t}){const{t:n}=p(),[o,s]=u.useState(),a=je(t,l.getEnv(),l.getInstance());return e.jsxs(b,{children:[e.jsx(C,{children:e.jsx(z,{as:"h4",size:"md",my:1,children:n(t==="devtool"?"Devtools":"Apps")})}),e.jsx(w,{direction:"column",children:a.map(r=>e.jsx(Ct,{appId:r,onAboutOpen:()=>s(r)},r))}),e.jsx(St,{appId:o,onClose:()=>s(void 0)})]})}const yt={"& > span":{minW:"75%",borderRadius:"lg",cursor:"pointer","& > span:last-of-type":{display:"block"},"& p":{fontSize:"sm","&:first-of-type":{fontSize:"lg",fontWeight:"bold",mb:1}}},"& .chakra-avatar":{ml:1,mr:3,my:4}};function At(){const{t}=p();return e.jsxs(b,{children:[e.jsx(C,{children:e.jsx(z,{as:"h5",size:"sm",children:t("Developer team")})}),e.jsxs(O,{sx:yt,children:[e.jsxs(F,{size:"lg",onClick:()=>window.open("https://github.com/wongchito","_blank"),children:[e.jsx(D,{src:"https://github.com/wongchito.png",size:"lg"}),e.jsxs(G,{children:[e.jsx(f,{children:"Chito Wong"}),e.jsx(f,{children:"Author of Rail Map Toolkit platform"}),e.jsx(f,{children:"Author of Rail Map Generator"})]})]}),e.jsxs(F,{size:"lg",onClick:()=>window.open("https://github.com/thekingofcity","_blank"),children:[e.jsx(D,{src:"https://github.com/thekingofcity.png",size:"lg"}),e.jsxs(G,{children:[e.jsx(f,{children:"thekingofcity"}),e.jsx(f,{children:"Author of Rail Map Painter"}),e.jsx(f,{children:"Author of RMG (Shanghai Metro style)"})]})]}),e.jsxs(F,{size:"lg",onClick:()=>window.open("https://github.com/langonginc","_blank"),children:[e.jsx(D,{src:"https://github.com/langonginc.png",size:"lg"}),e.jsxs(G,{children:[e.jsx(f,{children:"5+1"}),e.jsx(f,{children:"Author of RMP2RMG conversion"})]})]})]})]})}function Z(t){const{login:n,urlRepo:o,...s}=t,a=o?"https://github.com/railmapgen/".concat(o,"/issues?q=is:issue+author:").concat(n):"https://github.com/".concat(n);return e.jsx(D,{name:n,title:n,src:"https://github.com/".concat(n,".png"),loading:"lazy",onClick:()=>window.open(a,"_blank"),cursor:"pointer",...s})}const Rt=["52PD","linchen1965","28yfang","Windows-Taskmgr"];function It(){const{t}=p();return e.jsxs(b,{children:[e.jsx(C,{children:e.jsx(z,{as:"h5",size:"sm",children:t("Resource administrators")})}),e.jsx(J,{spacing:1.5,px:2,children:Rt.map(n=>e.jsx(Q,{children:e.jsx(Z,{login:n,size:"md"})},n))})]})}const we="https://api.github.com/repos/railmapgen",W={},ke=async(t,n)=>{if(t in W)return W[t];const s=await(await fetch(t,n)).json();return W[t]=s,s},_t=async(t,n,o)=>{const s="".concat(we,"/").concat(t,"/contributors"),a=new URLSearchParams({per_page:"100",page:n.toString()});return(await ke(s+"?"+a.toString(),{signal:o})).map(i=>i.login)},Et=async(t,n,o)=>{const s="".concat(we,"/").concat(t,"/issues"),a=new URLSearchParams({state:"closed",labels:"donation",per_page:"100",page:n.toString()});return(await ke(s+"?"+a.toString(),{signal:o})).filter(i=>i.state_reason==="completed").map(i=>{var h;return(h=i.user)==null?void 0:h.login})};function be(t){const[n,o]=u.useState(t!=null?t:[]);return[n,a=>{o(r=>{const i=new Set(r?r.concat(a):a);return Array.from(i)})}]}const Lt=["","wongchito","thekingofcity","github-actions[bot]"],de=t=>!Lt.includes(t);function Dt(t){const[n,o]=be(),[s,a]=u.useState(!0),[r,i]=u.useState(!1),h=u.useRef(),x=async()=>{var m;let d=1;for(;;){h.current=new AbortController;const g=await _t(t,d,(m=h.current)==null?void 0:m.signal);if(o(g.filter(de)),g.length<100)break;d++}};return u.useEffect(()=>(x().then(()=>{var d;return H[t].legacyContributors?(h.current=new AbortController,Mt(t,(d=h.current)==null?void 0:d.signal)):[]}).then(d=>o(d.filter(de))).catch(d=>{console.error("[rmt] unable to fetch contributors for:",t,d),i(!0)}).finally(()=>a(!1)),()=>{var d;(d=h.current)==null||d.abort(),a(!0),i(!1)}),[t]),{contributors:n,isLoading:s,isError:r}}const Tt={position:"relative",minH:20,"& .chakra-alert":{flexDirection:"column"},"& .chakra-alert__icon":{boxSize:7,mr:0,mb:1}};function Ot(t){const{appId:n}=t,{t:o}=p(),{contributors:s,isLoading:a,isError:r}=Dt(n);return e.jsxs(w,{sx:Tt,children:[a&&e.jsx(ve,{isIndeterminate:!0}),r&&e.jsxs(y,{status:"warning",children:[e.jsx(B,{}),o("Unable to load contributors")]}),!r&&s&&e.jsx(J,{spacing:1.5,children:s==null?void 0:s.map(i=>e.jsx(Q,{children:e.jsx(Z,{login:i,urlRepo:n,size:"sm"})},i))})]})}const Pt={"& > *:not(.rmg-section__header)":{px:2},"& h6":{my:2}};function Nt(){const{t}=p();return e.jsxs(b,{sx:Pt,children:[e.jsx(C,{children:e.jsx(z,{as:"h5",size:"sm",children:t("Resource contributors")})}),Object.entries(H).filter(([,n])=>n.showContributors).map(([n,o])=>e.jsxs(u.Fragment,{children:[e.jsx(z,{as:"h6",size:"xs",children:t(o.name)}),e.jsx(Ot,{appId:n},n)]},n)),e.jsx(f,{as:"i",fontSize:"xs",mt:3,children:t("Notes: Contributors are sorted by number of commits and commit time.")})]})}function Bt(){const[t,n]=be(),[o,s]=u.useState(!0),[a,r]=u.useState(!1),i=u.useRef(),h=async()=>{var d;const x=Object.entries(H).filter(([,m])=>m.showDonators).map(([m])=>m);for(const m of x)try{let g=1;for(;;){i.current=new AbortController;const S=await Et(m,g,(d=i.current)==null?void 0:d.signal);if(n(S),S.length<100)break;g++}}catch(g){throw console.error("[rmt] unable to fetch donators for:",m,g),g}};return u.useEffect(()=>(h().catch(()=>r(!0)).finally(()=>s(!1)),()=>{var x;(x=i.current)==null||x.abort(),s(!0),r(!1)}),[]),{donators:t,isLoading:o,isError:a}}const Ft={position:"relative",px:2,minH:20,"& .chakra-alert":{flexDirection:"column"},"& .chakra-alert__icon":{boxSize:7,mr:0,mb:1}};function Gt(){const{t}=p(),{donators:n,isLoading:o,isError:s}=Bt();return e.jsxs(b,{children:[e.jsx(C,{children:e.jsx(z,{as:"h5",size:"sm",children:"â¤ï¸ "+t("Donators")})}),e.jsxs(w,{sx:Ft,children:[o&&e.jsx(ve,{isIndeterminate:!0}),s&&e.jsxs(y,{status:"warning",children:[e.jsx(B,{}),t("Unable to load donators")]}),!s&&n&&e.jsx(J,{spacing:1.5,children:n==null?void 0:n.map(a=>e.jsx(Q,{children:e.jsx(Z,{login:a,size:"sm"})},a))})]})]})}const Vt={bg:"inherit",py:0,"& section:not(:last-of-type)":{mb:4}};function Ut(t){const{isOpen:n,onClose:o}=t,{t:s}=p();return e.jsxs(A,{isOpen:n,onClose:o,size:"xl",scrollBehavior:"inside",children:[e.jsx(Y,{}),e.jsxs(R,{children:[e.jsx(I,{children:s("Contributors")}),e.jsx(ge,{}),e.jsxs(_,{sx:Vt,children:[e.jsx(At,{}),e.jsx(Gt,{}),e.jsx(It,{}),e.jsx(Nt,{})]}),e.jsx(N,{children:e.jsx(j,{colorScheme:"primary",onClick:()=>window.open("https://github.com/railmapgen/rmg/wiki/How-to-add-color-palette-and-line-templates","_blank"),children:s("Contribution Wiki")})})]})]})}function $t(){const{t}=p(),n=E(),{isShowMenu:o,showFontAdvice:s}=M(i=>i.app),[a,r]=u.useState(o&&s==="show");return u.useEffect(()=>{let i;return o&&s==="show"?i=window.setTimeout(()=>{r(!0)},5e3):r(!1),()=>{window.clearTimeout(i)}},[o,s]),e.jsxs(Ee,{isOpen:a,onClose:()=>n(U()),children:[e.jsx(Le,{children:e.jsx(j,{variant:"ghost",size:"sm",w:"100%",leftIcon:e.jsx(gt,{}),onClick:()=>{n(K("support")),n(U())},children:t("Help & support")})}),e.jsxs(De,{children:[e.jsx(Te,{}),e.jsx(Oe,{}),e.jsxs(Pe,{children:["ðŸ’¡ ",t("Pro tip")]}),e.jsx(Ne,{children:t("Fonts are slow to load? Learn how to speed it up!")}),e.jsxs(Be,{display:"flex",children:[e.jsx(j,{variant:"ghost",size:"sm",ml:"auto",onClick:()=>{n(Ze()),l.storage.set(Xe.SHOW_FONT_ADVICE,et)},children:t("Don't show again")}),e.jsx(j,{variant:"solid",colorScheme:"primary",size:"sm",ml:2,onClick:()=>n(U()),children:t("OK")})]})]})]})}function Wt(){const{t}=p(),n=E(),{menuView:o,refreshRequired:s}=M(i=>i.app),[a,r]=u.useState(!1);return e.jsxs(w,{direction:"column",children:[e.jsx(Fe,{}),o==="main"?e.jsxs(Ge,{templateColumns:"repeat(3, auto)",children:[e.jsx(V,{children:e.jsx(j,{variant:"ghost",size:"sm",w:"100%",leftIcon:e.jsx(bt,{}),onClick:()=>r(!0),children:t("Contributors")})}),e.jsx(V,{children:e.jsx($t,{})}),e.jsx(V,{children:e.jsx(j,{variant:"ghost",size:"sm",w:"100%",leftIcon:e.jsx(jt,{}),onClick:()=>n(K("settings")),children:t("Settings")})})]}):e.jsx(j,{variant:"ghost",size:"sm",w:"100%",leftIcon:e.jsx(zt,{}),onClick:()=>n(K("main")),isDisabled:s,children:t("Go back")}),e.jsx(Ut,{isOpen:a,onClose:()=>r(!1)})]})}function Ce(){const{t}=p();return{type:"select",label:t("Language"),value:l.getLanguage(),options:{[t("Main languages")]:lt.reduce((n,o)=>({...n,[o]:re[o][o]}),{}),[t("Other languages")]:ct.reduce((n,o)=>({...n,[o]:re[o][o]}),{})},onChange:n=>{const o=n;l.setLanguage(o),l.getI18nInstance().changeLanguage(o),l.event(k.CHANGE_LANGUAGE,{language:o})}}}function qt(){const{t}=p(),{setColourMode:n}=at(),o=E(),{lastShowDevtools:s,refreshRequired:a}=M(g=>g.app),[r,i]=u.useState(l.isAllowAnalytics()),h=Ce(),x=g=>{i(g),l.allowAnalytics(g).refreshRequired&&o(st())},d={light:t("Light"),dark:t("Dark"),system:t("System")},m=[h,{type:"select",label:t("Appearance"),value:l.getColourMode(),options:d,onChange:g=>n(g)},{type:"switch",label:t("Allow cookies to help improve our website"),isChecked:r,onChange:x,oneLine:!0,isDisabled:a},{type:"switch",label:t("Show dev tools for 1 day"),isChecked:fe(s),onChange:g=>{g?(o(tt()),l.event(k.SHOW_DEVTOOLS)):o(nt())},oneLine:!0}];return e.jsxs(b,{children:[a&&e.jsxs(y,{status:"info",variant:"solid",size:"xs",children:[e.jsx(B,{}),t("Refreshing is required for changes to take effect.")]}),e.jsx(C,{children:e.jsx(z,{as:"h4",size:"md",my:1,children:t("Settings")})}),e.jsx(P,{px:2,children:e.jsx(ze,{fields:m,minW:"full"})})]})}const Kt={"& button":{w:"100%",overflow:"hidden",justifyContent:"flex-start",textOverflow:"ellipsis",textAlign:"start","& span.chakra-button__icon:last-of-type":{ml:"auto"}}};function Yt(){const{t}=p(),n=je("link",l.getEnv(),l.getInstance()),o=s=>{l.event(k.OPEN_LINK,{id:s}),window.open(H[s].url,"_blank")};return e.jsxs(b,{sx:Kt,children:[e.jsx(C,{children:e.jsx(z,{as:"h4",size:"md",my:1,children:t("Useful links")})}),e.jsx(w,{direction:"column",children:n.map(s=>e.jsx(j,{variant:"ghost",size:"md",leftIcon:e.jsx(P,{w:4}),rightIcon:e.jsx(T,{}),onClick:()=>o(s),children:t(H[s].name)},s))})]})}function Jt(t){return v({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 0 0 3.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 0 1-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0 0 25.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 0 1 5-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 0 1 112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 0 1 5 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 0 0 4-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z"},child:[]}]})(t)}function Qt(t){return v({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M126.12 315.1A47.06 47.06 0 1 1 79.06 268h47.06zm23.72 0a47.06 47.06 0 0 1 94.12 0v117.84a47.06 47.06 0 1 1-94.12 0zm47.06-188.98A47.06 47.06 0 1 1 244 79.06v47.06zm0 23.72a47.06 47.06 0 0 1 0 94.12H79.06a47.06 47.06 0 0 1 0-94.12zm188.98 47.06a47.06 47.06 0 1 1 47.06 47.1h-47.06zm-23.72 0a47.06 47.06 0 0 1-94.12 0V79.06a47.06 47.06 0 1 1 94.12 0zM315.1 385.88a47.06 47.06 0 1 1-47.1 47.06v-47.06zm0-23.72a47.06 47.06 0 0 1 0-94.12h117.84a47.06 47.06 0 1 1 0 94.12z"},child:[]}]})(t)}const Zt={px:2,"& button":{w:"100%"}};function Xt(){const{t}=p();return e.jsxs(b,{children:[e.jsx(C,{children:e.jsx(z,{as:"h4",size:"md",my:1,children:t("Help & support")})}),e.jsxs(O,{sx:Zt,children:[e.jsx(j,{size:"md",leftIcon:e.jsx(Jt,{}),rightIcon:e.jsx(T,{}),onClick:()=>{window.open("https://github.com/railmapgen/railmapgen.github.io/issues","_blank"),l.event(k.RAISE_ISSUE)},children:t("Raise an Issue on GitHub")}),e.jsx(j,{size:"md",leftIcon:e.jsx(Qt,{}),rightIcon:e.jsx(T,{}),onClick:()=>{window.open("https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A","_blank"),l.event(k.JOIN_SLACK)},children:t("Join us on Slack")})]})]})}const en={px:2,"& button":{w:"100%"}};function tn(){const{t}=p(),{remoteFonts:n}=M(o=>o.app);return e.jsxs(b,{children:[e.jsx(C,{children:e.jsx(z,{as:"h4",size:"md",my:1,children:t("Web fonts")})}),e.jsxs(O,{sx:en,children:[e.jsxs(f,{as:"i",fontSize:"sm",children:[t("FontsSection.text1")," ",t("FontsSection.text2")," ",t("FontsSection.text3")," (",t("FontsSection.safari"),")"]}),Object.entries(n).map(([o,s])=>e.jsx(j,{size:"sm",rightIcon:s.url?e.jsx(T,{}):void 0,isDisabled:!s.url,onClick:()=>{window.open(s.url,"_blank"),l.event(k.DOWNLOAD_FONT,{family:o})},children:s.displayName?"".concat(s.displayName," (").concat(o,")"):o},o))]})]})}const ue=420,nn={flexShrink:0,flexDirection:"column",overflow:"hidden",alignItems:"flex-end",background:"inherit",transition:"0.3s ease-in-out",maxW:0,visibility:"hidden",boxShadow:"lg",zIndex:100,".show-menu &":{maxW:{base:"100%",md:ue},w:{base:"100%",md:"unset"},visibility:"initial"},"& > div":{flexDirection:"column",h:"100%",w:{base:"100vw",md:ue},background:"inherit","& .nav-menu__header":{flex:0,flexDirection:"row",alignItems:"center",minHeight:10,pl:12},"& .nav-menu__body":{flexDirection:"column",flex:1,overflowX:"hidden",overflowY:"auto",background:"inherit"}},"& .chakra-alert":{flexGrow:0,pl:3,pr:2,py:2,"& a":{fontWeight:"bold",textDecoration:"underline","&:hover, &:focus":{textDecoration:"none"}}}};function sn(){const{t}=p(),{menuView:n,lastShowDevtools:o}=M(r=>r.app),[s]=me(),a=(l.getInstance()==="GitLab"?"https://railmapgen.gitlab.io/":"https://railmapgen.github.io/")+"?"+s.toString();return e.jsx(w,{sx:nn,children:e.jsxs(w,{children:[e.jsxs(w,{className:"nav-menu__header",children:[e.jsx(z,{as:"h4",size:"md",children:t("Rail Map Toolkit")}),e.jsx(it,{environment:l.getEnv(),version:l.getAppVersion()})]}),l.getEnv()!=="PRD"&&e.jsxs(y,{status:"warning",children:[e.jsx(B,{}),e.jsxs(ae,{children:[t("You're currently viewing a testing environment.")," ",e.jsx(ie,{href:a,isExternal:!0,children:t("Back to production environment")})]})]}),e.jsx(y,{status:"error",children:e.jsxs(ae,{children:["ðŸŽ‡"," ",e.jsx(ie,{href:"https://en.wikipedia.org/wiki/Chinese_New_Year",isExternal:!0,children:t("Happy Chinese New Year!")})]})}),e.jsx(w,{className:"nav-menu__body",children:n==="main"?e.jsxs(e.Fragment,{children:[e.jsx(he,{assetType:"app"}),fe(o)&&e.jsx(he,{assetType:"devtool"}),e.jsx(Yt,{})]}):n==="settings"?e.jsx(qt,{}):n==="support"?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{}),e.jsx(tn,{})]}):e.jsx(e.Fragment,{})}),e.jsx(Wt,{})]})})}function on(t){const{isOpen:n,onClose:o}=t,{t:s}=p(),a=u.useRef(null),r=Ce(),i=()=>{l.allowAnalytics(!0),o()},h=()=>{l.allowAnalytics(!1).refreshRequired?window.location.reload():o()};return e.jsxs(A,{initialFocusRef:a,isOpen:n,onClose:()=>{},children:[e.jsx(Y,{}),e.jsxs(R,{children:[e.jsx(I,{children:s("CookiesModal.header")}),e.jsxs(_,{children:[e.jsx(w,{justifyContent:"flex-end",mt:-5,children:e.jsx(ze,{fields:[r]})}),e.jsx(f,{children:s("CookiesModal.text1")}),e.jsx(f,{mt:2,children:s("CookiesModal.text2")}),e.jsx(Ve,{children:e.jsxs(Ue,{children:[" ",s("CookiesModal.item1")]})}),e.jsx(f,{mt:2,children:s("CookiesModal.text3")})]}),e.jsx(N,{children:e.jsxs(pe,{children:[e.jsx(j,{variant:"ghost",onClick:h,children:s("CookiesModal.reject")}),e.jsx(j,{ref:a,colorScheme:"primary",onClick:i,children:s("CookiesModal.accept")})]})})]})]})}const an=()=>{};function rn(){const{t}=p(),[n,o]=u.useState(!1),s=()=>{o(!0),ot(),setTimeout(()=>{window.location.reload()},1e3)};return e.jsx(A,{isOpen:!0,onClose:an,children:e.jsxs(R,{children:[e.jsx(I,{children:t("Rail Map Toolkit is opened in another window")}),e.jsx(_,{children:t("You cannot open multiple Rail Map Toolkit at the same time. Please close this window.")}),e.jsx(N,{children:e.jsx(j,{colorScheme:"primary",onClick:s,isLoading:n,children:t("Restart RMT in this window")})})]})})}const ln=()=>{};function cn(){const{t}=p();return e.jsx(A,{isOpen:!0,onClose:ln,children:e.jsxs(R,{children:[e.jsx(I,{children:t("Rail Map Toolkit is opened in another window")}),e.jsx(_,{children:t("Current session has been terminated. Please close this window.")})]})})}function gn(){const{t}=p(),n=E(),{isPrimary:o,isTerminated:s,isShowMenu:a}=M(x=>x.app),[r,i]=u.useState(!1);u.useEffect(()=>{l.isAnalyticsQADone()||i(!0)},[]);const h=()=>{l.toggleNavMenu(!a),n(q()),l.event(k.TOGGLE_NAV_MENU)};return s?e.jsx($,{children:e.jsx(cn,{})}):o===!1?e.jsx($,{children:e.jsx(rn,{})}):e.jsx($e,{basename:"/",children:e.jsxs($,{className:a?"show-menu":"",children:[e.jsx(L,{variant:a?"ghost":"solid",colorScheme:a?void 0:"primary",size:"md","aria-label":t("Toggle menu"),title:t("Toggle menu"),icon:e.jsx(wt,{}),position:"absolute",zIndex:110,borderRadius:0,onClick:h}),e.jsxs(rt,{sx:{flexDirection:"row"},children:[e.jsx(sn,{}),e.jsx(xt,{})]}),e.jsx(on,{isOpen:r,onClose:()=>i(!1)})]})})}export{gn as default};
