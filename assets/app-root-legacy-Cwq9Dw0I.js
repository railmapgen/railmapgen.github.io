System.register(["./chakra-legacy-DjoX1N2k.js","./react-legacy-CdOfui92.js","./main-legacy-fgH07foj.js","./rmg-theme-provider-legacy-C1VWpPjr.js","./rmg-fields-legacy-Drd5ugS0.js"],(function(n,e){"use strict";var t,s,i,a,o,r,l,c,h,d,u,x,p,g,j,m,f,v,z,k,w,b,H,C,y,S,M,A,I,_,R,O,D,T,E,L,N,V,F,P,B,G,W,$,U,q,K,J,Y,Q,X,Z,nn,en,tn,sn,an,on,rn,ln,cn,hn,dn,un,xn,pn,gn,jn,mn,fn,vn,zn,kn,wn,bn,Hn,Cn,yn,Sn,Mn,An,In,_n,Rn;return{setters:[n=>{t=n.j,s=n.aq,i=n.a,a=n.ar,o=n.H,r=n.T,l=n.B,c=n.as,h=n.ae,d=n.am,u=n.at,x=n.b,p=n.af,g=n.au,j=n.av,m=n.aw,f=n.ax,v=n.Q,z=n.ay,k=n.Z,w=n.az,b=n.$,H=n.a0,C=n.a1,y=n.a2,S=n.F,M=n.aA,A=n.aB,I=n.aC,_=n.W,R=n.k,O=n.a6,D=n.a7,T=n.P,E=n.l,L=n.m,N=n.R,V=n.U,F=n.V,P=n.X,B=n.aD,G=n.D,W=n.aE,$=n.aF,U=n.a9,q=n.a5,K=n.aG,J=n.aH},n=>{Y=n.l,Q=n.r,X=n.m,Z=n.B},n=>{nn=n.F,en=n.u,tn=n.a,sn=n.b,an=n.E,on=n.o,rn=n.c,ln=n.t,cn=n.s,hn=n.d,dn=n.e,un=n.g,xn=n.h,pn=n.f,gn=n.n,jn=n.L,mn=n.N,fn=n.i,vn=n.j,zn=n.k,kn=n.r,wn=n.l},n=>{bn=n.r,Hn=n.l,Cn=n.e,yn=n.f,Sn=n.b,Mn=n.u,An=n.i,In=n.g,_n=n.h},n=>{Rn=n.R}],execute:function(){n("default",(function(){const{t:n}=Y(),e=tn(),{isPrimary:s,isTerminated:i,isShowMenu:a}=en((n=>n.app)),[o,r]=Q.useState(!1);return Q.useEffect((()=>{bn.isAnalyticsQADone()||r(!0)}),[]),i?t.jsx(In,{children:t.jsx(We,{})}):!1===s?t.jsx(In,{children:t.jsx(Be,{})}):t.jsx(Z,{basename:"/",children:t.jsxs(In,{className:a?"show-menu":"",children:[t.jsx(p,{variant:a?"ghost":"solid",colorScheme:a?void 0:"primary",size:"md","aria-label":n("Toggle menu"),title:n("Toggle menu"),icon:t.jsx(Kn,{}),position:"absolute",zIndex:110,borderRadius:0,onClick:()=>{bn.toggleNavMenu(!a),e(ln()),bn.event(an.TOGGLE_NAV_MENU)}}),t.jsxs(_n,{sx:{flexDirection:"row"},children:[t.jsx(Ve,{}),t.jsx(Vn,{})]}),t.jsx(Fe,{isOpen:o,onClose:()=>r(!1)})]})})}));var e=["en","zh-Hans","zh-Hant"],On=["ja","ko"],Dn={ar:{ar:"العربية",en:"Arabic",ko:"아랍어","zh-Hans":"阿拉伯文","zh-Hant":"阿拉伯文"},az:{az:"Azərbaycanca",en:"Azerbaijani",ko:"아제르바이잔어","zh-Hans":"阿塞拜疆文","zh-Hant":"阿塞拜疆文"},ca:{ca:"Català",en:"Catalan",ko:"카탈루냐어","zh-Hans":"加泰罗尼亚文","zh-Hant":"加泰隆尼亞文"},da:{da:"Dansk",en:"Danish",ko:"덴마크어","zh-Hans":"丹麦文","zh-Hant":"丹麥文"},de:{de:"Deutsch",en:"German",ko:"독일어","zh-Hans":"德文","zh-Hant":"德文"},el:{el:"Ελληνικά",en:"Greek",ko:"그리스어","zh-Hans":"希腊文","zh-Hant":"希臘文"},en:{en:"English",ja:"英語",ko:"영어","zh-Hans":"英文","zh-Hant":"英文"},es:{en:"Spanish",es:"Español",ko:"스페인어","zh-Hans":"西班牙文","zh-Hant":"西班牙文"},fa:{en:"Persian",fa:"فارسی",ko:"페르시아어","zh-Hans":"波斯文","zh-Hant":"波斯文"},fr:{en:"French",fr:"Français",ko:"프랑스어","zh-Hans":"法文","zh-Hant":"法文"},ga:{en:"Irish",ga:"Gaeilge",ko:"아일랜드어","zh-Hans":"爱尔兰文","zh-Hant":"愛爾蘭文"},gd:{en:"Scottish Gaelic",gd:"Gàidhlig",ko:"스코틀랜드 게일어","zh-Hans":"苏格兰盖尔文","zh-Hant":"蘇格蘭蓋爾文"},hi:{en:"Hindi",hi:"हिन्दी",ko:"힌디어","zh-Hans":"印地文","zh-Hant":"印地文"},hu:{en:"Hungarian",hu:"Magyar",ko:"헝가리어","zh-Hans":"匈牙利文","zh-Hant":"匈牙利文"},id:{en:"Indoesian",id:"Bahasa Indonesia",ko:"인도네시아어","zh-Hans":"印尼文","zh-Hant":"印尼文"},it:{en:"Italian",it:"Italiano",ko:"이탈리아어","zh-Hans":"意大利文","zh-Hant":"意大利文"},ja:{en:"Japanese",ja:"日本語",ko:"일본어","zh-Hans":"日文","zh-Hant":"日文"},kk:{en:"Kazakh",kk:"Қазақша",ko:"카자흐어","zh-Hans":"哈萨克文","zh-Hant":"哈薩克文"},ko:{en:"Korean",ja:"韓国語",ko:"한국어","zh-Hans":"韩文","zh-Hant":"韓文"},ms:{en:"Malay",ko:"말레이어",ms:"Bahasa Melayu","zh-Hans":"马来文","zh-Hant":"馬來文"},no:{en:"Norwegian",ko:"노르웨이어",no:"Norsk","zh-Hans":"挪威文","zh-Hant":"挪威文"},pl:{en:"Polish",ko:"폴란드어",pl:"Polski","zh-Hans":"波兰文","zh-Hant":"波蘭文"},pt:{en:"Portuguese",ko:"포르투갈어",pt:"Português","zh-Hans":"葡萄牙文","zh-Hant":"葡萄牙文"},ro:{en:"Romanian",ko:"루마니아어",ro:"Română","zh-Hans":"罗马尼亚文","zh-Hant":"羅馬尼亞文"},ru:{en:"Russian",ko:"러시아어",ru:"Русский","zh-Hans":"俄文","zh-Hant":"俄文"},sv:{en:"Swedish",ko:"스웨덴어",sv:"Svenska","zh-Hans":"瑞典文","zh-Hant":"瑞典文"},th:{en:"Thai",ko:"태국어",th:"ภาษาไทย","zh-Hans":"泰文","zh-Hant":"泰文"},tr:{en:"Turkish",ko:"튀르키예어",tr:"Türkçe","zh-Hans":"土耳其文","zh-Hant":"土耳其文"},uk:{en:"Ukrainian",ko:"우크라이나어",uk:"Українська","zh-Hans":"乌克兰文","zh-Hant":"烏克蘭文"},ur:{en:"Urdo",ko:"우르두어",ur:"اردو","zh-Hans":"乌尔都文","zh-Hant":"烏爾都文"},uz:{en:"Uzbek",ko:"우즈베크어",uz:"Oʻzbekcha","zh-Hans":"乌兹别克文","zh-Hant":"烏茲別克文"},vi:{en:"Vietnamese",ko:"베트남어",vi:"Tiếng Việt","zh-Hans":"越南文","zh-Hant":"越南文"},"zh-Hans":{en:"Simplified Chinese",ja:"中国語（簡体字）",ko:"중국어 간체자","zh-Hans":"简体中文","zh-Hant":"簡體中文"},"zh-Hant":{en:"Traditional Chinese",ja:"中国語（繁体字）",ko:"중국어 정체자","zh-Hans":"繁体中文","zh-Hant":"繁體中文"}};const Tn="/assets/rmp-logo512-eHekupnf.png",En={flex:1,justifyContent:"center",mb:10,"& > div":{mb:3},"& img":{w:120,p:2,backgroundColor:"white",borderRadius:12}};function Ln(){const{t:n}=Y();return t.jsxs(s,{sx:En,children:[t.jsxs(i,{spacing:3,children:[t.jsx(a,{src:"/logo512.png"}),t.jsx(a,{src:Tn,backgroundColor:"white"})]}),t.jsx(o,{children:n("Welcome to Rail Map Toolkit")}),t.jsx(r,{fontSize:"lg",textAlign:"center",children:n("Select an app to start your own rail map design!")})]})}function Nn(n){const{tab:e,isActive:s}=n,i=Q.useMemo((()=>{var n;return null!==(n=e.url)&&void 0!==n?n:"/"+e.app+"/"}),[e.url,e.app]);return t.jsx(l,{display:s?"block":"none",flex:1,children:t.jsx("iframe",{id:nn+e.id,src:i,loading:"lazy",title:e.app,width:"100%",height:"100%"})})}function Vn(){const{openedTabs:n,activeTab:e}=en((n=>n.app)),[,s]=X();return Q.useEffect((()=>{if(e){var t;const i=null===(t=n.find((n=>n.id===e)))||void 0===t?void 0:t.app;s(i?{app:i}:{})}else s({})}),[e]),0===n.length?t.jsx(Ln,{}):t.jsx(t.Fragment,{children:n.map((n=>t.jsx(Nn,{tab:n,isActive:e===n.id},n.id)))})}function Fn(n){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},child:[]}]})(n)}function Pn(n){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function Bn(n){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(n)}function Gn(n){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(n)}function Wn(n){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(n)}function $n(n){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z"},child:[]}]})(n)}function Un(n){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"},child:[]}]})(n)}function qn(n){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function Kn(n){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(n)}function Jn(n){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function Yn(n){return c({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(n)}const Qn={"& button:first-of-type":{w:"100%",overflow:"hidden",justifyContent:"flex-start",textOverflow:"ellipsis",textAlign:"start","& span.chakra-button__icon":{ml:-1,color:"orange.300",'[data-theme="dark"] &':{color:"orange.200"}}},'&[aria-current="true"] > button':{bg:"primary.50",_hover:{bg:"primary.100"},'[data-theme="dark"] &':{bg:"primary.700",_hover:{bg:"primary.600"}}},"& > div":{zIndex:6}};function Xn(n){var e;const{appId:s,onAboutOpen:i}=n,{t:a}=Y(),o=tn(),r=h(`(min-width: ${d.breakpoints.sm})`),{activeTab:c,openedTabs:z}=en((n=>n.app)),k=sn[s],w=k.name.split(" - ").map((n=>a(n))).join(" - "),b=z.some((n=>n.app===s)),H=!k.allowMultiInstances&&(null===(e=z.find((n=>n.id===c)))||void 0===e?void 0:e.app)===s,C=n=>{b||bn.event(an.OPEN_APP,{appId:s,isOpenInNew:n}),o(n?on(s):rn({appId:s})),r[0]||(o(ln()),bn.toggleNavMenu(!1))};return t.jsxs(t.Fragment,{children:[t.jsxs(u,{variant:H?"solid":"ghost",size:"md",isAttached:!0,"aria-current":H,sx:Qn,children:[t.jsx(x,{onClick:()=>C(!1),leftIcon:b?t.jsx($n,{title:a("Running")}):t.jsx(l,{w:4}),children:w}),k.allowMultiInstances&&t.jsx(p,{"aria-label":a("New tab"),title:a("New tab"),icon:t.jsx(Wn,{}),onClick:()=>C(!0)}),t.jsxs(g,{children:[t.jsx(j,{as:p,icon:t.jsx(Jn,{}),"aria-label":a("More"),title:a("More")}),t.jsxs(m,{children:[b&&t.jsx(f,{icon:t.jsx(qn,{}),onClick:()=>{return o(dn(n=s)),void bn.event(an.CLOSE_APP,{app:n});var n},children:k.allowMultiInstances?a("Close all tabs"):a("Close app")}),t.jsx(f,{icon:t.jsx(Pn,{}),onClick:i,children:a("About")})]})]})]}),k.allowMultiInstances&&z.filter((n=>n.app===s)).map(((n,e)=>{var i;const l=n.id===c;return t.jsxs(u,{variant:l?"solid":"ghost",size:"sm",ml:8,mr:1,isAttached:!0,"aria-current":l,sx:Qn,children:[t.jsxs(x,{onClick:()=>{return e=n.id,o(cn(e)),void(r[0]||(o(ln()),bn.toggleNavMenu(!1)));var e},children:[t.jsx(v,{mr:2,children:e+1}),null!==(i=n.title)&&void 0!==i?i:a("Tab")+" "+(e+1).toString()+" - "+w]}),t.jsx(p,{"aria-label":a("Close tab"),title:a("Close tab"),icon:t.jsx(qn,{}),onClick:()=>{return e=n.id,o(hn(e)),void bn.event(an.CLOSE_APP,{app:s});var e}})]},n.id)}))]})}const Zn=async n=>{const e=`/${n}/info.json`;try{const n=await fetch(e);return(await n.json()).version}catch(t){return Hn.info(`Failed to get version of ${n}`),"unknown"}},ne=async(n,e)=>{const t=`/${n}/legacy-contributor-list.txt`,s=await fetch(t,{signal:e});return(await s.text()).split("\n")};function ee(n){var e;const{appId:s,onClose:i}=n,{t:a}=Y(),[o,r]=Q.useState("Unknown"),l=s?null===(e=sn[s])||void 0===e||null===(e=e.url)||void 0===e||null===(e=e.split("/"))||void 0===e?void 0:e[1]:void 0;return Q.useEffect((()=>{l?Zn(l).then((n=>r(n))):r("Unknown")}),[l]),t.jsxs(z,{isOpen:!!s,onClose:i,size:"xl",scrollBehavior:"inside",children:[t.jsx(k,{}),t.jsxs(w,{children:[t.jsxs(b,{children:[a("About")+" "+(s?sn[s].name.split(" - ").map((n=>a(n))).join(" - "):""),t.jsx(v,{ml:1,children:o})]}),t.jsx(H,{}),t.jsx(C,{}),t.jsx(y,{children:t.jsx(x,{colorScheme:"primary",onClick:()=>window.open("https://github.com/railmapgen/"+l,"_blank"),children:a("Visit GitHub")})})]})]})}function te({assetType:n}){const{t:e}=Y(),[s,i]=Q.useState(),a=un(n,bn.getEnv(),bn.getInstance());return t.jsxs(Cn,{children:[t.jsx(yn,{children:t.jsx(o,{as:"h4",size:"md",my:1,children:e("devtool"===n?"Devtools":"Apps")})}),t.jsx(S,{direction:"column",children:a.map((n=>t.jsx(Xn,{appId:n,onAboutOpen:()=>i(n)},n)))}),t.jsx(ee,{appId:s,onClose:()=>i(void 0)})]})}const se={"& button":{w:"100%",overflow:"hidden",justifyContent:"flex-start",textOverflow:"ellipsis",textAlign:"start","& span.chakra-button__icon:last-of-type":{ml:"auto"}}};function ie(){const{t:n}=Y(),e=un("link",bn.getEnv(),bn.getInstance());return t.jsxs(Cn,{sx:se,children:[t.jsx(yn,{children:t.jsx(o,{as:"h4",size:"md",my:1,children:n("Useful links")})}),t.jsx(S,{direction:"column",children:e.map((e=>t.jsx(x,{variant:"ghost",size:"md",leftIcon:t.jsx(l,{w:4}),rightIcon:t.jsx(Bn,{}),onClick:()=>(n=>{bn.event(an.OPEN_LINK,{id:n}),window.open(sn[n].url,"_blank")})(e),children:n(sn[e].name)},e)))})]})}const ae={"& > span":{minW:"75%",borderRadius:"lg",cursor:"pointer","& > span:last-of-type":{display:"block"},"& p":{fontSize:"sm","&:first-of-type":{fontSize:"lg",fontWeight:"bold",mb:1}}},"& .chakra-avatar":{ml:1,mr:3,my:4}};function oe(){const{t:n}=Y();return t.jsxs(Cn,{children:[t.jsx(yn,{children:t.jsx(o,{as:"h5",size:"sm",children:n("Developer team")})}),t.jsxs(s,{sx:ae,children:[t.jsxs(M,{size:"lg",onClick:()=>window.open("https://github.com/wongchito","_blank"),children:[t.jsx(A,{src:"https://github.com/wongchito.png",size:"lg"}),t.jsxs(I,{children:[t.jsx(r,{children:"Chito Wong"}),t.jsx(r,{children:"Author of Rail Map Toolkit platform"}),t.jsx(r,{children:"Author of Rail Map Generator"})]})]}),t.jsxs(M,{size:"lg",onClick:()=>window.open("https://github.com/thekingofcity","_blank"),children:[t.jsx(A,{src:"https://github.com/thekingofcity.png",size:"lg"}),t.jsxs(I,{children:[t.jsx(r,{children:"thekingofcity"}),t.jsx(r,{children:"Author of Rail Map Painter"}),t.jsx(r,{children:"Author of RMG (Shanghai Metro style)"})]})]}),t.jsxs(M,{size:"lg",onClick:()=>window.open("https://github.com/langonginc","_blank"),children:[t.jsx(A,{src:"https://github.com/langonginc.png",size:"lg"}),t.jsxs(I,{children:[t.jsx(r,{children:"langonginc"}),t.jsx(r,{children:"Author of Rail Map Painter"})]})]})]})]})}function re(n){const{login:e,urlRepo:s,...i}=n,a=s?`https://github.com/railmapgen/${s}/issues?q=is:issue+author:${e}`:`https://github.com/${e}`;return t.jsx(A,{name:e,title:e,src:`https://github.com/${e}.png`,loading:"lazy",onClick:()=>window.open(a,"_blank"),cursor:"pointer",...i})}const le=["Swiftiecott","linchen1965","28yfang","Windows-Taskmgr"];function ce(){const{t:n}=Y();return t.jsxs(Cn,{children:[t.jsx(yn,{children:t.jsx(o,{as:"h5",size:"sm",children:n("Resource administrators")})}),t.jsx(_,{spacing:1.5,px:2,children:le.map((n=>t.jsx(R,{children:t.jsx(re,{login:n,size:"md"})},n)))})]})}const he="https://api.github.com/repos/railmapgen",de={},ue=async(n,e)=>{if(n in de)return de[n];const t=await fetch(n,e),s=await t.json();return de[n]=s,s},xe=async(n,e,t)=>{const s=`${he}/${n}/contributors`,i=new URLSearchParams({per_page:"100",page:e.toString()});return(await ue(s+"?"+i.toString(),{signal:t})).map((n=>n.login))},pe=async(n,e,t)=>{const s=`${he}/${n}/issues`,i=new URLSearchParams({state:"closed",labels:"donation",per_page:"100",page:e.toString()});return(await ue(s+"?"+i.toString(),{signal:t})).filter((n=>"completed"===n.state_reason)).map((n=>{var e;return null===(e=n.user)||void 0===e?void 0:e.login}))};function ge(n){const[e,t]=Q.useState([]);return[e,n=>{t((e=>{const t=new Set(e?e.concat(n):n);return Array.from(t)}))}]}const je=["","wongchito","thekingofcity","github-actions[bot]"],me=n=>!je.includes(n);function fe(n){const[e,t]=ge(),[s,i]=Q.useState(!0),[a,o]=Q.useState(!1),r=Q.useRef();return Q.useEffect((()=>((async()=>{let e=1;for(;;){var s;r.current=new AbortController;const i=await xe(n,e,null===(s=r.current)||void 0===s?void 0:s.signal);if(t(i.filter(me)),i.length<100)break;e++}})().then((()=>{var e;return sn[n].legacyContributors?(r.current=new AbortController,ne(n,null===(e=r.current)||void 0===e?void 0:e.signal)):[]})).then((n=>t(n.filter(me)))).catch((e=>{Hn.error("unable to fetch contributors for:",n,e),o(!0)})).finally((()=>i(!1))),()=>{var n;null===(n=r.current)||void 0===n||n.abort(),i(!0),o(!1)})),[n]),{contributors:e,isLoading:s,isError:a}}const ve={position:"relative",minH:20,"& .chakra-alert":{flexDirection:"column"},"& .chakra-alert__icon":{boxSize:7,mr:0,mb:1}};function ze(n){const{appId:e}=n,{t:s}=Y(),{contributors:i,isLoading:a,isError:o}=fe(e);return t.jsxs(S,{sx:ve,children:[a&&t.jsx(Sn,{isIndeterminate:!0}),o&&t.jsxs(O,{status:"warning",children:[t.jsx(D,{}),s("Unable to load contributors")]}),!o&&i&&t.jsx(_,{spacing:1.5,children:null==i?void 0:i.map((n=>t.jsx(R,{children:t.jsx(re,{login:n,urlRepo:e,size:"sm"})},n)))})]})}const ke={"& > *:not(.rmg-section__header)":{px:2},"& h6":{my:2}};function we(){const{t:n}=Y();return t.jsxs(Cn,{sx:ke,children:[t.jsx(yn,{children:t.jsx(o,{as:"h5",size:"sm",children:n("Resource contributors")})}),Object.entries(sn).filter((([,n])=>n.showContributors)).map((([e,s])=>t.jsxs(Q.Fragment,{children:[t.jsx(o,{as:"h6",size:"xs",children:n(s.name)}),t.jsx(ze,{appId:e},e)]},e))),t.jsx(r,{as:"i",fontSize:"xs",mt:3,children:n("Notes: Contributors are sorted by number of commits and commit time.")})]})}function be(){const[n,e]=ge(),[t,s]=Q.useState(!0),[i,a]=Q.useState(!1),o=Q.useRef();return Q.useEffect((()=>((async()=>{const n=Object.entries(sn).filter((([,n])=>n.showDonators)).map((([n])=>n));for(const i of n)try{let n=1;for(;;){var t;o.current=new AbortController;const s=await pe(i,n,null===(t=o.current)||void 0===t?void 0:t.signal);if(e(s),s.length<100)break;n++}}catch(s){throw Hn.error("unable to fetch donators for:",i,s),s}})().catch((()=>a(!0))).finally((()=>s(!1))),()=>{var n;null===(n=o.current)||void 0===n||n.abort(),s(!0),a(!1)})),[]),{donators:n,isLoading:t,isError:i}}const He={position:"relative",px:2,minH:20,"& .chakra-alert":{flexDirection:"column"},"& .chakra-alert__icon":{boxSize:7,mr:0,mb:1}};function Ce(){const{t:n}=Y(),{donators:e,isLoading:s,isError:i}=be();return t.jsxs(Cn,{children:[t.jsx(yn,{children:t.jsx(o,{as:"h5",size:"sm",children:"❤️ "+n("Donators")})}),t.jsxs(S,{sx:He,children:[s&&t.jsx(Sn,{isIndeterminate:!0}),i&&t.jsxs(O,{status:"warning",children:[t.jsx(D,{}),n("Unable to load donators")]}),!i&&e&&t.jsx(_,{spacing:1.5,children:null==e?void 0:e.map((n=>t.jsx(R,{children:t.jsx(re,{login:n,size:"sm"})},n)))})]})]})}const ye={bg:"inherit",py:0,"& section:not(:last-of-type)":{mb:4}};function Se(n){const{isOpen:e,onClose:s}=n,{t:i}=Y();return t.jsxs(z,{isOpen:e,onClose:s,size:"xl",scrollBehavior:"inside",children:[t.jsx(k,{}),t.jsxs(w,{children:[t.jsx(b,{children:i("Contributors")}),t.jsx(H,{}),t.jsxs(C,{sx:ye,children:[t.jsx(oe,{}),t.jsx(Ce,{}),t.jsx(ce,{}),t.jsx(we,{})]}),t.jsx(y,{children:t.jsx(x,{colorScheme:"primary",onClick:()=>window.open("https://github.com/railmapgen/rmg/wiki/How-to-add-color-palette-and-line-templates","_blank"),children:i("Contribution Wiki")})})]})]})}function Me(){const{t:n}=Y(),e=tn(),{isShowMenu:s,showFontAdvice:i}=en((n=>n.app)),[a,o]=Q.useState(s&&"show"===i);return Q.useEffect((()=>{let n;return s&&"show"===i?n=window.setTimeout((()=>{o(!0)}),5e3):o(!1),()=>{window.clearTimeout(n)}}),[s,i]),t.jsxs(T,{isOpen:a,onClose:()=>e(xn()),children:[t.jsx(E,{children:t.jsx(x,{variant:"ghost",size:"sm",w:"100%",leftIcon:t.jsx(Fn,{}),onClick:()=>{e(pn("support")),e(xn())},children:n("Help & support")})}),t.jsxs(L,{children:[t.jsx(N,{}),t.jsx(V,{}),t.jsxs(F,{children:["💡 ",n("Pro tip")]}),t.jsx(P,{children:n("Fonts are slow to load? Learn how to speed it up!")}),t.jsxs(B,{display:"flex",children:[t.jsx(x,{variant:"ghost",size:"sm",ml:"auto",onClick:()=>{e(gn()),bn.storage.set(jn.SHOW_FONT_ADVICE,mn)},children:n("Don't show again")}),t.jsx(x,{variant:"solid",colorScheme:"primary",size:"sm",ml:2,onClick:()=>e(xn()),children:n("OK")})]})]})]})}function Ae(){const{t:n}=Y(),e=tn(),{menuView:s,refreshRequired:i}=en((n=>n.app)),[a,o]=Q.useState(!1);return t.jsxs(S,{direction:"column",children:[t.jsx(G,{}),"main"===s?t.jsxs(W,{templateColumns:"repeat(3, auto)",children:[t.jsx($,{children:t.jsx(x,{variant:"ghost",size:"sm",w:"100%",leftIcon:t.jsx(Yn,{}),onClick:()=>o(!0),children:n("Contributors")})}),t.jsx($,{children:t.jsx(Me,{})}),t.jsx($,{children:t.jsx(x,{variant:"ghost",size:"sm",w:"100%",leftIcon:t.jsx(Gn,{}),onClick:()=>e(pn("settings")),children:n("Settings")})})]}):t.jsx(x,{variant:"ghost",size:"sm",w:"100%",leftIcon:t.jsx(Un,{}),onClick:()=>e(pn("main")),isDisabled:i,children:n("Go back")}),t.jsx(Se,{isOpen:a,onClose:()=>o(!1)})]})}function Ie(){const{t:n}=Y();return{type:"select",label:n("Language"),value:bn.getLanguage(),options:{[n("Main languages")]:e.reduce(((n,e)=>({...n,[e]:Dn[e][e]})),{}),[n("Other languages")]:On.reduce(((n,e)=>({...n,[e]:Dn[e][e]})),{})},onChange:n=>{const e=n;bn.setLanguage(e),bn.getI18nInstance().changeLanguage(e),bn.event(an.CHANGE_LANGUAGE,{language:e})}}}function _e(){const{t:n}=Y(),{setColourMode:e}=Mn(),s=tn(),{lastShowDevtools:i,refreshRequired:a}=en((n=>n.app)),[r,c]=Q.useState(bn.isAllowAnalytics()),h=Ie(),d={light:n("Light"),dark:n("Dark"),system:n("System")},u=[h,{type:"select",label:n("Appearance"),value:bn.getColourMode(),options:d,onChange:n=>e(n)},{type:"switch",label:n("Allow cookies to help improve our website"),isChecked:r,onChange:n=>{c(n),bn.allowAnalytics(n).refreshRequired&&s(kn())},oneLine:!0,isDisabled:a},{type:"switch",label:n("Show dev tools for 1 day"),isChecked:fn(i),onChange:n=>{n?(s(vn()),bn.event(an.SHOW_DEVTOOLS)):s(zn())},oneLine:!0}];return t.jsxs(Cn,{children:[a&&t.jsxs(O,{status:"info",variant:"solid",size:"xs",children:[t.jsx(D,{}),n("Refreshing is required for changes to take effect.")]}),t.jsx(yn,{children:t.jsx(o,{as:"h4",size:"md",my:1,children:n("Settings")})}),t.jsx(l,{px:2,children:t.jsx(Rn,{fields:u,minW:"full"})})]})}const Re={px:2,"& button":{w:"100%"}};function Oe(){const{t:n}=Y(),{remoteFonts:e}=en((n=>n.app));return t.jsxs(Cn,{children:[t.jsx(yn,{children:t.jsx(o,{as:"h4",size:"md",my:1,children:n("Web fonts")})}),t.jsxs(s,{sx:Re,children:[t.jsxs(r,{as:"i",fontSize:"sm",children:[n("FontsSection.text1")," ",n("FontsSection.text2")," ",n("FontsSection.text3")," (",n("FontsSection.safari"),")"]}),Object.entries(e).map((([n,e])=>t.jsx(x,{size:"sm",rightIcon:e.url?t.jsx(Bn,{}):void 0,isDisabled:!e.url,onClick:()=>{window.open(e.url,"_blank"),bn.event(an.DOWNLOAD_FONT,{family:n})},children:e.displayName?`${e.displayName} (${n})`:n},n)))]})]})}function De(n){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 0 0 3.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 0 1-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0 0 25.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 0 1 5-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 0 1 112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 0 1 5 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 0 0 4-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z"},child:[]}]})(n)}function Te(n){return c({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M126.12 315.1A47.06 47.06 0 1 1 79.06 268h47.06zm23.72 0a47.06 47.06 0 0 1 94.12 0v117.84a47.06 47.06 0 1 1-94.12 0zm47.06-188.98A47.06 47.06 0 1 1 244 79.06v47.06zm0 23.72a47.06 47.06 0 0 1 0 94.12H79.06a47.06 47.06 0 0 1 0-94.12zm188.98 47.06a47.06 47.06 0 1 1 47.06 47.1h-47.06zm-23.72 0a47.06 47.06 0 0 1-94.12 0V79.06a47.06 47.06 0 1 1 94.12 0zM315.1 385.88a47.06 47.06 0 1 1-47.1 47.06v-47.06zm0-23.72a47.06 47.06 0 0 1 0-94.12h117.84a47.06 47.06 0 1 1 0 94.12z"},child:[]}]})(n)}const Ee={px:2,"& button":{w:"100%"}};function Le(){const{t:n}=Y();return t.jsxs(Cn,{children:[t.jsx(yn,{children:t.jsx(o,{as:"h4",size:"md",my:1,children:n("Help & support")})}),t.jsxs(s,{sx:Ee,children:[t.jsx(x,{size:"md",leftIcon:t.jsx(De,{}),rightIcon:t.jsx(Bn,{}),onClick:()=>{window.open("https://github.com/railmapgen/railmapgen.github.io/issues","_blank"),bn.event(an.RAISE_ISSUE)},children:n("Raise an Issue on GitHub")}),t.jsx(x,{size:"md",leftIcon:t.jsx(Te,{}),rightIcon:t.jsx(Bn,{}),onClick:()=>{window.open("https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A","_blank"),bn.event(an.JOIN_SLACK)},children:n("Join us on Slack")})]})]})}const Ne={flexShrink:0,flexDirection:"column",overflow:"hidden",alignItems:"flex-end",background:"inherit",transition:"0.3s ease-in-out",maxW:0,visibility:"hidden",boxShadow:"lg",zIndex:100,".show-menu &":{maxW:{base:"100%",md:420},w:{base:"100%",md:"unset"},visibility:"initial"},"& > div":{flexDirection:"column",h:"100%",w:{base:"100vw",md:420},background:"inherit","& .nav-menu__header":{flex:0,flexDirection:"row",alignItems:"center",minHeight:10,pl:12},"& .nav-menu__body":{flexDirection:"column",flex:1,overflowX:"hidden",overflowY:"auto",background:"inherit"}},"& .chakra-alert":{flexGrow:0,pl:3,pr:2,py:2,"& a":{fontWeight:"bold",textDecoration:"underline","&:hover, &:focus":{textDecoration:"none"}}}};function Ve(){const{t:n}=Y(),{menuView:e,lastShowDevtools:s}=en((n=>n.app)),[i]=X(),a=("GitLab"===bn.getInstance()?"https://railmapgen.gitlab.io/":"https://railmapgen.github.io/")+"?"+i.toString();return t.jsx(S,{sx:Ne,children:t.jsxs(S,{children:[t.jsxs(S,{className:"nav-menu__header",children:[t.jsx(o,{as:"h4",size:"md",children:n("Rail Map Toolkit")}),t.jsx(An,{environment:bn.getEnv(),version:bn.getAppVersion()})]}),"PRD"!==bn.getEnv()&&t.jsxs(O,{status:"warning",children:[t.jsx(D,{}),t.jsxs(U,{children:[n("You're currently viewing a testing environment.")," ",t.jsx(q,{href:a,isExternal:!0,children:n("Back to production environment")})]})]}),t.jsx(S,{className:"nav-menu__body",children:"main"===e?t.jsxs(t.Fragment,{children:[t.jsx(te,{assetType:"app"}),fn(s)&&t.jsx(te,{assetType:"devtool"}),t.jsx(ie,{})]}):"settings"===e?t.jsx(_e,{}):"support"===e?t.jsxs(t.Fragment,{children:[t.jsx(Le,{}),t.jsx(Oe,{})]}):t.jsx(t.Fragment,{})}),t.jsx(Ae,{})]})})}function Fe(n){const{isOpen:e,onClose:s}=n,{t:a}=Y(),o=Q.useRef(null),l=Ie();return t.jsxs(z,{initialFocusRef:o,isOpen:e,onClose:()=>{},children:[t.jsx(k,{}),t.jsxs(w,{children:[t.jsx(b,{children:a("CookiesModal.header")}),t.jsxs(C,{children:[t.jsx(S,{justifyContent:"flex-end",mt:-5,children:t.jsx(Rn,{fields:[l]})}),t.jsx(r,{children:a("CookiesModal.text1")}),t.jsx(r,{mt:2,children:a("CookiesModal.text2")}),t.jsx(K,{children:t.jsxs(J,{children:[" ",a("CookiesModal.item1")]})}),t.jsx(r,{mt:2,children:a("CookiesModal.text3")})]}),t.jsx(y,{children:t.jsxs(i,{children:[t.jsx(x,{variant:"ghost",onClick:()=>{bn.allowAnalytics(!1).refreshRequired?window.location.reload():s()},children:a("CookiesModal.reject")}),t.jsx(x,{ref:o,colorScheme:"primary",onClick:()=>{bn.allowAnalytics(!0),s()},children:a("CookiesModal.accept")})]})})]})]})}const Pe=()=>{};function Be(){const{t:n}=Y(),[e,s]=Q.useState(!1);return t.jsx(z,{isOpen:!0,onClose:Pe,children:t.jsxs(w,{children:[t.jsx(b,{children:n("Rail Map Toolkit is opened in another window")}),t.jsx(C,{children:n("You cannot open multiple Rail Map Toolkit at the same time. Please close this window.")}),t.jsx(y,{children:t.jsx(x,{colorScheme:"primary",onClick:()=>{s(!0),wn(),setTimeout((()=>{window.location.reload()}),1e3)},isLoading:e,children:n("Restart RMT in this window")})})]})})}const Ge=()=>{};function We(){const{t:n}=Y();return t.jsx(z,{isOpen:!0,onClose:Ge,children:t.jsxs(w,{children:[t.jsx(b,{children:n("Rail Map Toolkit is opened in another window")}),t.jsx(C,{children:n("Current session has been terminated. Please close this window.")})]})})}}}}));
