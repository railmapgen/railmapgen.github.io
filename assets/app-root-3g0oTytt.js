import{a1 as we,H as e,a as Me,F as v,ao as Ce,ap as ce,aq as he,ar as X,as as z,_ as j,B as T,at as b,ac as ye,ak as He,au as ee,a0 as f,ad as _,av as Se,aw as Ae,ax as Re,ay as ne,L as de,az as M,U as E,aA as C,X as y,Y as F,Z as H,$ as I,aB as ue,aC as A,aD as N,aE as D,aF as $,W as U,g as q,a4 as R,a5 as O,D as Ie,a3 as L,a7 as te,aG as _e,aH as De}from"./chakra-qS9ppLyx.js";import{r as p,l as x,m as pe,B as Le}from"./react-Ee-ZCU_z.js";import{R as Te,a as Ee,b as Oe,c as Pe,d as Be,F as Ne,u as Y,e as ge,f as w,r as u,E as k,o as $e,g as Ge,t as V,s as We,h as Ve,i as Fe,j as Ue,M as qe,k as se,l as P,m as B,n as xe,p as Ye,q as Qe,v as Ze,w as G,x as Je}from"./index--dxmAQo9.js";var Ke=["en","zh-Hans","zh-Hant"],Xe=["ja","ko"],ae={ar:{ar:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",en:"Arabic",ko:"ì•„ëžì–´","zh-Hans":"é˜¿æ‹‰ä¼¯æ–‡","zh-Hant":"é˜¿æ‹‰ä¼¯æ–‡"},az:{az:"AzÉ™rbaycanca",en:"Azerbaijani",ko:"ì•„ì œë¥´ë°”ì´ìž”ì–´","zh-Hans":"é˜¿å¡žæ‹œç–†æ–‡","zh-Hant":"é˜¿å¡žæ‹œç–†æ–‡"},ca:{ca:"CatalÃ ",en:"Catalan",ko:"ì¹´íƒˆë£¨ëƒì–´","zh-Hans":"åŠ æ³°ç½—å°¼äºšæ–‡","zh-Hant":"åŠ æ³°éš†å°¼äºžæ–‡"},da:{da:"Dansk",en:"Danish",ko:"ë´ë§ˆí¬ì–´","zh-Hans":"ä¸¹éº¦æ–‡","zh-Hant":"ä¸¹éº¥æ–‡"},de:{de:"Deutsch",en:"German",ko:"ë…ì¼ì–´","zh-Hans":"å¾·æ–‡","zh-Hant":"å¾·æ–‡"},el:{el:"Î•Î»Î»Î·Î½Î¹ÎºÎ¬",en:"Greek",ko:"ê·¸ë¦¬ìŠ¤ì–´","zh-Hans":"å¸Œè…Šæ–‡","zh-Hant":"å¸Œè‡˜æ–‡"},en:{en:"English",ja:"è‹±èªž",ko:"ì˜ì–´","zh-Hans":"è‹±æ–‡","zh-Hant":"è‹±æ–‡"},es:{en:"Spanish",es:"EspaÃ±ol",ko:"ìŠ¤íŽ˜ì¸ì–´","zh-Hans":"è¥¿ç­ç‰™æ–‡","zh-Hant":"è¥¿ç­ç‰™æ–‡"},fa:{en:"Persian",fa:"ÙØ§Ø±Ø³ÛŒ",ko:"íŽ˜ë¥´ì‹œì•„ì–´","zh-Hans":"æ³¢æ–¯æ–‡","zh-Hant":"æ³¢æ–¯æ–‡"},fr:{en:"French",fr:"FranÃ§ais",ko:"í”„ëž‘ìŠ¤ì–´","zh-Hans":"æ³•æ–‡","zh-Hant":"æ³•æ–‡"},ga:{en:"Irish",ga:"Gaeilge",ko:"ì•„ì¼ëžœë“œì–´","zh-Hans":"çˆ±å°”å…°æ–‡","zh-Hant":"æ„›çˆ¾è˜­æ–‡"},gd:{en:"Scottish Gaelic",gd:"GÃ idhlig",ko:"ìŠ¤ì½”í‹€ëžœë“œ ê²Œì¼ì–´","zh-Hans":"è‹æ ¼å…°ç›–å°”æ–‡","zh-Hant":"è˜‡æ ¼è˜­è“‹çˆ¾æ–‡"},hi:{en:"Hindi",hi:"à¤¹à¤¿à¤¨à¥à¤¦à¥€",ko:"ížŒë””ì–´","zh-Hans":"å°åœ°æ–‡","zh-Hant":"å°åœ°æ–‡"},hu:{en:"Hungarian",hu:"Magyar",ko:"í—ê°€ë¦¬ì–´","zh-Hans":"åŒˆç‰™åˆ©æ–‡","zh-Hant":"åŒˆç‰™åˆ©æ–‡"},id:{en:"Indoesian",id:"Bahasa Indonesia",ko:"ì¸ë„ë„¤ì‹œì•„ì–´","zh-Hans":"å°å°¼æ–‡","zh-Hant":"å°å°¼æ–‡"},it:{en:"Italian",it:"Italiano",ko:"ì´íƒˆë¦¬ì•„ì–´","zh-Hans":"æ„å¤§åˆ©æ–‡","zh-Hant":"æ„å¤§åˆ©æ–‡"},ja:{en:"Japanese",ja:"æ—¥æœ¬èªž",ko:"ì¼ë³¸ì–´","zh-Hans":"æ—¥æ–‡","zh-Hant":"æ—¥æ–‡"},kk:{en:"Kazakh",kk:"ÒšÐ°Ð·Ð°Ò›ÑˆÐ°",ko:"ì¹´ìžíì–´","zh-Hans":"å“ˆè¨å…‹æ–‡","zh-Hant":"å“ˆè–©å…‹æ–‡"},ko:{en:"Korean",ja:"éŸ“å›½èªž",ko:"í•œêµ­ì–´","zh-Hans":"éŸ©æ–‡","zh-Hant":"éŸ“æ–‡"},ms:{en:"Malay",ko:"ë§ë ˆì´ì–´",ms:"Bahasa Melayu","zh-Hans":"é©¬æ¥æ–‡","zh-Hant":"é¦¬ä¾†æ–‡"},no:{en:"Norwegian",ko:"ë…¸ë¥´ì›¨ì´ì–´",no:"Norsk","zh-Hans":"æŒªå¨æ–‡","zh-Hant":"æŒªå¨æ–‡"},pl:{en:"Polish",ko:"í´ëž€ë“œì–´",pl:"Polski","zh-Hans":"æ³¢å…°æ–‡","zh-Hant":"æ³¢è˜­æ–‡"},pt:{en:"Portuguese",ko:"í¬ë¥´íˆ¬ê°ˆì–´",pt:"PortuguÃªs","zh-Hans":"è‘¡è„ç‰™æ–‡","zh-Hant":"è‘¡è„ç‰™æ–‡"},ro:{en:"Romanian",ko:"ë£¨ë§ˆë‹ˆì•„ì–´",ro:"RomÃ¢nÄƒ","zh-Hans":"ç½—é©¬å°¼äºšæ–‡","zh-Hant":"ç¾…é¦¬å°¼äºžæ–‡"},ru:{en:"Russian",ko:"ëŸ¬ì‹œì•„ì–´",ru:"Ð ÑƒÑÑÐºÐ¸Ð¹","zh-Hans":"ä¿„æ–‡","zh-Hant":"ä¿„æ–‡"},sv:{en:"Swedish",ko:"ìŠ¤ì›¨ë´ì–´",sv:"Svenska","zh-Hans":"ç‘žå…¸æ–‡","zh-Hant":"ç‘žå…¸æ–‡"},th:{en:"Thai",ko:"íƒœêµ­ì–´",th:"à¸ à¸²à¸©à¸²à¹„à¸—à¸¢","zh-Hans":"æ³°æ–‡","zh-Hant":"æ³°æ–‡"},tr:{en:"Turkish",ko:"íŠ€ë¥´í‚¤ì˜ˆì–´",tr:"TÃ¼rkÃ§e","zh-Hans":"åœŸè€³å…¶æ–‡","zh-Hant":"åœŸè€³å…¶æ–‡"},uk:{en:"Ukrainian",ko:"ìš°í¬ë¼ì´ë‚˜ì–´",uk:"Ð£ÐºÑ€Ð°Ñ—Ð½ÑÑŒÐºÐ°","zh-Hans":"ä¹Œå…‹å…°æ–‡","zh-Hant":"çƒå…‹è˜­æ–‡"},ur:{en:"Urdo",ko:"ìš°ë¥´ë‘ì–´",ur:"Ø§Ø±Ø¯Ùˆ","zh-Hans":"ä¹Œå°”éƒ½æ–‡","zh-Hant":"çƒçˆ¾éƒ½æ–‡"},uz:{en:"Uzbek",ko:"ìš°ì¦ˆë² í¬ì–´",uz:"OÊ»zbekcha","zh-Hans":"ä¹Œå…¹åˆ«å…‹æ–‡","zh-Hant":"çƒèŒ²åˆ¥å…‹æ–‡"},vi:{en:"Vietnamese",ko:"ë² íŠ¸ë‚¨ì–´",vi:"Tiáº¿ng Viá»‡t","zh-Hans":"è¶Šå—æ–‡","zh-Hant":"è¶Šå—æ–‡"},"zh-Hans":{en:"Simplified Chinese",ja:"ä¸­å›½èªžï¼ˆç°¡ä½“å­—ï¼‰",ko:"ì¤‘êµ­ì–´ ê°„ì²´ìž","zh-Hans":"ç®€ä½“ä¸­æ–‡","zh-Hant":"ç°¡é«”ä¸­æ–‡"},"zh-Hant":{en:"Traditional Chinese",ja:"ä¸­å›½èªžï¼ˆç¹ä½“å­—ï¼‰",ko:"ì¤‘êµ­ì–´ ì •ì²´ìž","zh-Hans":"ç¹ä½“ä¸­æ–‡","zh-Hant":"ç¹é«”ä¸­æ–‡"}},en=function(n){var t=n.children,o=n.noWrap,s=we("RmgOutput",{noWrap:o});return e.jsx(Me.output,{sx:s,children:t})};function me(n){var t=n.fields,o=n.noLabel,s=n.minW;return e.jsx(v,{wrap:"wrap",children:t.map(function(a,r){if(a.hidden)return e.jsx(p.Fragment,{},r);var l=a.minW||s,c=l==="full";return e.jsx(Te,{className:c?"mw-full":"",label:a.label,flex:c?void 0:1,minW:c?void 0:l,noLabel:o,oneLine:a.oneLine,children:function(i){switch(i.type){case"input":return e.jsx(Be,{placeholder:i.placeholder,defaultValue:i.value,type:i.variant,validator:i.validator,onDebouncedChange:i.onChange,delay:i.debouncedDelay,optionList:i.optionList,isDisabled:i.isDisabled});case"output":return e.jsx(en,{noWrap:!0,children:i.value});case"textarea":return e.jsx(Pe,{placeholder:i.placeholder,defaultValue:i.value,onDebouncedChange:i.onChange,isDisabled:i.isDisabled});case"slider":return e.jsx(Oe,{defaultValue:i.value,min:i.min,max:i.max,step:i.step,onThrottledChange:i.onChange,leftIcon:i.leftIcon,rightIcon:i.rightIcon,isDisabled:i.isDisabled});case"select":return e.jsx(Ee,{defaultValue:i.value,onChange:function(h){var d,m=h.target.value;return(d=i.onChange)===null||d===void 0?void 0:d.call(i,typeof i.value=="number"?Number(m):m.toString())},options:i.options,disabledOptions:i.disabledOptions,isInvalid:i.isInvalid,isDisabled:i.isDisabled});case"switch":return e.jsx(Ce,{isChecked:i.isChecked,isDisabled:i.isDisabled,onChange:function(h){var d,m=h.target.checked;return(d=i.onChange)===null||d===void 0?void 0:d.call(i,m)}});case"custom":return i.component;default:return e.jsx("div",{})}}(a)},r)})})}const nn="/assets/rmp-logo512-Hh3pLqZ3.png",tn={flex:1,justifyContent:"center",mb:10,"& > div":{mb:3},"& img":{w:120,p:2,backgroundColor:"white",borderRadius:12}};function sn(){const{t:n}=x();return e.jsxs(ce,{sx:tn,children:[e.jsxs(he,{spacing:3,children:[e.jsx(X,{src:"/logo512.png"}),e.jsx(X,{src:nn,backgroundColor:"white"})]}),e.jsx(z,{children:n("Welcome to Rail Map Toolkit")}),e.jsx(j,{fontSize:"lg",textAlign:"center",children:n("Select an app to start your own rail map design!")})]})}function an(n){var a;const{tab:t,isActive:o}=n,[s]=p.useState((a=t.url)!=null?a:"/"+t.app+"/");return e.jsx(T,{display:o?"block":"none",flex:1,children:e.jsx("iframe",{id:Ne+t.id,src:s,loading:"lazy",title:t.app,width:"100%",height:"100%"})})}function on(){const{openedTabs:n,activeTab:t}=Y(a=>a.app),[o,s]=pe();return p.useEffect(()=>{var a;if(t){const r=(a=n.find(l=>l.id===t))==null?void 0:a.app;s(r?{app:r}:{})}else s({})},[t]),n.length===0?e.jsx(sn,{}):e.jsx(e.Fragment,{children:n.map(a=>e.jsx(an,{tab:a,isActive:t===a.id},a.id))})}function rn(n){return b({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 7h2v2h-2V7zm0 4h2v6h-2v-6zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"},child:[]}]})(n)}function ln(n){return b({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(n)}function cn(n){return b({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-1 6h2v2h-2V7zm0 4h2v6h-2v-6z"},child:[]}]})(n)}function hn(n){return b({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(n)}function dn(n){return b({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z"},child:[]}]})(n)}function oe(n){return b({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(n)}function un(n){return b({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(n)}function pn(n){return b({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(n)}function gn(n){return b({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(n)}function xn(n){return b({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3 1 9l11 6 9-4.91V17h2V9L12 3z"},child:[]}]})(n)}const ie={"& button:first-of-type":{w:"100%",overflow:"hidden",justifyContent:"flex-start",textOverflow:"ellipsis",textAlign:"start","& span.chakra-button__icon":{ml:-1,color:"orange.300",'[data-theme="dark"] &':{color:"orange.200"}}},'&[aria-current="true"] > button':{bg:"primary.50",_hover:{bg:"primary.100"},'[data-theme="dark"] &':{bg:"primary.700",_hover:{bg:"primary.600"}}}};function mn(n){var Z;const{appId:t,onAboutOpen:o}=n,{t:s}=x(),a=ge(),r=ye("(min-width: ".concat(He.breakpoints.sm,")")),{activeTab:l,openedTabs:c}=Y(g=>g.app),i=w[t],h=i.name.split(" - ").map(g=>s(g)).join(" - "),d=c.some(g=>g.app===t),m=!i.allowMultiInstances&&((Z=c.find(g=>g.id===l))==null?void 0:Z.app)===t,S=g=>{d||u.event(k.OPEN_APP,{appId:t,isOpenInNew:g}),a(g?$e(t):Ge({appId:t})),r[0]||(a(V()),u.toggleNavMenu(!1))},be=g=>{a(We(g)),r[0]||(a(V()),u.toggleNavMenu(!1))},ze=g=>{a(Ve(g)),u.event(k.CLOSE_APP,{app:t})},ke=g=>{a(Fe(g)),u.event(k.CLOSE_APP,{app:g})};return e.jsxs(e.Fragment,{children:[e.jsxs(ee,{variant:m?"solid":"ghost",size:"md",isAttached:!0,"aria-current":m,sx:ie,children:[e.jsx(f,{onClick:()=>S(!1),leftIcon:d?e.jsx(dn,{title:s("Running")}):e.jsx(T,{w:4}),children:h}),i.allowMultiInstances&&e.jsx(_,{"aria-label":s("New tab"),title:s("New tab"),icon:e.jsx(hn,{}),onClick:()=>S(!0)}),e.jsxs(Se,{children:[e.jsx(Ae,{as:_,icon:e.jsx(pn,{}),"aria-label":s("More"),title:s("More")}),e.jsxs(Re,{children:[d&&e.jsx(ne,{icon:e.jsx(oe,{}),onClick:()=>ke(t),children:i.allowMultiInstances?s("Close all tabs"):s("Close app")}),e.jsx(ne,{icon:e.jsx(rn,{}),onClick:o,children:s("About")})]})]})]}),i.allowMultiInstances&&c.filter(g=>g.app===t).map((g,J)=>{const K=g.id===l;return e.jsxs(ee,{variant:K?"solid":"ghost",size:"sm",ml:8,mr:1,isAttached:!0,"aria-current":K,sx:ie,children:[e.jsxs(f,{onClick:()=>be(g.id),children:[e.jsx(de,{mr:2,children:J+1}),s("Tab")+" "+(J+1).toString()+" - "+h]}),e.jsx(_,{"aria-label":s("Close tab"),title:s("Close tab"),icon:e.jsx(oe,{}),onClick:()=>ze(g.id)})]},g.id)})]})}const jn=async n=>{const t="/".concat(n,"/info.json");try{return(await(await fetch(t)).json()).version}catch(o){return console.log("Failed to get version for ".concat(n)),"unknown"}},fn=async(n,t)=>{const o="/".concat(n,"/legacy-contributor-list.txt");return(await(await fetch(o,{signal:t})).text()).split("\n")};function vn(n){var c,i,h;const{appId:t,onClose:o}=n,{t:s}=x(),[a,r]=p.useState("Unknown"),l=t?(h=(i=(c=w[t])==null?void 0:c.url)==null?void 0:i.split("/"))==null?void 0:h[1]:void 0;return p.useEffect(()=>{l?jn(l).then(d=>r(d)):r("Unknown")},[l]),e.jsxs(M,{isOpen:!!t,onClose:o,size:"xl",scrollBehavior:"inside",children:[e.jsx(E,{}),e.jsxs(C,{children:[e.jsxs(y,{children:[s("About")+" "+(t?w[t].name.split(" - ").map(d=>s(d)).join(" - "):""),e.jsx(de,{ml:1,children:a})]}),e.jsx(F,{}),e.jsx(H,{}),e.jsx(I,{children:e.jsx(f,{colorScheme:"primary",onClick:()=>window.open("https://github.com/railmapgen/"+l,"_blank"),children:s("Visit GitHub")})})]})]})}const bn={flexDirection:"column","& h4":{mx:3,my:2},"& > div":{flexDirection:"column"}};function zn(){const{t:n}=x(),[t,o]=p.useState(),s=Ue(u.getEnv());return e.jsxs(v,{sx:bn,children:[e.jsx(z,{as:"h4",size:"md",children:n("Apps")}),e.jsx(v,{children:s.map(a=>e.jsx(mn,{appId:a,onAboutOpen:()=>o(a)},a))}),e.jsx(vn,{appId:t,onClose:()=>o(void 0)})]})}const kn={flexDirection:"column",py:1,"& h4":{mx:3,my:2},"& > div":{px:2,"& button":{w:"100%"}}};function wn(){const{t:n}=x(),t=qe.filter(s=>s!==u.getInstance()),o=s=>{if(s==="Tauri"){const a=new Date;"".concat(a.getFullYear()).concat(String(a.getMonth()+1).padStart(2,"0"),"01"),"".concat(String(a.getFullYear()).slice(-2),".").concat(a.getMonth()+1,".1");const r=navigator.platform;r.includes("Linux")||r.includes("Mac");const l=se[s]+"/tauri-${tag}/railmapgen_${ver}_${suffix}";window.open(l,"_blank"),u.event(k.DOWNLOAD_APP,{})}else{const a=se[s];window.open(a,"_blank"),u.event(k.SWITCH_MIRROR,{url:a})}};return e.jsxs(v,{sx:kn,children:[e.jsx(z,{as:"h4",size:"md",children:n("More mirrors")}),e.jsx(ue,{templateColumns:"repeat(".concat(t.length,", auto)"),gap:2,children:t.map(s=>e.jsx(A,{children:e.jsx(f,{variant:"outline",size:"xs",rightIcon:e.jsx(ln,{}),onClick:()=>o(s),children:n(s==="Tauri"?"Download desktop app":s)},s)},s))})]})}const Mn={"& > span":{minW:"75%",borderRadius:"lg",cursor:"pointer","& > span:last-of-type":{display:"block"},"& p":{fontSize:"sm","&:first-of-type":{fontSize:"lg",fontWeight:"bold",mb:1}}},"& .chakra-avatar":{ml:1,mr:3,my:4}};function Cn(){const{t:n}=x();return e.jsxs(P,{children:[e.jsx(B,{children:e.jsx(z,{as:"h5",size:"sm",children:n("Developer team")})}),e.jsxs(ce,{sx:Mn,children:[e.jsxs(N,{size:"lg",onClick:()=>window.open("https://github.com/wongchito","_blank"),children:[e.jsx(D,{src:"https://github.com/wongchito.png",size:"lg"}),e.jsxs($,{children:[e.jsx(j,{children:"Chito Wong"}),e.jsx(j,{children:"Author of Rail Map Toolkit platform"}),e.jsx(j,{children:"Author of Rail Map Generator"})]})]}),e.jsxs(N,{size:"lg",onClick:()=>window.open("https://github.com/thekingofcity","_blank"),children:[e.jsx(D,{src:"https://github.com/thekingofcity.png",size:"lg"}),e.jsxs($,{children:[e.jsx(j,{children:"thekingofcity"}),e.jsx(j,{children:"Author of Rail Map Painter"}),e.jsx(j,{children:"Author of RMG (Shanghai Metro style)"})]})]}),e.jsxs(N,{size:"lg",onClick:()=>window.open("https://github.com/langonginc","_blank"),children:[e.jsx(D,{src:"https://github.com/langonginc.png",size:"lg"}),e.jsxs($,{children:[e.jsx(j,{children:"5+1"}),e.jsx(j,{children:"Author of RMP2RMG conversion"})]})]})]})]})}function Q(n){const{login:t,urlRepo:o,...s}=n,a=o?"https://github.com/railmapgen/".concat(o,"/issues?q=is:issue+author:").concat(t):"https://github.com/".concat(t);return e.jsx(D,{name:t,title:t,src:"https://github.com/".concat(t,".png"),loading:"lazy",onClick:()=>window.open(a,"_blank"),cursor:"pointer",...s})}const yn=["52PD","linchen1965","28yfang","Windows-Taskmgr"];function Hn(){const{t:n}=x();return e.jsxs(P,{children:[e.jsx(B,{children:e.jsx(z,{as:"h5",size:"sm",children:n("Resource administrators")})}),e.jsx(U,{spacing:1.5,px:2,children:yn.map(t=>e.jsx(q,{children:e.jsx(Q,{login:t,size:"md"})},t))})]})}const je="https://api.github.com/repos/railmapgen",W={},fe=async(n,t)=>{if(n in W)return W[n];const s=await(await fetch(n,t)).json();return W[n]=s,s},Sn=async(n,t,o)=>{const s="".concat(je,"/").concat(n,"/contributors"),a=new URLSearchParams({per_page:"100",page:t.toString()});return(await fe(s+"?"+a.toString(),{signal:o})).map(l=>l.login)},An=async(n,t,o)=>{const s="".concat(je,"/").concat(n,"/issues"),a=new URLSearchParams({state:"closed",labels:"donation",per_page:"100",page:t.toString()});return(await fe(s+"?"+a.toString(),{signal:o})).filter(l=>l.state_reason==="completed").map(l=>{var c;return(c=l.user)==null?void 0:c.login})};function ve(n){const[t,o]=p.useState(n!=null?n:[]);return[t,a=>{o(r=>{const l=new Set(r?r.concat(a):a);return Array.from(l)})}]}const Rn=["","wongchito","thekingofcity","github-actions[bot]"],re=n=>!Rn.includes(n);function In(n){const[t,o]=ve(),[s,a]=p.useState(!0),[r,l]=p.useState(!1),c=p.useRef(),i=async()=>{var d;let h=1;for(;;){c.current=new AbortController;const m=await Sn(n,h,(d=c.current)==null?void 0:d.signal);if(o(m.filter(re)),m.length<100)break;h++}};return p.useEffect(()=>(i().then(()=>{var h;return w[n].legacyContributors?(c.current=new AbortController,fn(n,(h=c.current)==null?void 0:h.signal)):[]}).then(h=>o(h.filter(re))).catch(h=>{console.error("[rmt] unable to fetch contributors for:",n,h),l(!0)}).finally(()=>a(!1)),()=>{var h;(h=c.current)==null||h.abort(),a(!0),l(!1)}),[n]),{contributors:t,isLoading:s,isError:r}}const _n={position:"relative",minH:20,"& .chakra-alert":{flexDirection:"column"},"& .chakra-alert__icon":{boxSize:7,mr:0,mb:1}};function Dn(n){const{appId:t}=n,{t:o}=x(),{contributors:s,isLoading:a,isError:r}=In(t);return e.jsxs(v,{sx:_n,children:[a&&e.jsx(xe,{isIndeterminate:!0}),r&&e.jsxs(R,{status:"warning",children:[e.jsx(O,{}),o("Unable to load contributors")]}),!r&&s&&e.jsx(U,{spacing:1.5,children:s==null?void 0:s.map(l=>e.jsx(q,{children:e.jsx(Q,{login:l,urlRepo:t,size:"sm"})},l))})]})}const Ln={"& > *:not(.rmg-section__header)":{px:2},"& h6":{my:2}};function Tn(){const{t:n}=x();return e.jsxs(P,{sx:Ln,children:[e.jsx(B,{children:e.jsx(z,{as:"h5",size:"sm",children:n("Resource contributors")})}),Object.entries(w).filter(([t,o])=>o.showContributors).map(([t,o])=>e.jsxs(p.Fragment,{children:[e.jsx(z,{as:"h6",size:"xs",children:n(o.name)}),e.jsx(Dn,{appId:t},t)]},t)),e.jsx(j,{as:"i",fontSize:"xs",mt:3,children:n("Notes: Contributors are sorted by number of commits and commit time.")})]})}function En(){const[n,t]=ve(),[o,s]=p.useState(!0),[a,r]=p.useState(!1),l=p.useRef(),c=async()=>{var h;const i=Object.entries(w).filter(([d,m])=>m.showDonators).map(([d])=>d);for(const d of i)try{let m=1;for(;;){l.current=new AbortController;const S=await An(d,m,(h=l.current)==null?void 0:h.signal);if(t(S),S.length<100)break;m++}}catch(m){throw console.error("[rmt] unable to fetch donators for:",d,m),m}};return p.useEffect(()=>(c().catch(()=>r(!0)).finally(()=>s(!1)),()=>{var i;(i=l.current)==null||i.abort(),s(!0),r(!1)}),[]),{donators:n,isLoading:o,isError:a}}const On={position:"relative",px:2,minH:20,"& .chakra-alert":{flexDirection:"column"},"& .chakra-alert__icon":{boxSize:7,mr:0,mb:1}};function Pn(){const{t:n}=x(),{donators:t,isLoading:o,isError:s}=En();return e.jsxs(P,{children:[e.jsx(B,{children:e.jsx(z,{as:"h5",size:"sm",children:"â¤ï¸ "+n("Donators")})}),e.jsxs(v,{sx:On,children:[o&&e.jsx(xe,{isIndeterminate:!0}),s&&e.jsxs(R,{status:"warning",children:[e.jsx(O,{}),n("Unable to load donators")]}),!s&&t&&e.jsx(U,{spacing:1.5,children:t==null?void 0:t.map(a=>e.jsx(q,{children:e.jsx(Q,{login:a,size:"sm"})},a))})]})]})}const Bn={bg:"inherit",py:0,"& section:not(:last-of-type)":{mb:4}};function Nn(n){const{isOpen:t,onClose:o}=n,{t:s}=x();return e.jsxs(M,{isOpen:t,onClose:o,size:"xl",scrollBehavior:"inside",children:[e.jsx(E,{}),e.jsxs(C,{children:[e.jsx(y,{children:s("Contributors")}),e.jsx(F,{}),e.jsxs(H,{sx:Bn,children:[e.jsx(Cn,{}),e.jsx(Pn,{}),e.jsx(Hn,{}),e.jsx(Tn,{})]}),e.jsx(I,{children:e.jsx(f,{colorScheme:"primary",onClick:()=>window.open("https://github.com/railmapgen/rmg/wiki/How-to-add-color-palette-and-line-templates","_blank"),children:s("Contribution Wiki")})})]})]})}function $n(n){const{isOpen:t,onClose:o}=n,{t:s}=x(),[a,r]=p.useState(u.isAllowAnalytics()),[l,c]=p.useState();p.useEffect(()=>{t||c(void 0)},[t]);const i=[{type:"switch",label:s("Allow cookies to help improve our website"),isChecked:a,onChange:r,oneLine:!0}],h=()=>{u.allowAnalytics(a).refreshRequired?c("Refreshing is required for changes to take effect."):o()};return e.jsxs(M,{isOpen:t,onClose:o,children:[e.jsx(E,{}),e.jsxs(C,{children:[l&&e.jsxs(R,{status:"info",variant:"solid",size:"xs",children:[e.jsx(O,{}),s(l)]}),e.jsxs(T,{position:"relative",children:[e.jsx(y,{children:s("Privacy settings")}),e.jsx(F,{})]}),e.jsx(H,{children:e.jsx(me,{fields:i})}),e.jsx(I,{children:e.jsx(f,{colorScheme:"primary",isDisabled:!!l,onClick:h,children:s("Save")})})]})]})}function Gn(n){return b({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M126.12 315.1A47.06 47.06 0 1 1 79.06 268h47.06zm23.72 0a47.06 47.06 0 0 1 94.12 0v117.84a47.06 47.06 0 1 1-94.12 0zm47.06-188.98A47.06 47.06 0 1 1 244 79.06v47.06zm0 23.72a47.06 47.06 0 0 1 0 94.12H79.06a47.06 47.06 0 0 1 0-94.12zm188.98 47.06a47.06 47.06 0 1 1 47.06 47.1h-47.06zm-23.72 0a47.06 47.06 0 0 1-94.12 0V79.06a47.06 47.06 0 1 1 94.12 0zM315.1 385.88a47.06 47.06 0 1 1-47.1 47.06v-47.06zm0-23.72a47.06 47.06 0 0 1 0-94.12h117.84a47.06 47.06 0 1 1 0 94.12z"},child:[]}]})(n)}function Wn(){const{t:n}=x(),[t,o]=p.useState(!1),[s,a]=p.useState(!1);return e.jsxs(v,{direction:"column",children:[e.jsx(Ie,{}),e.jsxs(ue,{templateColumns:"repeat(4, auto)",children:[e.jsx(A,{children:e.jsx(f,{as:L,variant:"ghost",size:"sm",w:"100%",leftIcon:e.jsx(Gn,{}),target:"_blank",href:"https://join.slack.com/t/railmapgenerator/shared_invite/zt-1odhhta3n-DdZF~fnVwo_q0S0RJmgV8A",children:"Slack"})}),e.jsx(A,{children:e.jsx(f,{variant:"ghost",size:"sm",w:"100%",leftIcon:e.jsx(gn,{}),onClick:()=>o(!0),children:n("Contributors")})}),e.jsx(A,{children:e.jsx(f,{variant:"ghost",size:"sm",w:"100%",leftIcon:e.jsx(cn,{}),onClick:()=>a(!0),children:n("Privacy")})}),e.jsx(A,{children:e.jsx(f,{as:L,variant:"ghost",size:"sm",w:"100%",leftIcon:e.jsx(xn,{}),target:"_blank",href:"https://rmttutorial.wordpress.com",children:n("Tutorial")})})]}),e.jsx(Nn,{isOpen:t,onClose:()=>o(!1)}),e.jsx($n,{isOpen:s,onClose:()=>a(!1)})]})}const Vn={flexDirection:"column",py:1,"& h4":{mx:3,my:2},"& > div":{px:2}};function Fn(){const{t:n}=x(),{setColourMode:t}=Ye(),o={light:n("Light"),dark:n("Dark"),system:n("System")},s=[{type:"select",label:n("Language"),value:u.getLanguage(),options:{[n("Main languages")]:Ke.reduce((a,r)=>({...a,[r]:ae[r][r]}),{}),[n("Other languages")]:Xe.reduce((a,r)=>({...a,[r]:ae[r][r]}),{})},onChange:a=>{const r=a;u.setLanguage(r),u.getI18nInstance().changeLanguage(r),u.event(k.CHANGE_LANGUAGE,{language:r})}},{type:"select",label:n("Appearance"),value:u.getColourMode(),options:o,onChange:a=>t(a)}];return e.jsxs(v,{sx:Vn,children:[e.jsx(z,{as:"h4",size:"md",children:n("Settings")}),e.jsx(T,{children:e.jsx(me,{fields:s})})]})}const le=420,Un={flexShrink:0,flexDirection:"column",overflow:"hidden",alignItems:"flex-end",transition:"0.3s ease-in-out",maxW:0,visibility:"hidden",boxShadow:"lg",zIndex:100,".show-menu &":{maxW:{base:"100%",md:le},w:{base:"100%",md:"unset"},visibility:"initial"},"& > div":{flexDirection:"column",h:"100%",w:{base:"100vw",md:le},"& .nav-menu__header":{flex:0,flexDirection:"row",alignItems:"center",minHeight:10,pl:12},"& .nav-menu__body":{flexDirection:"column",flex:1,overflow:"hidden","& > div:first-of-type":{flex:1,overflowY:"auto"}}},"& .chakra-alert":{flexGrow:0,pl:3,pr:2,py:2,"& a":{fontWeight:"bold",textDecoration:"underline","&:hover, &:focus":{textDecoration:"none"}}}};function qn(){const{t:n}=x(),[t]=pe(),o=(u.getInstance()==="GitLab"?"https://railmapgen.gitlab.io/":"https://railmapgen.github.io/")+"?"+t.toString();return e.jsx(v,{as:"section",sx:Un,children:e.jsxs(v,{children:[e.jsxs(v,{className:"nav-menu__header",children:[e.jsx(z,{as:"h4",size:"md",children:n("Rail Map Toolkit")}),e.jsx(Qe,{environment:u.getEnv(),version:u.getAppVersion()})]}),u.getEnv()!=="PRD"&&e.jsxs(R,{status:"warning",children:[e.jsx(O,{}),e.jsxs(te,{children:[n("You're currently viewing a testing environment.")," ",e.jsx(L,{href:o,isExternal:!0,children:n("Back to production environment")})]})]}),e.jsx(R,{status:"error",children:e.jsxs(te,{children:["ðŸŽ‡"," ",e.jsx(L,{href:"https://en.wikipedia.org/wiki/Chinese_New_Year",isExternal:!0,children:n("Happy Chinese New Year!")})]})}),e.jsxs(v,{className:"nav-menu__body",children:[e.jsx(zn,{}),e.jsx(Fn,{}),e.jsx(wn,{})]}),e.jsx(Wn,{})]})})}function Yn(n){const{isOpen:t,onClose:o}=n,{t:s}=x(),a=p.useRef(null),r=()=>{u.allowAnalytics(!0),o()},l=()=>{u.allowAnalytics(!1).refreshRequired?window.location.reload():o()};return e.jsxs(M,{initialFocusRef:a,isOpen:t,onClose:()=>{},children:[e.jsx(E,{}),e.jsxs(C,{children:[e.jsx(y,{children:s("CookiesModal.header")}),e.jsxs(H,{children:[e.jsx(j,{children:s("CookiesModal.text1")}),e.jsx(j,{mt:2,children:s("CookiesModal.text2")}),e.jsx(_e,{children:e.jsxs(De,{children:[" ",s("CookiesModal.item1")]})}),e.jsx(j,{mt:2,children:s("CookiesModal.text3")})]}),e.jsx(I,{children:e.jsxs(he,{children:[e.jsx(f,{variant:"ghost",onClick:l,children:s("CookiesModal.reject")}),e.jsx(f,{ref:a,colorScheme:"primary",onClick:r,children:s("CookiesModal.accept")})]})})]})]})}const Qn=()=>{};function Zn(){const{t:n}=x(),[t,o]=p.useState(!1),s=()=>{o(!0),Ze(),setTimeout(()=>{window.location.reload()},1e3)};return e.jsx(M,{isOpen:!0,onClose:Qn,children:e.jsxs(C,{children:[e.jsx(y,{children:n("Rail Map Toolkit is opened in another window")}),e.jsx(H,{children:n("You cannot open multiple Rail Map Toolkit at the same time. Please close this window.")}),e.jsx(I,{children:e.jsx(f,{colorScheme:"primary",onClick:s,isLoading:t,children:n("Restart RMT in this window")})})]})})}const Jn=()=>{};function Kn(){const{t:n}=x();return e.jsx(M,{isOpen:!0,onClose:Jn,children:e.jsxs(C,{children:[e.jsx(y,{children:n("Rail Map Toolkit is opened in another window")}),e.jsx(H,{children:n("Current session has been terminated. Please close this window.")})]})})}function tt(){const{t:n}=x(),t=ge(),{isPrimary:o,isTerminated:s,isShowMenu:a}=Y(i=>i.app),[r,l]=p.useState(!1);p.useEffect(()=>{u.isAnalyticsQADone()||l(!0)},[]);const c=()=>{u.toggleNavMenu(!a),t(V()),u.event(k.TOGGLE_NAV_MENU,{})};return s?e.jsx(G,{children:e.jsx(Kn,{})}):o===!1?e.jsx(G,{children:e.jsx(Zn,{})}):e.jsx(Le,{basename:"/",children:e.jsxs(G,{className:a?"show-menu":"",children:[e.jsx(_,{variant:a?"ghost":"solid",colorScheme:a?void 0:"primary",size:"md","aria-label":n("Toggle menu"),title:n("Toggle menu"),icon:e.jsx(un,{}),position:"absolute",zIndex:110,borderRadius:0,onClick:c}),e.jsxs(Je,{sx:{flexDirection:"row"},children:[e.jsx(qn,{}),e.jsx(on,{})]}),e.jsx(Yn,{isOpen:r,onClose:()=>l(!1)})]})})}export{tt as default};
