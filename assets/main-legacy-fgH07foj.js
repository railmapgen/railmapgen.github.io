System.register(["./rmg-theme-provider-legacy-C1VWpPjr.js","./chakra-legacy-DjoX1N2k.js","./react-legacy-CdOfui92.js"],(function(e,t){"use strict";var a,o,s,i,n,r,l,p,c,d,u,m,h,g,b,w,T,v;return{setters:[e=>{a=e.r,o=e.l,s=e.c,i=e.R,n=e.a,r=e.b},e=>{l=e.j},e=>{p=e.i,c=e.d,d=e.e,u=e.f,m=e.h,h=e.u,g=e.j,b=e.k,w=e.r,T=e.P,v=e.I}],execute:function(){document.querySelector('link[rel="canonical"]').setAttribute("href",window.location.origin);var f={en:{},"zh-Hans":{Action:"操作",Apps:"应用程序","Back to list":"返回列表","Background colour":"背景色",Black:"黑",Cancel:"取消",City:"城市",Components:"组件","Configuration file":"配置文件",Confirm:"确定",Continue:"继续","Country/Region":"国家/地区",Copy:"复制",Edit:"编辑","Foreground colour":"前景色","Go back":"返回",Language:"语言/Language",Justification:"理由",Name:"名称",Next:"下一步",Open:"打开",Palette:"调色板","Please select...":"请选择...",Previous:"上一步","Rail Map Generator":"铁路线路图生成器","Rail Map Painter":"地铁线路图绘制器","Rail Map Toolkit":"线路图工具包",Remove:"删除",Reset:"重置","RMG Templates":"RMG 模板","RMP Gallery":"RMP 画廊","Seed Project":"种子项目",Settings:"设置",Submit:"提交",Translate:"翻译",Upload:"上传",White:"白"},"zh-Hant":{Action:"動作",Apps:"應用程式","Back to list":"返回列表","Background colour":"背景色",Black:"黑",Cancel:"取消",City:"城市",Components:"元件","Configuration file":"設定檔",Confirm:"確定",Continue:"繼續",Copy:"複製","Country/Region":"國家/地區",Edit:"編輯","Foreground colour":"前景色","Go back":"返回",Language:"語言/Language",Justification:"理由",Name:"名稱",Next:"下一步",Open:"開啟",Palette:"調色盤","Please select...":"請選擇...",Previous:"上一步","Rail Map Generator":"鐵路路綫圖產生器","Rail Map Painter":"地鐵路綫圖繪製器","Rail Map Toolkit":"路綫圖工具組",Remove:"移除",Reset:"重設","RMG Templates":"RMG 範本","RMP Gallery":"RMP 畫廊","Seed Project":"種子項目",Settings:"設定",Submit:"提交",Translate:"翻譯",Upload:"上載",White:"白"},ja:{Language:"言語/Language",Palette:"パレット","Rail Map Generator":"鉄道路線図ジェネレータ","Rail Map Toolkit":"路線図ツールキット",Remove:"削除","RMG Templates":"RMG テンプレート"},ko:{Action:"조작",Apps:"앱","Back to list":"다시 목록으로","Background colour":"배경색",Black:"블랙",Cancel:"취소",City:"도시",Components:"요소","Configuration file":"환경 설정 파일",Confirm:"확인",Copy:"복사","Country/Region":"국가/지역",Edit:"편집","Foreground colour":"전경색","Go back":"되돌아가",Language:"언어/Language",Justification:"이유",Name:"명칭",Next:"다음",Open:"열기",Palette:"팔레트","Please select...":"선택해주세요",Previous:"나아가","Rail Map Generator":"철도 노선도 생성기","Rail Map Painter":"지하철 노선도 그리기","Rail Map Toolkit":"노선도 툴킷",Remove:"삭제",Reset:"리셋","RMG Templates":"RMG 템플릿","RMP Gallery":"RMP 갤러리","Seed Project":"종자 프로젝트",Settings:"설치",Submit:"제출",Translate:"번역",Upload:"업로드",White:"화이트"}};const y={CookiesModal:{header:"Cookies on this website",text1:"At RMG we use cookies to help ensure that our website and services are able to function properly. These cookies are necessary and so are set automatically.",text2:"We would also like to use some cookies to:",item1:"improve our website based on how you use it",text3:"These cookies are optional. If you'd like to accept all optional cookies, select 'Accept all cookies'. If you'd like to reject them, select 'Reject'.",accept:"Accept all cookies",reject:"Reject"},FontsSection:{text1:"The fonts below used in your projects were loaded from our server instead of your device.",text2:"This may cause unnecessary network traffic and slowness especially if your connection is unstable.",text3:"You can download and install these open source and free fonts to get a better experience.",safari:"This is not applicable to Safari users. ☹️"}},k={CookiesModal:{header:"本网站的 Cookies",text1:"在 RMG，我们使用 Cookies 来确保本网站及服务可以正常运作。这些 Cookies 是必需的，因此已默认启动。",text2:"我们也会以 Cookies 的方式：",item1:"分析您的使用模式，用来改进本网站",text3:"这些 Cookies 是可选的。如果您想允许所有可选 Cookies，请选择“接受所有 Cookies”。如果您想禁用 Cookies，请选择“拒绝”。",accept:"接受所有 Cookies",reject:"拒绝"},FontsSection:{text1:"您的项目使用的下列字体，是从我们的服务器而不是您的设备加载。",text2:"这可能导致非必要的网络流量，如您的连接不稳定，还会造成加载缓慢。",text3:"您可以下载和安装这些开源免费字体，以提升使用体验。",safari:"不适用于 Safari ☹️"},About:"关于","Allow cookies to help improve our website":"允许用 Cookies 帮助改进本网站",Appearance:"外观","Back to production environment":"返回生产环境","Close all tabs":"关闭所有标签页","Close app":"关闭应用程序","Close current tab":"关闭当前标签页","Close tab":"关闭标签页","Contribution Wiki":"贡献者指南",Contributors:"贡献者","Current session has been terminated. Please close this window.":"当前会话已被终止，请关闭此窗口。",Dark:"深色","Developer team":"开发者团队",Devtools:"开发者工具",Donators:"捐赠者","Don't show again":"不再显示","Download desktop app":"下载桌面应用程序","Fonts are slow to load? Learn how to speed it up!":"字体加载太慢？看看如何提速！","GitHub Pages mirror":"GitHub Pages 镜像","GitLab Pages mirror":"GitLab Pages 镜像","Gitee Pages mirror":"Gitee (码云) Pages 镜像","Happy Chinese New Year!":"新年快乐！","Help & support":"帮助与支持","Join us on Slack":"加入我们的 Slack 群组",Light:"浅色","Main languages":"主要语言",More:"更多","More mirrors":"更多镜像","New tab":"新标签页","Notes: Contributors are sorted by number of commits and commit time.":"注：贡献者名单按提交次数和时间排序。",OK:"好","Other languages":"其他语言","Pro tip":"提示","Rail Map Toolkit is opened in another window":"线路图工具包已在另一窗口中打开","Raise an Issue on GitHub":"在 GitHub 提交一个 Issue","Refreshing is required for changes to take effect.":"刷新页面后变更才会生效","Resource administrators":"资源管理员","Resource contributors":"资源贡献者","Restart RMT in this window":"在此窗口重新启动工具包",Running:"正在运行",Save:"保存","Select an app to start your own rail map design!":"选择一个应用程序来开始你的线路图设计！","Show dev tools for 1 day":"显示开发者工具 1 天",Switch:"切换","Switch to":"切换至",System:"跟随系统",Tab:"标签页","Terms and conditions":"条款与细则",Tutorial:"使用教程","Unable to load contributors":"无法加载贡献者名单","Useful links":"实用链接","Visit GitHub":"访问 GitHub","Web fonts":"网络字体","Welcome to Rail Map Toolkit":"欢迎使用线路图工具包","You cannot open multiple Rail Map Toolkit at the same time. Please close this window.":"您不能同时打开多个线路图工具包，请关闭当前窗口。","You're currently viewing a testing environment.":"您正在浏览测试环境。"},S={CookiesModal:{header:"本網站的 Cookies",text1:"在 RMG，我們使用 Cookies 以確保本網站及服務可以正常運作。這些 Cookies 是必需的，因此已預設啟用。",text2:"我們亦會以 Cookies 的方式：",item1:"分析閣下的使用模式，用來改進本網站",text3:"這些 Cookies 是可選的。如果閣下想容許所有可選 Cookies，請選擇「接受所有 Cookies」。如果閣下想禁用 Cookies，請選擇「拒絕」。",accept:"接受所有 Cookies",reject:"拒絕"},FontsSection:{text1:"你的專案使用的下列字型，是從我們的伺服器而非你的裝置載入。",text2:"這可能導致非必要的網絡流量，如你的連線不穩，還會造成載入緩慢。",text3:"你可以下載及安裝這些開源免費字型，以提升使用體驗。",safari:"不適用於 Safari ☹️"},About:"關於","Allow cookies to help improve our website":"容許以 Cookies 幫助改進本網站",Appearance:"外觀","Back to production environment":"返回生產環境","Close all tabs":"關閉所有分頁","Close app":"關閉應用程式","Close current tab":"關閉當前分頁","Close tab":"關閉分頁","Contribution Wiki":"貢獻者指南",Contributors:"貢獻者","Current session has been terminated. Please close this window.":"當前工作階段已被終止，請關閉該視窗。",Dark:"深色","Developer team":"開發人員團隊",Devtools:"開發人員工具",Donators:"捐贈者","Don't show again":"不再顯示","Download desktop app":"下載桌面應用程式","Fonts are slow to load? Learn how to speed it up!":"字型載入太慢？看看如何提速！","GitHub Pages mirror":"GitHub Pages 鏡像","GitLab Pages mirror":"GitLab Pages 鏡像","Gitee Pages mirror":"Gitee (碼雲) Pages 鏡像","Happy Chinese New Year!":"新年快樂！","Help & support":"幫助及支援","Join us on Slack":"加入我們的 Slack 羣組",Light:"淺色","Main languages":"主要語言",More:"更多","More mirrors":"更多鏡像","New tab":"新分頁","Notes: Contributors are sorted by number of commits and commit time.":"註：貢獻者列表按提交次數及時間排序。",OK:"好","Other languages":"其他語言","Pro tip":"小貼士","Rail Map Toolkit is opened in another window":"路綫圖工具組已於另一視窗中開啟","Raise an Issue on GitHub":"於 GitHub 提交一個 Issue","Refreshing is required for changes to take effect.":"重新整理頁面後變更才會生效","Resource administrators":"資源管理員","Resource contributors":"資源貢獻者","Restart RMT in this window":"於該視窗重新啟動工具組",Running:"運行中",Save:"儲存","Select an app to start your own rail map design!":"選擇一個應用程式以開始你的路綫圖設計！","Show dev tools for 1 day":"顯示開發人員工具 1 日",Switch:"切換","Switch to":"切換至",System:"跟隨系統",Tab:"分頁","Terms and conditions":"條款及細則",Tutorial:"使用指南","Unable to load contributors":"無法載入貢獻者列表","Useful links":"實用連結","Visit GitHub":"造訪 GitHub","Web fonts":"網絡字型","Welcome to Rail Map Toolkit":"歡迎使用路綫圖工具組","You cannot open multiple Rail Map Toolkit at the same time. Please close this window.":"你不能同時開啟多個路綫圖工具組，請關閉當前視窗。","You're currently viewing a testing environment.":"你正在檢視測試環境。"},R={Contributors:"貢献者","Happy Chinese New Year!":"旧正月おめでとう！","Main languages":"主要言語",Tab:"タブ","Welcome to Rail Map Toolkit":"路線図ツールキットへようこそ"},C={CookiesModal:{header:"이 웹 사이트의 쿠키",text1:"RMG에서는 쿠키를 사용하여 웹 사이트 및 서비스가 제대로 작동하는지 확인합니다.이러한 쿠키는 필수이므로 기본적으로 시작됩니다.",text2:"저희도 쿠키 방식으로：",item1:"당신의 사용 패턴을 분석하여, 본 사이트를 개선합니다",text3:"이 쿠키들은 선택 사항입니다.모든 선택 가능한 쿠키를 허용하려면 '모든 쿠키 허용'을 선택하십시오.쿠키를 사용하지 않으려면 '거부'를 선택하십시오.",accept:"모든 쿠키 허용",reject:"거부"},About:"관한","Allow cookies to help improve our website":"쿠키를 사용하여 이 웹 사이트를 개선할 수 있도록 허용",Appearance:"화면 스타일","Contribution Wiki":"기여자 안내",Contributors:"기여자","Core contributors":"핵심 기여자",Dark:"다크 모드","Happy Chinese New Year!":"새해 복 많이 받으세요!",Light:"라이트 모드","Refreshing is required for changes to take effect.":"페이지를 새로 고친 후에만 변경 가능","Resource administrators":"자원 관리자","Resource contributors":"자원 기여자",Save:"저장","Select an app to start your own rail map design!":"응용 프로그램을 선택하여 노선도 설계를 시작하십시오.","Switch to":"곳으로 전환",System:"시스템 모드","Terms and conditions":"조항과 세칙","Visit GitHub":"GitHub 방문하기","Welcome to Rail Map Toolkit":"노선도 툴킷에 오신 것을 환영합니다"},G=(new a.I18nBuilder).use(p).withAppName("Rail Map Toolkit").withLng(a.getLanguage()).withDefaultResource(f).withResource("en",y).withResource("zh-Hans",k).withResource("zh-Hant",S).withResource("ja",R).withResource("ko",C).build(),A=e=>e?["app","devtool"]:["app"],M=e("b",{rmg:{name:"Rail Map Generator",url:"/rmg/",assetType:"app",allowMultiInstances:!0},rmp:{name:"Rail Map Painter",url:"/rmp/",assetType:"app"},"rmg-palette":{name:"Palette",url:"/rmg-palette/",assetType:"app",showContributors:!0,legacyContributors:"legacy-contributor-list.txt"},"rmg-palette-upload":{name:"Palette - Upload",url:"/rmg-palette/#/new",assetType:"app"},"rmg-templates":{name:"RMG Templates",url:"/rmg-templates/",assetType:"app",showContributors:!0,legacyContributors:"legacy-contributor-list.txt",allowedInstances:["GitHub","GitLab","Tauri","localhost","unknown"]},"rmg-templates-upload":{name:"RMG Templates - Upload",url:"/rmg-templates/#/new",assetType:"app",allowedInstances:["GitHub","GitLab","Tauri","localhost","unknown"]},"rmp-gallery":{name:"RMP Gallery",url:"/rmp-gallery/",assetType:"app",showContributors:!0,showDonators:!0,allowedInstances:["GitHub","GitLab","Tauri","localhost","unknown"]},"rmg-components":{name:"Components",url:"/rmg-components/",assetType:"devtool",allowedInstances:["GitHub","GitLab","localhost","unknown"]},"svg-assets":{name:"SVG Assets",url:"/svg-assets/",assetType:"devtool",allowedInstances:["GitHub","GitLab","localhost","unknown"]},"rmg-translate":{name:"Translate",url:"/rmg-translate/",assetType:"devtool",allowedInstances:["GitHub","GitLab","localhost","unknown"]},"seed-project":{name:"Seed Project",url:"/seed-project/",assetType:"devtool",allowedInstances:["GitHub","GitLab","localhost","unknown"]},"rmg-runtime":{name:"Runtime Documentation",url:"/rmg-runtime/",assetType:"devtool",allowedInstances:["GitHub","GitLab","localhost","unknown"]},"runtime-demo":{name:"Runtime Demo",url:"/runtime-demo/",assetType:"devtool",allowedInstances:["GitHub","GitLab","localhost","unknown"],allowMultiInstances:!0},tutorial:{name:"Tutorial",url:"https://rmttutorial.wordpress.com",assetType:"link"},"github-pages":{name:"GitHub Pages mirror",url:"https://railmapgen.github.io",assetType:"link",allowedInstances:["GitLab","Gitee","localhost","unknown"]},"gitlab-pages":{name:"GitLab Pages mirror",url:"https://railmapgen.gitlab.io",assetType:"link",allowedInstances:["GitHub","Gitee","localhost","unknown"]},"gitee-pages":{name:"Gitee Pages mirror",url:"https://railmapgen.gitee.io",assetType:"link",allowedInstances:["GitHub","GitLab","localhost","unknown"]},tauri:{name:"Download desktop app",url:(()=>{const e=new Date,t=`${e.getFullYear()}${String(e.getMonth()+1).padStart(2,"0")}01`,a=`${String(e.getFullYear()).slice(-2)}.${e.getMonth()+1}.1`,o=navigator.platform;return`https://mirror.ghproxy.com/https://github.com/railmapgen/railmapgen.github.io/releases/download/tauri-${t}/railmapgen_${a}_${o.includes("Linux")?"amd64.deb":o.includes("Mac")?"x64.dmg":"x64-setup.exe"}`})(),assetType:"link",allowedInstances:["GitHub","GitLab","Gitee","localhost","unknown"]},busLineDesigner:{name:"Bus Line Designer",url:"https://buslinedesigner.bobliu.tech",assetType:"link",allowedInstances:["GitHub","GitLab","Gitee","Tauri","localhost","unknown"]}}),P=e("g",((e,t,a)=>Object.entries(M).filter((([,o])=>{const s=o.assetType===e,i=!o.allowedEnvs||o.allowedEnvs.includes(t),n=!o.allowedInstances||o.allowedInstances.includes(a);return s&&i&&n})).map((([e])=>e)))),L=e=>new Promise((t=>{setTimeout(t,e,`Timeout after ${e/1e3} seconds`)})),O=(e,t,a)=>{const o=new URL(e,window.location.href);return o.search=null!=t?t:o.search,o.hash=null!=a?a:o.hash,o.pathname+o.search+o.hash},I=(e("N","never"),c({name:"app",initialState:{isShowMenu:!0,menuView:"main",refreshRequired:!1,lastShowDevtools:0,openedTabs:[],activeTab:void 0,remoteFonts:{},showFontAdvice:"hide"},reducers:{setIsPrimary:(e,t)=>{e.isPrimary=t.payload},terminateSession:e=>{e.isTerminated=!0},toggleMenu:e=>{e.isShowMenu=!e.isShowMenu},setMenuView:(e,t)=>{e.menuView=t.payload},requireRefresh:e=>{e.refreshRequired=!0},showDevtools:(e,t)=>{const a=Date.now();t.payload?t.payload<a&&(e.lastShowDevtools=t.payload):e.lastShowDevtools=a},hideDevtools:e=>{e.lastShowDevtools=0},setOpenedTabs:(e,t)=>{e.openedTabs=t.payload},updateTabUrl:(e,t)=>{const{id:a,url:o}=t.payload;e.openedTabs=e.openedTabs.map((e=>e.id===a?{...e,url:o}:e))},setActiveTab:(e,t)=>{e.activeTab=t.payload},openApp:(e,t)=>{var a;const{appId:o,search:s,hash:i}=t.payload,n=e.openedTabs.find((({id:t})=>t===e.activeTab)),r=e.openedTabs.find((({app:e})=>e===o)),l=null!==(a=M[o].allowMultiInstances)&&void 0!==a&&a;if(void 0!==s||void 0!==i)if(l||!r){const t=crypto.randomUUID();e.openedTabs.push({id:t,app:o,url:O(M[o].url,s,i)}),e.activeTab=t}else e.openedTabs=e.openedTabs.map((e=>{var t;return e.id===r.id?{...e,url:O(null!==(t=e.url)&&void 0!==t?t:M[e.app].url,s,i)}:e})),e.activeTab=r.id;else if(r)(null==n?void 0:n.app)!==o&&(e.activeTab=r.id);else{const t=crypto.randomUUID();e.openedTabs.push({id:t,app:o,url:O(M[o].url)}),e.activeTab=t}},openAppInNew:(e,t)=>{const a=crypto.randomUUID();e.openedTabs.push({id:a,app:t.payload}),e.activeTab=a},closeTab:(e,t)=>{const a=t.payload,o=e.openedTabs.slice().sort(((e,t)=>{const a=Object.keys(M);return a.indexOf(e.app)-a.indexOf(t.app)}));if(e.openedTabs=e.openedTabs.filter((e=>e.id!==a)),e.activeTab===a){var s;const t=o.findIndex((e=>e.id===a));e.activeTab=null===(s=o.filter((e=>e.id!==a))[Math.max(0,t-1)])||void 0===s?void 0:s.id}},closeApp:(e,t)=>{var a;const o=t.payload;if(!e.openedTabs.some((e=>e.app===o)))return;const s=Object.keys(M).filter((t=>e.openedTabs.some((e=>e.app===t)))),i=null===(a=e.openedTabs.find((t=>t.id===e.activeTab)))||void 0===a?void 0:a.app,n=e.openedTabs.filter((e=>e.app!==o));if(e.openedTabs=n,i===o){var r;const t=s.findIndex((e=>e===o));e.activeTab=null===(r=n.find((e=>e.app===s[Math.max(0,t-1)])))||void 0===r?void 0:r.id}},updateTabMetadata:(e,t)=>{const{id:a,title:o,search:s,hash:i}=t.payload;e.openedTabs=e.openedTabs.map((e=>{var t;return e.id===a?{...e,title:null!=o?o:e.title,url:O(null!==(t=e.url)&&void 0!==t?t:M[e.app].url,s,i)}:e}))},addRemoteFont:(e,t)=>{const{family:a,config:o}=t.payload;a in e.remoteFonts||(e.remoteFonts[a]=o,"hide"===e.showFontAdvice&&(e.showFontAdvice="show"))},hideFontAdvice:e=>{e.showFontAdvice="hide"},neverShowFontAdvice:e=>{e.showFontAdvice="never"}}})),D=e("i",(e=>e+864e5>=Date.now())),{setIsPrimary:E,terminateSession:N,toggleMenu:x,setMenuView:H,requireRefresh:_,showDevtools:j,hideDevtools:F,setOpenedTabs:U,updateTabUrl:W,setActiveTab:B,openApp:V,openAppInNew:$,closeTab:J,closeApp:Y,updateTabMetadata:q,addRemoteFont:K,hideFontAdvice:z,neverShowFontAdvice:Q}=I.actions;e({t:x,f:H,r:_,j:j,k:F,s:B,c:V,o:$,d:J,e:Y,h:z,n:Q});const X=I.reducer,Z=d({app:X}),ee=u(),te=((e={})=>m({reducer:Z,middleware:e=>e().prepend(ee.middleware),preloadedState:e}))(),ae=(e("a",(()=>h())),e("u",g),ee.startListening);window.rmgStore=te;var oe=e("L",(e=>(e.OPENED_TABS="rmg-home__openedTabs",e.ACTIVE_TAB="rmg-home__activeTab",e.LAST_SHOW_DEVTOOLS="lastShowDevtools",e.SHOW_FONT_ADVICE="showFontAdvice",e))(oe||{})),se=e("E",(e=>(e.APP_LOAD="APP_LOAD",e.OPEN_APP="OPEN_APP",e.CLOSE_APP="CLOSE_APP",e.OPEN_LINK="OPEN_LINK",e.TOGGLE_NAV_MENU="TOGGLE_NAV_MENU",e.CHANGE_LANGUAGE="CHANGE_LANGUAGE",e.SHOW_DEVTOOLS="SHOW_DEVTOOLS",e.RAISE_ISSUE="RAISE_ISSUE",e.JOIN_SLACK="JOIN_SLACK",e.DOWNLOAD_FONT="DOWNLOAD_FONT",e))(se||{}));const ie=e("F","rmg-home:frame-"),ne="app",re="searchParams",le="hashParams",pe="ping",ce="pong",de="restart",ue=new BroadcastChannel("rmt-instance-checker"),me=e=>{e.data===pe&&(o.info("Received ping from another RMT instance."),ue.postMessage(ce))};function he(e){(e=>{const t=Number(a.storage.get(oe.LAST_SHOW_DEVTOOLS));t&&e.dispatch(j(t))})(e),(e=>{try{const t=window.localStorage.getItem(oe.OPENED_TABS);if(t){const a=JSON.parse(t);if(Array.isArray(a)){const t=A(D(e.getState().app.lastShowDevtools)),o=a.filter((e=>t.includes(M[e.app].assetType)));e.dispatch(U(o))}else o.warn("initOpenedTabs(), Cannot parse invalid opened tabs state from local storage")}}catch(t){o.warn("initOpenedTabs(), cannot parse opened apps state from local storage",t)}})(e),(e=>{const t=window.localStorage.getItem(oe.ACTIVE_TAB),a=e.getState().app.openedTabs;var o;t&&a.some((({id:e})=>e===t))?e.dispatch(B(t)):e.dispatch(B(null===(o=a[0])||void 0===o?void 0:o.id))})(e),((()=>{const e=navigator.userAgent;return e.includes("Safari")&&!e.includes("Chrome")})()||"never"===a.storage.get(oe.SHOW_FONT_ADVICE))&&e.dispatch(Q()),ae({predicate:(e,t,a)=>t.app.lastShowDevtools!==a.app.lastShowDevtools,effect:(e,t)=>{a.storage.set(oe.LAST_SHOW_DEVTOOLS,t.getState().app.lastShowDevtools.toString())}}),ae({predicate:(e,t,a)=>JSON.stringify(t.app.openedTabs)!==JSON.stringify(a.app.openedTabs),effect:(e,t)=>{window.localStorage.setItem(oe.OPENED_TABS,JSON.stringify(t.getState().app.openedTabs))}}),ae({predicate:(e,t,a)=>t.app.activeTab!==a.app.activeTab,effect:(e,t)=>{const a=t.getState().app.activeTab;void 0!==a&&window.localStorage.setItem(oe.ACTIVE_TAB,a)}}),(e=>{var t,s,i;const n=new URLSearchParams(window.location.search),r=null!==(t=n.get(ne))&&void 0!==t?t:"",l=null!==(s=n.get(re))&&void 0!==s?s:void 0,p=null!==(i=n.get(le))&&void 0!==i?i:void 0;o.info(`openSearchedApp(), searchParams app=${r}, extraSearchParams are [${l}], extraHashParams are [${p}]`),A(D(e.getState().app.lastShowDevtools)).map((e=>P(e,a.getEnv(),a.getInstance()))).flat().includes(r)?e.dispatch(V({appId:r,search:l,hash:p})):o.warn(`openSearchedApp(), app ${r} not found`)})(e),(async()=>{let e=!0;ue.addEventListener("message",(t=>{t.data===ce&&(o.warn("Received pong from another RMT instance. This instance is not primary."),e=!1,ue.removeEventListener("message",me))})),ue.postMessage(pe);let t=5;for(;t--;)if(await L(500),!e)return!1;return o.info("This instance is primary."),!0})().then((t=>{e.dispatch(E(t)),t||e.dispatch(b())}))}let ge;ue.addEventListener("message",me),ue.addEventListener("message",(e=>{e.data===de&&(o.info("Received restart from another RMT instance. Closing current session..."),ue.close(),te.dispatch(N()),te.dispatch(b()))})),e("l",(()=>{ue.postMessage(de)}));const be=w.lazy((()=>{return e=()=>t.import("./app-root-legacy-Cwq9Dw0I.js"),Promise.resolve().then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}));var e}));a.ready().then((()=>{he(te),ge=s(document.getElementById("root")),ge.render(l.jsx(w.StrictMode,{children:l.jsx(T,{store:te,children:l.jsx(v,{i18n:G,children:l.jsx(i,{children:l.jsx(n,{suspenseFallback:l.jsx(r,{isIndeterminate:!0}),allowReset:!0,children:l.jsx(be,{})})})})})})),a.onAppOpen((e=>{A(D(te.getState().app.lastShowDevtools)).map((e=>P(e,a.getEnv(),a.getInstance()))).flat().includes(e.appId)&&te.dispatch(V(e))})),a.onAppClose((e=>{te.dispatch(Y(e))})),a.onAppMetadataUpdate(((e,t)=>{if(t){const a=t.slice(ie.length);o.info(`Received metadata update for frame=${a}, metadata is`,e),te.dispatch(q({...e,id:a}))}})),a.onUrlUpdate(((e,t)=>{if(t){const a=t.slice(ie.length);o.info(`Received URL update for frame=${a}, url=${e}`),te.dispatch(W({id:a,url:e}))}})),a.onRemoteFontLoaded((({family:e,definition:{displayName:t,url:a}})=>{te.dispatch(K({family:e,config:{displayName:t,url:a}}))})),a.event(se.APP_LOAD,{openedApps:te.getState().app.openedTabs.map((e=>e.app))})}))}}}));
