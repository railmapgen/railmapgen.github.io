System.register(["./index-legacy-CIjuO3H9.js","./chakra-legacy-cMMHz91Y.js","./react-legacy-DU2QtADs.js"],(function(e,t){"use strict";var a,o,s,i,n,r,l,c,p,d,u,m,h,g,w,f,b,v,T;return{setters:[e=>{a=e.r,o=e.l,s=e.c,i=e.R,n=e.a,r=e.b},e=>{l=e.j},e=>{c=e.i,p=e.d,d=e.e,u=e.f,m=e.h,h=e.j,g=e.u,w=e.k,f=e.l,b=e.r,v=e.P,T=e.I}],execute:function(){var y={en:{},"zh-Hans":{Action:"操作",Apps:"应用程序","Back to list":"返回列表","Background colour":"背景色",Black:"黑",Cancel:"取消",City:"城市",Components:"组件","Configuration file":"配置文件",Confirm:"确定",Continue:"继续","Country/Region":"国家/地区",Copy:"复制",Edit:"编辑","Foreground colour":"前景色","Go back":"返回",Language:"语言/Language",Justification:"理由",Name:"名称",Next:"下一步",Open:"打开",Palette:"调色板","Please select...":"请选择...",Previous:"上一步","Rail Map Generator":"铁路线路图生成器","Rail Map Painter":"地铁线路图绘制器","Rail Map Toolkit":"线路图工具包",Remove:"删除",Reset:"重置","RMG Templates":"RMG 模板","RMP Gallery":"RMP 画廊","RMP Designer":"RMP 设计师","Seed Project":"种子项目",Settings:"设置",Submit:"提交",Translate:"翻译",Upload:"上传",White:"白"},"zh-Hant":{Action:"動作",Apps:"應用程式","Back to list":"返回列表","Background colour":"背景色",Black:"黑",Cancel:"取消",City:"城市",Components:"元件","Configuration file":"設定檔",Confirm:"確定",Continue:"繼續",Copy:"複製","Country/Region":"國家/地區",Edit:"編輯","Foreground colour":"前景色","Go back":"返回",Language:"語言/Language",Justification:"理由",Name:"名稱",Next:"下一步",Open:"開啟",Palette:"調色盤","Please select...":"請選擇...",Previous:"上一步","Rail Map Generator":"鐵路路綫圖產生器","Rail Map Painter":"地鐵路綫圖繪製器","Rail Map Toolkit":"路綫圖工具組",Remove:"移除",Reset:"重設","RMG Templates":"RMG 範本","RMP Gallery":"RMP 畫廊","RMP Designer":"RMP 設計師","Seed Project":"種子項目",Settings:"設定",Submit:"提交",Translate:"翻譯",Upload:"上載",White:"白"},ja:{Language:"言語/Language",Palette:"調色板","Rail Map Generator":"鉄道路線図ジェネレータ","Rail Map Painter":"鉄道路線図画家","Rail Map Toolkit":"路線図ツールキット",Remove:"削除","RMG Templates":"RMG テンプレート","RMP Gallery":"RMP 画廊","RMP Designer":"RMP 図案家"},ko:{Action:"조작",Apps:"앱","Back to list":"다시 목록으로","Background colour":"배경색",Black:"블랙",Cancel:"취소",City:"도시",Components:"요소","Configuration file":"환경 설정 파일",Confirm:"확인",Copy:"복사","Country/Region":"국가/지역",Edit:"편집","Foreground colour":"전경색","Go back":"되돌아가",Language:"언어/Language",Justification:"이유",Name:"명칭",Next:"다음",Open:"열기",Palette:"팔레트","Please select...":"선택해주세요",Previous:"나아가","Rail Map Generator":"철도 노선도 생성기","Rail Map Painter":"지하철 노선도 그리기","Rail Map Toolkit":"노선도 툴킷",Remove:"삭제",Reset:"리셋","RMG Templates":"RMG 템플릿","RMP Gallery":"RMP 갤러리","RMP Designer":"RMP 디자이너","Seed Project":"종자 프로젝트",Settings:"설치",Submit:"제출",Translate:"번역",Upload:"업로드",White:"화이트"}};const S={CookiesModal:{header:"Cookies on this website",text1:"At RMG we use cookies to help ensure that our website and services are able to function properly. These cookies are necessary and so are set automatically.",text2:"We would also like to use some cookies to:",item1:"improve our website based on how you use it",text3:"These cookies are optional. If you'd like to accept all optional cookies, select 'Accept all cookies'. If you'd like to reject them, select 'Reject'.",accept:"Accept all cookies",reject:"Reject"},FontsSection:{text1:"The fonts below used in your projects were loaded from our server instead of your device.",text2:"This may cause unnecessary network traffic and slowness especially if your connection is unstable.",text3:"You can download and install these open source and free fonts to get a better experience.",safari:"This is not applicable to Safari users. ☹️"}},k={CookiesModal:{header:"本网站的 Cookies",text1:"在 RMG，我们使用 Cookies 来确保本网站及服务可以正常运作。这些 Cookies 是必需的，因此已默认启动。",text2:"我们也会以 Cookies 的方式：",item1:"分析您的使用模式，用来改进本网站",text3:"这些 Cookies 是可选的。如果您想允许所有可选 Cookies，请选择“接受所有 Cookies”。如果您想禁用 Cookies，请选择“拒绝”。",accept:"接受所有 Cookies",reject:"拒绝"},FontsSection:{text1:"您的项目使用的下列字体，是从我们的服务器而不是您的设备加载。",text2:"这可能导致非必要的网络流量，如您的连接不稳定，还会造成加载缓慢。",text3:"您可以下载和安装这些开源免费字体，以提升使用体验。",safari:"不适用于 Safari ☹️"},About:"关于","Allow cookies to help improve our website":"允许用 Cookies 帮助改进本网站",Appearance:"外观","Back to production environment":"返回生产环境","Close all tabs":"关闭所有标签页","Close app":"关闭应用程序","Close current tab":"关闭当前标签页","Close tab":"关闭标签页","Contribution Wiki":"贡献者指南",Contributors:"贡献者","Current session has been terminated. Please close this window.":"当前会话已被终止，请关闭此窗口。",Dark:"深色","Developer team":"开发者团队",Devtools:"开发者工具","Export Local Storage":"导出本地存储",Donators:"捐赠者","Don't show again":"不再显示","Download desktop app":"下载桌面应用程序","Fonts are slow to load? Learn how to speed it up!":"字体加载太慢？看看如何提速！","Official website":"官方网站","GitHub Pages mirror":"GitHub Pages 镜像","GitLab Pages mirror":"GitLab Pages 镜像","Happy Chinese New Year!":"新年快乐！","Help & support":"帮助与支持","Join us on Slack":"加入我们的 Slack 群组",Light:"浅色","Main languages":"主要语言",More:"更多","More mirrors":"更多镜像","New tab":"新标签页","Notes: Contributors are sorted by number of commits and commit time.":"注：贡献者名单按提交次数和时间排序。",OK:"好","Other languages":"其他语言","Pro tip":"提示","Rail Map Toolkit is opened in another window":"线路图工具包已在另一窗口中打开","Raise an Issue on GitHub":"在 GitHub 提交一个 Issue","Refreshing is required for changes to take effect.":"刷新页面后变更才会生效","Resource administrators":"资源管理员","Resource contributors":"资源贡献者","Restart RMT in this window":"在此窗口重新启动工具包",Running:"正在运行",Save:"保存","Select an app to start your own rail map design!":"选择一个应用程序来开始你的线路图设计！","Show dev tools for 1 day":"显示开发者工具 1 天",Switch:"切换","Switch to":"切换至",System:"跟随系统",Tab:"标签页","Terms and conditions":"条款与细则",Tutorial:"使用教程","Official Website":"官方网站","Mini Metro Web":"迷你地铁绘制工具","Unable to load contributors":"无法加载贡献者名单","Useful links":"实用链接","Visit GitHub":"访问 GitHub","Web fonts":"网络字体","Welcome to Rail Map Toolkit":"欢迎使用线路图工具包","You cannot open multiple Rail Map Toolkit at the same time. Please close this window.":"您不能同时打开多个线路图工具包，请关闭当前窗口。","You're currently viewing a testing environment.":"您正在浏览测试环境。","Login status expired":"登录过期","Log in / Sign up":"登录 / 注册","Log out":"登出","Change name":"更名","Change password":"更改密码","Update account info":"修改账户信息",Change:"变更",Account:"账号",Welcome:"欢迎 ","Forgot password":"忘记密码","Check your email again!":"检查您的邮箱地址！","Email with reset link is sent to: ":"重置密码的邮件已发送至：",Email:"邮件地址","Send reset link":"发送重置邮件","Reset link sent":"重置邮件已发送","Reset password token":"重置密码的验证码",Password:"密码","Reset password":"重置密码","Back to log in":"返回登录","Log in":"登录","Create an account":"创建新账号","Sign up":"注册","The email is not valid!":"邮箱地址不合法","Verification email is sent to: ":"验证邮件已发送至：",Name:"名称","You may always change it later.":"之后可随时修改","Send verification code":"发送验证码","Verification code sent":"验证码已发送","Verification code":"验证码","Mininum 8 characters. Contain at least 1 letter and 1 number.":"8个字符以上，包含至少1个字母和1个数字。","Failed to get the RMP save!":"无法获取RMP存档","Can not sync this save!":"无法同步此存档","Synced saves":"同步的存档","Maximum save count:":"最大存档数：",Create:"创建","Current save":"当前存档","Cloud save":"云存档","Last update at:":"上次更新于：","Delete this save":"删除此存档","Sync now":"同步","Sync this slot":"同步此存档","All subscriptions":"所有订阅",Redeem:"兑换","With this subscription, the following features are unlocked:":"订阅后以下功能将会解锁","PRO features":"专业功能","Sync 9 more saves":"同步额外9个存档","Unlimited master nodes":"大师节点无数量限制","Unlimited parallel lines":"平行线段无数量限制","Expires at:":"过期于：","Not applicable":"不适用",Renew:"续期","Redeem your subscription":"兑换您的订阅","CDKey could be purchased in the following sites:":"兑换码可在以下网站获取：","Enter your CDKey here:":"输入您的兑换码："},R={CookiesModal:{header:"本網站的 Cookies",text1:"在 RMG，我們使用 Cookies 以確保本網站及服務可以正常運作。這些 Cookies 是必需的，因此已預設啟用。",text2:"我們亦會以 Cookies 的方式：",item1:"分析閣下的使用模式，用來改進本網站",text3:"這些 Cookies 是可選的。如果閣下想容許所有可選 Cookies，請選擇「接受所有 Cookies」。如果閣下想禁用 Cookies，請選擇「拒絕」。",accept:"接受所有 Cookies",reject:"拒絕"},FontsSection:{text1:"你的專案使用的下列字型，是從我們的伺服器而非你的裝置載入。",text2:"這可能導致非必要的網絡流量，如你的連線不穩，還會造成載入緩慢。",text3:"你可以下載及安裝這些開源免費字型，以提升使用體驗。",safari:"不適用於 Safari ☹️"},About:"關於","Allow cookies to help improve our website":"容許以 Cookies 幫助改進本網站",Appearance:"外觀","Back to production environment":"返回生產環境","Close all tabs":"關閉所有分頁","Close app":"關閉應用程式","Close current tab":"關閉當前分頁","Close tab":"關閉分頁","Contribution Wiki":"貢獻者指南",Contributors:"貢獻者","Current session has been terminated. Please close this window.":"當前工作階段已被終止，請關閉該視窗。",Dark:"深色","Developer team":"開發人員團隊",Devtools:"開發人員工具","Export Local Storage":"導出本地存儲",Donators:"捐贈者","Don't show again":"不再顯示","Download desktop app":"下載桌面應用程式","Fonts are slow to load? Learn how to speed it up!":"字型載入太慢？看看如何提速！","Official website":"官方網站","GitHub Pages mirror":"GitHub Pages 鏡像","GitLab Pages mirror":"GitLab Pages 鏡像","Happy Chinese New Year!":"新年快樂！","Help & support":"幫助及支援","Join us on Slack":"加入我們的 Slack 羣組",Light:"淺色","Main languages":"主要語言",More:"更多","More mirrors":"更多鏡像","New tab":"新分頁","Notes: Contributors are sorted by number of commits and commit time.":"註：貢獻者列表按提交次數及時間排序。",OK:"好","Other languages":"其他語言","Pro tip":"小貼士","Rail Map Toolkit is opened in another window":"路綫圖工具組已於另一視窗中開啟","Raise an Issue on GitHub":"於 GitHub 提交一個 Issue","Refreshing is required for changes to take effect.":"重新整理頁面後變更才會生效","Resource administrators":"資源管理員","Resource contributors":"資源貢獻者","Restart RMT in this window":"於該視窗重新啟動工具組",Running:"運行中",Save:"儲存","Select an app to start your own rail map design!":"選擇一個應用程式以開始你的路綫圖設計！","Show dev tools for 1 day":"顯示開發人員工具 1 日",Switch:"切換","Switch to":"切換至",System:"跟隨系統",Tab:"分頁","Terms and conditions":"條款及細則",Tutorial:"使用指南","Official Website":"官方網站","Mini Metro Web":"迷你捷運繪製工具","Unable to load contributors":"無法載入貢獻者列表","Useful links":"實用連結","Visit GitHub":"造訪 GitHub","Web fonts":"網絡字型","Welcome to Rail Map Toolkit":"歡迎使用路綫圖工具組","You cannot open multiple Rail Map Toolkit at the same time. Please close this window.":"你不能同時開啟多個路綫圖工具組，請關閉當前視窗。","You're currently viewing a testing environment.":"你正在檢視測試環境。","Login status expired":"登入狀態已過期","Log in / Sign up":"登入 / 註冊","Log out":"登出","Change name":"更改名稱","Change password":"更改密碼","Update account info":"更新帳戶資料",Change:"更改",Account:"帳戶",Welcome:"歡迎","Forgot password":"忘記密碼","Check your email again!":"請再次檢查您的電郵地址！","Email with reset link is sent to: ":"重設密碼的連結已傳送至：",Email:"電郵地址","Send reset link":"傳送重設連結","Reset link":"重設連結已傳送","Reset password token":"重設密碼驗證碼",Password:"密碼","Reset password":"重設密碼","Back to log in":"返回登入","Log in":"登入","Create an account":"建立新帳戶","Sign up":"註冊","The email is not valid!":"電郵地址無效！","Verification email is sent to: ":"驗證電郵已傳送至：",Name:"名稱","You may always change it later.":"您可以隨時更改。","Send verification code":"傳送驗證碼","Verification code sent":"驗證碼已傳送","Verification code":"驗證碼","Mininum 8 characters. Contain at least 1 letter and 1 number.":"8个字元以上，包含至少1個字母和1個數字。","Failed to get the RMP save!":"無法獲取RMP存檔","Can not sync this save!":"無法同步此存檔","Synced saves":"已同步的存檔","Maximum save count:":"最大存檔數：",Create:"建立","Current save":"當前存檔","Cloud save":"雲端存檔","Last update at:":"最後更新時間：","Delete this save":"刪除此存檔","Sync now":"立即同步","Sync this slot":"同步此存檔","All subscriptions":"所有訂閱",Redeem:"兌換","With this subscription, the following features are unlocked:":"訂閱後將解鎖以下功能：","PRO features":"專業功能","Sync 9 more saves":"同步額外9個存檔","Unlimited master nodes":"無限大師節點","Unlimited parallel lines":"無限平行線段","Expires at:":"過期於：","Not applicable":"不適用",Renew:"續期","Redeem your subscription":"兌換您的訂閱","CDKey could be purchased in the following sites:":"CDKey可在以下網站購買：","Enter your CDKey here:":"在此輸入您的CDKey："},C={CookiesModal:{header:"本ウェブサイトのクッキー",text1:"RMGでは、ウェブサイトおよびサービスが正常に動作するようにするため、クッキーを使用しています。これらのクッキーは必須であり、デフォルトで有効化されています。",text2:"また、クッキーを使用して以下を行います：",item1:"利用パターンを分析し、ウェブサイトの改善に役立てる",text3:"これらのクッキーは任意です。すべての任意クッキーを許可したい場合は「すべてのクッキーを受け入れる」を選択してください。クッキーを無効にしたい場合は「拒否」を選択してください。",accept:"すべてのクッキーを受け入れる",reject:"拒否"},FontsSection:{text1:"プロジェクトで使用している以下のフォントは、デバイスではなく当社のサーバーから読み込まれています。",text2:"これにより不要なネットワークトラフィックが発生し、接続が不安定な場合、読み込みが遅くなることがあります。",text3:"これらのオープンソースの無料フォントをダウンロードしてインストールすると、使用体験を向上させることができます。",safari:"Safariでは使用できません ☹️"},About:"概要","Allow cookies to help improve our website":"クッキーを許可してウェブサイトの改善に協力する",Appearance:"外観","Back to production environment":"本番環境に戻る","Close all tabs":"すべてのタブを閉じる","Close app":"アプリを閉じる","Close current tab":"現在のタブを閉じる","Close tab":"タブを閉じる","Contribution Wiki":"コントリビューションガイド",Contributors:"貢献者","Current session has been terminated. Please close this window.":"現在のセッションは終了しました。このウィンドウを閉じてください。",Dark:"ダーク","Developer team":"開発チーム",Devtools:"開発者ツール","Export Local Storage":"ローカルストレージのエクスポート",Donators:"寄付者","Don't show again":"再度表示しない","Download desktop app":"デスクトップアプリをダウンロード","Fonts are slow to load? Learn how to speed it up!":"フォントの読み込みが遅い？スピードアップの方法を学びましょう！","Official website":"公式ウェブサイト","GitHub Pages mirror":"GitHub Pages ミラー","GitLab Pages mirror":"GitLab Pages ミラー","Happy Chinese New Year!":"新年あけましておめでとうございます！","Help & support":"ヘルプ＆サポート","Join us on Slack":"Slackに参加する",Light:"ライト","Main languages":"主要言語",More:"もっと見る","More mirrors":"他のミラー","New tab":"新しいタブ","Notes: Contributors are sorted by number of commits and commit time.":"注：貢献者はコミット数とコミット時間に基づいて並べられています。",OK:"OK","Other languages":"他の言語","Pro tip":"プロのコツ","Rail Map Toolkit is opened in another window":"レールマップツールキットは別のウィンドウで開かれています","Raise an Issue on GitHub":"GitHubにIssueを報告","Refreshing is required for changes to take effect.":"変更を適用するには再読み込みが必要です。","Resource administrators":"リソース管理者","Resource contributors":"リソース提供者","Restart RMT in this window":"このウィンドウでRMTを再起動する",Running:"実行中",Save:"保存","Select an app to start your own rail map design!":"アプリを選択して自分のレールマップデザインを始めましょう！","Show dev tools for 1 day":"1日間開発ツールを表示",Switch:"切り替え","Switch to":"切り替え",System:"システムに従う",Tab:"タブ","Terms and conditions":"利用規約",Tutorial:"チュートリアル","Official Website":"公式サイト","Mini Metro Web":"ミニ地下鉄描画ツール","Unable to load contributors":"貢献者を読み込めません","Useful links":"便利なリンク","Visit GitHub":"GitHubを訪問","Web fonts":"ウェブフォント","Welcome to Rail Map Toolkit":"レールマップツールキットへようこそ","You cannot open multiple Rail Map Toolkit at the same time. Please close this window.":"複数のレールマップツールキットを同時に開くことはできません。このウィンドウを閉じてください。","You're currently viewing a testing environment.":"現在、テスト環境を閲覧しています。","Login status expired":"ログイン状態が期限切れです","Log in / Sign up":"ログイン / サインアップ","Log out":"ログアウト","Change name":"名前を変更","Change password":"パスワードを変更","Update account info":"アカウント情報を更新",Change:"変更",Account:"アカウント",Welcome:"ようこそ","Forgot password":"パスワードを忘れた","Check your email again!":"メールを再確認してください！","Email with reset link is sent to: ":"リセットリンクを含むメールが送信されました：",Email:"メールアドレス","Send reset link":"リセットリンクを送信","Reset password token":"パスワードリセットトークン",Password:"パスワード","Reset password":"パスワードをリセット","Back to log in":"ログインに戻る","Log in":"ログイン","Sign up":"サインアップ","The email is not valid!":"メールアドレスが無効です！","Verification email is sent to: ":"確認メールが送信されました：",Name:"名前","You may always change it later.":"後でいつでも変更できます。","Send verification code":"確認コードを送信","Verification code":"確認コード","Failed to get the RMP save!":"RMPセーブを取得できませんでした！","Can not sync this save!":"このセーブを同期できません！","Synced saves":"同期されたセーブ","Maximum save count:":"最大保存数：",Create:"作成","Current save":"現在のセーブ","Cloud save":"クラウドセーブ","Last update at:":"最終更新日：","Delete this save":"このセーブを削除","Sync now":"今すぐ同期","Sync this slot":"このスロットを同期","All subscriptions":"すべてのサブスクリプション",Redeem:"引き換え","With this subscription, the following features are unlocked:":"このサブスクリプションで次の機能がアンロックされます：","PRO features":"PRO機能","Sync 9 more saves":"追加の9つのセーブを同期","Unlimited master nodes":"大師節点無制限","Unlimited parallel lines":"平行路線無制限","Expires at:":"期限：","Not applicable":"該当なし",Renew:"更新","Redeem your subscription":"サブスクリプションを引き換え","CDKey could be purchased in the following sites:":"CD鍵は以下のサイトで購入できます：","Enter your CDKey here:":"ここにCD鍵を入力："},M={CookiesModal:{header:"본 사이트의 쿠키",text1:"RMG에서는 본 사이트 및 서비스가 정상적으로 작동하도록 쿠키를 사용합니다. 이러한 쿠키는 필수적이며 기본적으로 활성화되어 있습니다.",text2:"또한 우리는 다음과 같은 방법으로 쿠키를 사용합니다:",item1:"사이트 개선을 위해 사용자의 사용 패턴을 분석합니다.",text3:"이 쿠키들은 선택 사항입니다. 모든 선택적 쿠키를 허용하려면 '모든 쿠키 허용'을 선택하세요. 쿠키를 비활성화하려면 '거부'를 선택하세요.",accept:"모든 쿠키 허용",reject:"거부"},FontsSection:{text1:"프로젝트에서 사용하는 다음 글꼴은 사용자의 장치가 아닌 우리의 서버에서 로드됩니다.",text2:"이로 인해 불필요한 네트워크 트래픽이 발생할 수 있으며, 연결이 불안정할 경우 로딩이 느려질 수 있습니다.",text3:"이 오픈 소스 무료 글꼴을 다운로드하고 설치하여 사용 경험을 향상시킬 수 있습니다.",safari:"Safari에서는 지원되지 않음 ☹️"},About:"정보","Allow cookies to help improve our website":"쿠키를 허용하여 웹사이트 개선에 도움을 주세요",Appearance:"외관","Back to production environment":"프로덕션 환경으로 돌아가기","Close all tabs":"모든 탭 닫기","Close app":"앱 닫기","Close current tab":"현재 탭 닫기","Close tab":"탭 닫기","Contribution Wiki":"기여자 안내서",Contributors:"기여자","Current session has been terminated. Please close this window.":"현재 세션이 종료되었습니다. 이 창을 닫아주세요.",Dark:"어두운 모드","Developer team":"개발자 팀",Devtools:"개발자 도구","Export Local Storage":"로컬 저장소 내보내기",Donators:"기부자","Don't show again":"다시 보지 않기","Download desktop app":"데스크탑 앱 다운로드","Fonts are slow to load? Learn how to speed it up!":"글꼴 로딩이 느린가요? 속도를 높이는 방법을 알아보세요!","Official website":"공식 웹사이트","GitHub Pages mirror":"GitHub Pages 미러","GitLab Pages mirror":"GitLab Pages 미러","Happy Chinese New Year!":"새해 복 많이 받으세요!","Help & support":"도움말 및 지원","Join us on Slack":"Slack에 참여하기",Light:"밝은 모드","Main languages":"주요 언어",More:"더보기","More mirrors":"더 많은 미러","New tab":"새 탭","Notes: Contributors are sorted by number of commits and commit time.":"참고: 기여자는 커밋 수와 커밋 시간을 기준으로 정렬됩니다.",OK:"확인","Other languages":"기타 언어","Pro tip":"팁","Rail Map Toolkit is opened in another window":"철도 노선도 도구가 다른 창에서 열려 있습니다.","Raise an Issue on GitHub":"GitHub에서 이슈 제기","Refreshing is required for changes to take effect.":"변경 사항이 적용되려면 새로 고침이 필요합니다.","Resource administrators":"자원 관리자","Resource contributors":"자원 기여자","Restart RMT in this window":"이 창에서 RMT 재시작",Running:"실행 중",Save:"저장","Select an app to start your own rail map design!":"앱을 선택하여 나만의 철도 노선도 디자인을 시작하세요!","Show dev tools for 1 day":"1일 동안 개발자 도구 표시",Switch:"전환","Switch to":"로 전환",System:"시스템 설정 따르기",Tab:"탭","Terms and conditions":"이용 약관",Tutorial:"튜토리얼","Official Website":"공식 웹사이트","Mini Metro Web":"미니 지하철 그리기 도구","Unable to load contributors":"기여자 목록을 불러올 수 없습니다","Useful links":"유용한 링크","Visit GitHub":"GitHub 방문","Web fonts":"웹 글꼴","Welcome to Rail Map Toolkit":"철도 노선도 도구에 오신 것을 환영합니다","You cannot open multiple Rail Map Toolkit at the same time. Please close this window.":"여러 철도 노선도 도구를 동시에 열 수 없습니다. 이 창을 닫아주세요.","You're currently viewing a testing environment.":"현재 테스트 환경을 보고 있습니다.","Login status expired":"로그인 상태가 만료되었습니다","Log in / Sign up":"로그인 / 가입","Log out":"로그아웃","Change name":"이름 변경","Change password":"비밀번호 변경","Update account info":"계정 정보 업데이트",Change:"변경",Account:"계정",Welcome:"환영합니다","Forgot password":"비밀번호를 잊으셨나요","Check your email again!":"이메일을 다시 확인하세요!","Email with reset link is sent to: ":"비밀번호 재설정 링크가 이메일로 전송되었습니다: ",Email:"이메일 주소","Send reset link":"재설정 링크 전송","Reset password token":"비밀번호 재설정 토큰",Password:"비밀번호","Reset password":"비밀번호 재설정","Back to log in":"로그인으로 돌아가기","Log in":"로그인","Sign up":"가입","The email is not valid!":"이메일 주소가 유효하지 않습니다!","Verification email is sent to: ":"인증 이메일이 전송되었습니다: ",Name:"이름","You may always change it later.":"나중에 언제든지 변경할 수 있습니다.","Send verification code":"인증 코드 전송","Verification code":"인증 코드","Failed to get the RMP save!":"RMP 저장을 가져오지 못했습니다!","Can not sync this save!":"이 저장을 동기화할 수 없습니다!","Synced saves":"동기화된 저장","Maximum save count:":"최대 저장 수:",Create:"생성","Current save":"현재 저장","Cloud save":"클라우드 저장","Last update at:":"마지막 업데이트:","Delete this save":"이 저장 삭제","Sync now":"지금 동기화","Sync this slot":"이 슬롯 동기화","All subscriptions":"모든 구독",Redeem:"교환","With this subscription, the following features are unlocked:":"이 구독으로 다음 기능이 잠금 해제됩니다:","PRO features":"PRO 기능","Sync 9 more saves":"추가 9개 저장 동기화","Unlimited master nodes":"마스터 노드 무제한","Unlimited parallel lines":"평행선 무제한","Expires at:":"만료일:","Not applicable":"해당 없음",Renew:"갱신","Redeem your subscription":"구독을 교환하세요","CDKey could be purchased in the following sites:":"CDKey는 다음 사이트에서 구매할 수 있습니다:","Enter your CDKey here:":"여기에 CDKey를 입력하세요:"},P=(new a.I18nBuilder).use(c).withAppName("Rail Map Toolkit").withLng(a.getLanguage()).withDefaultResource(y).withResource("en",S).withResource("zh-Hans",k).withResource("zh-Hant",R).withResource("ja",C).withResource("ko",M).build();document.querySelector('link[rel="canonical"]').setAttribute("href",window.location.origin);var A=e("L",(e=>(e.OPENED_TABS="openedTabs",e.ACTIVE_TAB="activeTab",e.LAST_SHOW_DEVTOOLS="lastShowDevtools",e.SHOW_FONT_ADVICE="showFontAdvice",e.ACCOUNT="rmg-home__account",e))(A||{})),E=e("E",(e=>(e.APP_LOAD="APP_LOAD",e.OPEN_APP="OPEN_APP",e.CLOSE_APP="CLOSE_APP",e.OPEN_LINK="OPEN_LINK",e.TOGGLE_NAV_MENU="TOGGLE_NAV_MENU",e.CHANGE_LANGUAGE="CHANGE_LANGUAGE",e.SHOW_DEVTOOLS="SHOW_DEVTOOLS",e.RAISE_ISSUE="RAISE_ISSUE",e.JOIN_SLACK="JOIN_SLACK",e.DOWNLOAD_FONT="DOWNLOAD_FONT",e))(E||{}));const O=e("F","rmg-home:frame-"),L="app",x="searchParams",D="hashParams";var G=e("A",(e=>(e.AUTH_REGISTER="/auth/register",e.AUTH_LOGIN="/auth/login",e.AUTH_SEND_VERIFICATION_EMAIL="/auth/send-verification-email",e.AUTH_SEND_RESET_PASSWORD_EMAIL="/auth/forgot-password",e.AUTH_RESET_PASSWORD="/auth/reset-password",e.AUTH_REFRESH="/auth/refresh-tokens",e.AUTH_LOGOUT="/auth/logout",e.USER="/users",e.SUBSCRIPTION="/subscription",e.SUBSCRIPTION_REDEEM="/subscription/redeem",e.SAVES="/saves",e))(G||{}));const I=e("e","https://railmapgen.org/v1");var N=e("S",(e=>(e.RMP="rmp__param",e))(N||{}));const H=e=>new Promise((t=>{setTimeout(t,e,`Timeout after ${e/1e3} seconds`)})),U=(e,t,a)=>{const o=new URL(e,window.location.href);return o.search=t??o.search,o.hash=a??o.hash,o.pathname+o.search+o.hash},_=e("b",(async(e,t,a,o)=>{const s={accept:"application/json","Content-Type":"application/json"},i=structuredClone(s);a&&(i.Authorization=`Bearer ${a}`);const n=await fetch(`${I}${e}`,{headers:i,...t});if(401!==n.status)return{rep:n,token:a,refreshToken:o};if(!o)return{rep:n,token:a,refreshToken:void 0};const r=await fetch(`${I}${G.AUTH_REFRESH}`,{method:"POST",headers:s,body:JSON.stringify({refreshToken:o})});if(200!==r.status)return{rep:n,token:a,refreshToken:void 0};const l=await r.json(),c=l.access.token;return s.Authorization=`Bearer ${c}`,{rep:await fetch(`${I}${e}`,{headers:s,...t}),token:c,refreshToken:l.refresh.token}})),j=e("g",(async e=>{const t=localStorage.getItem(e);if(!t)return;const a=await(async(e,t="SHA-256")=>{const a=(new TextEncoder).encode(e),o=await crypto.subtle.digest(t,a);return Array.from(new Uint8Array(o)).map((e=>e.toString(16).padStart(2,"0"))).join("")})(t);return{data:t,hash:a}})),F=(e("c",((e,t)=>{localStorage.setItem(e,t)})),new BroadcastChannel("rmt-save-manager"));let W;e("n",(()=>{F.postMessage({type:"SAVE_CHANGED",key:N.RMP,from:"rmt"})}));const V=async(e,t,a,o)=>{const s=await j(o);if(!s)return{rep:void 0,token:void 0,refreshToken:void 0};const{data:i,hash:n}=s;return await _(G.SAVES+"/"+e,{method:"PATCH",body:JSON.stringify({data:i,hash:n})},t,a)},$=e("h",(e=>{F.postMessage({type:"TOKEN_REQUEST",token:e,from:"rmt"})})),B=e("k",{RMP_CLOUD:!1,RMP_EXPORT:!1}),K={isLoggedIn:!1,id:void 0,name:"",email:void 0,token:void 0,expires:void 0,refreshToken:void 0,refreshExpires:void 0,activeSubscriptions:B,currentSaveId:void 0,saves:[]},J=e("f",p("account/getSaveList",(async(e,{getState:t,dispatch:a,rejectWithValue:o})=>{const{token:s,refreshToken:i}=t().account;s||o("No token.");const{rep:n,token:r,refreshToken:l}=await _(G.SAVES,{},s,i);return r&&l||(a(z()),o("Can not recover from expired refresh token.")),a(Z({access:r,refresh:l})),200!==n.status&&o(n.text),await n.json()}))),Y=(e("j",p("account/fetchLogin",(async(e,{dispatch:t})=>{const{email:a,password:o}=e,s=await fetch(I+G.AUTH_LOGIN,{method:"POST",headers:{accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:a,password:o})});if(200!==s.status)return{error:await s.text(),username:void 0};const{user:{name:i,id:n},tokens:{access:{token:r,expires:l},refresh:{token:c,expires:p}}}=await s.json();return t(q({id:n,name:i,email:a,token:r,expires:l,refreshToken:c,refreshExpires:p})),t(J()),$(r),{error:void 0,username:i}}))),d({name:"account",initialState:K,reducers:{login:(e,t)=>{e.isLoggedIn=!0,e.id=t.payload.id,e.name=t.payload.name,e.email=t.payload.email,e.token=t.payload.token,e.expires=t.payload.expires,e.refreshToken=t.payload.refreshToken,e.refreshExpires=t.payload.refreshExpires,e.activeSubscriptions=B,e.currentSaveId=void 0,e.saves=[]},logout:e=>{e.isLoggedIn=!1,e.id=void 0,e.name=void 0,e.email=void 0,e.token=void 0,e.expires=void 0,e.refreshToken=void 0,e.refreshExpires=void 0,e.activeSubscriptions=B,e.currentSaveId=void 0,e.saves=[]},updateName:(e,t)=>{e.name=t.payload},setToken:(e,t)=>{e.token=t.payload.access,e.refreshToken=t.payload.refresh},setExpires:(e,t)=>{e.expires=t.payload.expires,e.refreshExpires=t.payload.refreshExpires},setActiveSubscriptions:(e,t)=>{e.activeSubscriptions=t.payload}},extraReducers:e=>{e.addCase(J.fulfilled,((e,t)=>{e.currentSaveId=t.payload.currentSaveId,e.saves=t.payload.saves})).addCase(J.rejected,((e,t)=>{console.log(e,t.payload)}))}})),{login:q,logout:z,updateName:Q,setActiveSubscriptions:X,setToken:Z,setExpires:ee}=Y.actions;e({l:z,i:Q,m:X,s:Z});const te=Y.reducer,ae=e=>e?["app","devtool"]:["app"],oe=e("o",{rmg:{name:"Rail Map Generator",url:"/rmg/",assetType:"app",allowMultiInstances:!0},rmp:{name:"Rail Map Painter",url:"/rmp/",assetType:"app"},"rmg-palette":{name:"Palette",url:"/rmg-palette/",assetType:"app",showContributors:!0,legacyContributors:"legacy-contributor-list.txt"},"rmg-palette-upload":{name:"Palette - Upload",url:"/rmg-palette/#/new",assetType:"app"},"rmg-templates":{name:"RMG Templates",url:"/rmg-templates/",assetType:"app",showContributors:!0,legacyContributors:"legacy-contributor-list.txt",allowedInstances:["Org","GitHub","GitLab","Tauri","localhost","unknown"]},"rmg-templates-upload":{name:"RMG Templates - Upload",url:"/rmg-templates/#/new",assetType:"app",allowedInstances:["Org","GitHub","GitLab","Tauri","localhost","unknown"]},"rmp-gallery":{name:"RMP Gallery",url:"/rmp-gallery/",assetType:"app",showContributors:!0,showDonators:!0,allowedInstances:["Org","GitHub","GitLab","Tauri","localhost","unknown"]},"rmp-designer":{name:"RMP Designer",url:"/rmp-designer/",assetType:"app"},"rmg-components":{name:"Components",url:"/rmg-components/",assetType:"devtool",allowedInstances:["Org","GitHub","GitLab","localhost","unknown"]},"svg-assets":{name:"SVG Assets",url:"/svg-assets/",assetType:"devtool",allowedInstances:["Org","GitHub","GitLab","localhost","unknown"]},"rmg-translate":{name:"Translate",url:"/rmg-translate/",assetType:"devtool",allowedInstances:["Org","GitHub","GitLab","localhost","unknown"]},"seed-project":{name:"Seed Project",url:"/seed-project/",assetType:"devtool",allowedInstances:["Org","GitHub","GitLab","localhost","unknown"]},"rmg-runtime":{name:"Runtime Documentation",url:"/rmg-runtime/",assetType:"devtool",allowedInstances:["Org","GitHub","GitLab","localhost","unknown"]},"runtime-demo":{name:"Runtime Demo",url:"/runtime-demo/",assetType:"devtool",allowedInstances:["Org","GitHub","GitLab","localhost","unknown"],allowMultiInstances:!0},tutorial:{name:"Tutorial",url:"https://rmttutorial.wordpress.com",assetType:"link"},"official-website":{name:"Official website",url:"https://railmapgen.org",assetType:"link",allowedInstances:["GitHub","GitLab","localhost","unknown"]},"github-pages":{name:"GitHub Pages mirror",url:"https://railmapgen.github.io",assetType:"link",allowedInstances:["Org","GitLab","localhost","unknown"]},"gitlab-pages":{name:"GitLab Pages mirror",url:"https://railmapgen.gitlab.io",assetType:"link",allowedInstances:["Org","GitHub","localhost","unknown"]},tauri:{name:"Download desktop app",url:(()=>{const e=new Date,t=`${e.getFullYear()}${String(e.getMonth()+1).padStart(2,"0")}01`,a=`${String(e.getFullYear()).slice(-2)}.${e.getMonth()+1}.1`,o=navigator.platform;return`https://mirror.ghproxy.com/https://github.com/railmapgen/railmapgen.github.io/releases/download/tauri-${t}/railmapgen_${a}_${o.includes("Linux")?"amd64.deb":o.includes("Mac")?"x64.dmg":"x64-setup.exe"}`})(),assetType:"link",allowedInstances:["Org","GitHub","GitLab","localhost","unknown"]},"mini-metro-web":{name:"Mini Metro Web",url:"https://mini-metro-web.gitlab.io/",assetType:"link"},busLineDesigner:{name:"Bus Line Designer",url:"https://buslinedesigner.bobliu.tech",assetType:"link"},linesPaper:{name:"LinesPaper线图荟",url:"https://space.bilibili.com/3546659889875715",assetType:"link"}}),se=e("x",((e,t,a)=>Object.entries(oe).filter((([,o])=>{const s=o.assetType===e,i=!o.allowedEnvs||o.allowedEnvs.includes(t),n=!o.allowedInstances||o.allowedInstances.includes(a);return s&&i&&n})).map((([e])=>e)))),ie=(e("N","never"),d({name:"app",initialState:{isShowMenu:!0,menuView:"main",refreshRequired:!1,lastShowDevtools:0,openedTabs:[],activeTab:void 0,remoteFonts:{},showFontAdvice:"hide"},reducers:{setIsPrimary:(e,t)=>{e.isPrimary=t.payload},terminateSession:e=>{e.isTerminated=!0},toggleMenu:e=>{e.isShowMenu=!e.isShowMenu},setMenuView:(e,t)=>{e.menuView=t.payload},requireRefresh:e=>{e.refreshRequired=!0},showDevtools:(e,t)=>{const a=Date.now();t.payload?t.payload<a&&(e.lastShowDevtools=t.payload):e.lastShowDevtools=a},hideDevtools:e=>{e.lastShowDevtools=0},setOpenedTabs:(e,t)=>{e.openedTabs=t.payload},updateTabUrl:(e,t)=>{const{id:a,url:o}=t.payload;e.openedTabs=e.openedTabs.map((e=>e.id===a?{...e,url:o}:e))},setActiveTab:(e,t)=>{e.activeTab=t.payload},openApp:(e,t)=>{const{appId:a,search:o,hash:s}=t.payload,i=e.openedTabs.find((({id:t})=>t===e.activeTab)),n=e.openedTabs.find((({app:e})=>e===a)),r=oe[a].allowMultiInstances??!1;if(void 0!==o||void 0!==s)if(r||!n){const t=crypto.randomUUID();e.openedTabs.push({id:t,app:a,url:U(oe[a].url,o,s)}),e.activeTab=t}else e.openedTabs=e.openedTabs.map((e=>e.id===n.id?{...e,url:U(e.url??oe[e.app].url,o,s)}:e)),e.activeTab=n.id;else if(n)i?.app!==a&&(e.activeTab=n.id);else{const t=crypto.randomUUID();e.openedTabs.push({id:t,app:a,url:U(oe[a].url)}),e.activeTab=t}},openAppInNew:(e,t)=>{const a=crypto.randomUUID();e.openedTabs.push({id:a,app:t.payload}),e.activeTab=a},closeTab:(e,t)=>{const a=t.payload,o=e.openedTabs.slice().sort(((e,t)=>{const a=Object.keys(oe);return a.indexOf(e.app)-a.indexOf(t.app)}));if(e.openedTabs=e.openedTabs.filter((e=>e.id!==a)),e.activeTab===a){const t=o.findIndex((e=>e.id===a));e.activeTab=o.filter((e=>e.id!==a))[Math.max(0,t-1)]?.id}},closeApp:(e,t)=>{const a=t.payload;if(!e.openedTabs.some((e=>e.app===a)))return;const o=Object.keys(oe).filter((t=>e.openedTabs.some((e=>e.app===t)))),s=e.openedTabs.find((t=>t.id===e.activeTab))?.app,i=e.openedTabs.filter((e=>e.app!==a));if(e.openedTabs=i,s===a){const t=o.findIndex((e=>e===a));e.activeTab=i.find((e=>e.app===o[Math.max(0,t-1)]))?.id}},updateTabMetadata:(e,t)=>{const{id:a,title:o,search:s,hash:i}=t.payload;e.openedTabs=e.openedTabs.map((e=>e.id===a?{...e,title:o??e.title,url:U(e.url??oe[e.app].url,s,i)}:e))},addRemoteFont:(e,t)=>{const{family:a,config:o}=t.payload;a in e.remoteFonts||(e.remoteFonts[a]=o,"hide"===e.showFontAdvice&&(e.showFontAdvice="show"))},hideFontAdvice:e=>{e.showFontAdvice="hide"},neverShowFontAdvice:e=>{e.showFontAdvice="never"}}})),ne=e("B",(e=>e+864e5>=Date.now())),{setIsPrimary:re,terminateSession:le,toggleMenu:ce,setMenuView:pe,requireRefresh:de,showDevtools:ue,hideDevtools:me,setOpenedTabs:he,updateTabUrl:ge,setActiveTab:we,openApp:fe,openAppInNew:be,closeTab:ve,closeApp:Te,updateTabMetadata:ye,addRemoteFont:Se,hideFontAdvice:ke,neverShowFontAdvice:Re}=ie.actions;e({t:ce,d:pe,G:de,C:ue,D:me,r:we,q:fe,p:be,v:ve,w:Te,y:ke,z:Re});const Ce=ie.reducer,Me=u({app:Ce,account:te}),Pe=m(),Ae=((e={})=>h({reducer:Me,middleware:e=>e().prepend(Pe.middleware),preloadedState:e}))(),Ee=(e("a",(()=>g())),e("u",w),Pe.startListening);window.rmgStore=Ae;const Oe="ping",Le="pong",xe="restart",De=new BroadcastChannel("rmt-instance-checker"),Ge=e=>{e.data===Oe&&(o.info("Received ping from another RMT instance."),De.postMessage(Le))};De.addEventListener("message",Ge),De.addEventListener("message",(e=>{e.data===xe&&(o.info("Received restart from another RMT instance. Closing current session..."),De.close(),Ae.dispatch(le()),Ae.dispatch(f()))})),e("H",(()=>{De.postMessage(xe)}));const Ie=e=>{const t=window.localStorage.getItem(A.ACCOUNT);if(t){const a=JSON.parse(t);o.debug(`Get account data from local storage: ${a}`),e.dispatch(q(a))}setInterval((()=>{const t=e.getState().account;if(!t.isLoggedIn)return;const a=new Date(t.expires);if((new Date).getTime()>a.getTime()){o.debug(`Token expires on ${a} needs to be refreshed on ${new Date}`);const s=new Date(t.refreshExpires);if((new Date).getTime()>s.getTime())return o.debug(`Refresh token expires on ${s}, logout!`),void e.dispatch(z());(async e=>{const t=await fetch(`${I}${G.AUTH_REFRESH}`,{method:"POST",headers:{accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(200===t.status)return await t.json()})(t.refreshToken).then((t=>{o.debug(`Token refreshed with ${JSON.stringify(t)}`),t?(e.dispatch(Z({access:t.access.token,refresh:t.refresh.token})),e.dispatch(ee({expires:t.access.expires,refreshExpires:t.refresh.expires}))):e.dispatch(z())}))}}),5e3)};function Ne(e){(e=>{const t=Number(a.storage.get(A.LAST_SHOW_DEVTOOLS));t&&e.dispatch(ue(t))})(e),(e=>{try{const t=a.storage.get(A.OPENED_TABS);if(t){const a=JSON.parse(t);if(Array.isArray(a)){const t=ae(ne(e.getState().app.lastShowDevtools)),o=a.filter((e=>t.includes(oe[e.app].assetType)));e.dispatch(he(o))}else o.warn("initOpenedTabs(), Cannot parse invalid opened tabs state from local storage")}}catch(t){o.warn("initOpenedTabs(), cannot parse opened apps state from local storage",t)}})(e),(e=>{const t=a.storage.get(A.ACTIVE_TAB),o=e.getState().app.openedTabs;t&&o.some((({id:e})=>e===t))?e.dispatch(we(t)):e.dispatch(we(o[0]?.id))})(e),Ie(e),((()=>{const e=navigator.userAgent;return e.includes("Safari")&&!e.includes("Chrome")})()||"never"===a.storage.get(A.SHOW_FONT_ADVICE))&&e.dispatch(Re()),Ee({predicate:(e,t,a)=>t.app.lastShowDevtools!==a.app.lastShowDevtools,effect:(e,t)=>{a.storage.set(A.LAST_SHOW_DEVTOOLS,t.getState().app.lastShowDevtools.toString())}}),Ee({predicate:(e,t,a)=>JSON.stringify(t.app.openedTabs)!==JSON.stringify(a.app.openedTabs),effect:(e,t)=>{a.storage.set(A.OPENED_TABS,JSON.stringify(t.getState().app.openedTabs))}}),Ee({predicate:(e,t,a)=>t.app.activeTab!==a.app.activeTab,effect:(e,t)=>{const o=t.getState().app.activeTab;void 0!==o&&a.storage.set(A.ACTIVE_TAB,o)}}),Ee({predicate:(e,t,a)=>t.account.isLoggedIn!==a.account.isLoggedIn,effect:(e,t)=>{const{isLoggedIn:a,id:s,name:i,email:n,token:r,expires:l,refreshToken:c,refreshExpires:p}=t.getState().account;a?window.localStorage.setItem(A.ACCOUNT,JSON.stringify({id:s,name:i,email:n,token:r,expires:l,refreshToken:c,refreshExpires:p})):(o.debug("Remove account from local storage due to logout."),window.localStorage.removeItem(A.ACCOUNT))}}),(e=>{const t=new URLSearchParams(window.location.search),s=t.get(L)??"",i=t.get(x)??void 0,n=t.get(D)??void 0;o.info(`openSearchedApp(), searchParams app=${s}, extraSearchParams are [${i}], extraHashParams are [${n}]`),ae(ne(e.getState().app.lastShowDevtools)).map((e=>se(e,a.getEnv(),a.getInstance()))).flat().includes(s)?e.dispatch(fe({appId:s,search:i,hash:n})):o.warn(`openSearchedApp(), app ${s} not found`)})(e),(async()=>{let e=!0;De.addEventListener("message",(t=>{t.data===Le&&(o.warn("Received pong from another RMT instance. This instance is not primary."),e=!1,De.removeEventListener("message",Ge))})),De.postMessage(Oe);let t=5;for(;t--;)if(await H(500),!e)return!1;return o.info("This instance is primary."),!0})().then((t=>{e.dispatch(re(t)),t||e.dispatch(f())}))}let He;const Ue=b.lazy((()=>function(e){function t(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return Promise.resolve().then((a=>{for(const e of a||[])"rejected"===e.status&&t(e.reason);return e().catch(t)}))}((()=>t.import("./app-root-legacy-DtjFFmmm.js")))));a.ready().then((()=>{Ne(Ae),He=s(document.getElementById("root")),He.render(l.jsx(b.StrictMode,{children:l.jsx(v,{store:Ae,children:l.jsx(T,{i18n:P,children:l.jsx(i,{children:l.jsx(n,{suspenseFallback:l.jsx(r,{isIndeterminate:!0}),allowReset:!0,children:l.jsx(Ue,{})})})})})})),a.onAppOpen((e=>{ae(ne(Ae.getState().app.lastShowDevtools)).map((e=>se(e,a.getEnv(),a.getInstance()))).flat().includes(e.appId)&&Ae.dispatch(fe(e))})),a.onAppClose((e=>{Ae.dispatch(Te(e))})),a.onAppMetadataUpdate(((e,t)=>{if(t){const a=t.slice(O.length);o.info(`Received metadata update for frame=${a}, metadata is`,e),Ae.dispatch(ye({...e,id:a}))}})),a.onUrlUpdate(((e,t)=>{if(t){const a=t.slice(O.length);o.info(`Received URL update for frame=${a}, url=${e}`),Ae.dispatch(ge({id:a,url:e}))}})),a.onRemoteFontLoaded((({family:e,definition:{displayName:t,url:a}})=>{Ae.dispatch(Se({family:e,config:{displayName:t,url:a}}))})),a.event(E.APP_LOAD,{openedApps:Ae.getState().app.openedTabs.map((e=>e.app))}),(e=>{F.addEventListener("message",(async t=>{W||(W=window.setTimeout((async()=>{const{isLoggedIn:a,currentSaveId:s,token:i,refreshToken:n}=e.getState().account;if(!(a&&s&&i&&n))return;const{type:r,key:l,from:c}=t.data;if("SAVE_CHANGED"===r&&"rmp"===c&&(o.info(`Received save changed event on key: ${l}`),a&&s)){o.info(`Update remote save id: ${s} with local key: ${l}`);const{rep:t,token:a,refreshToken:r}=await V(s,i,n,l);if(!r||!a)return void e.dispatch(z());if(e.dispatch(Z({access:a,refresh:r})),200!==t.status)return;e.dispatch(J())}W=void 0}),6e4))}))})(Ae),(e=>{F.addEventListener("message",(async t=>{const{type:a,from:s}=t.data;if("TOKEN_REQUEST"===a&&"rmp"===s){o.info(`Received token request event from: ${s}`);const{isLoggedIn:t,token:a,refreshToken:i}=e.getState().account;if(!t||!a||!i)return void $();e.dispatch(J());const{isLoggedIn:n,token:r,refreshToken:l}=e.getState().account;if(!n||!r||!l)return void $();$(r)}}))})(Ae)}))}}}));
