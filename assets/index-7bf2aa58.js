import{r as p,i as y,d as E,c as M,n as g,a as P,b as _,u as O,e as I,R as i,f as L,g as w,h as N,j as l,P as D,I as G,k as $,l as x,m as U}from"./vendor-59b10bec.js";function De(){import.meta.url,import("_").catch(()=>1);async function*e(){}}(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();const H="modulepreload",V=function(e){return"/"+e},h={},W=function(o,t,n){if(!t||t.length===0)return o();const s=document.getElementsByTagName("link");return Promise.all(t.map(a=>{if(a=V(a),a in h)return;h[a]=!0;const r=a.endsWith(".css"),C=r?'[rel="stylesheet"]':"";if(!!n)for(let u=s.length-1;u>=0;u--){const b=s[u];if(b.href===a&&(!r||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${C}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":H,r||(c.as="script",c.crossOrigin=""),c.href=a,document.head.appendChild(c),r)return new Promise((u,b)=>{c.addEventListener("load",u),c.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>o())};const B={header:"Cookies on this website",text1:"At RMG we use cookies to help ensure that our website and services are able to function properly. These cookies are necessary and so are set automatically.",text2:"We would also like to use some cookies to:",item1:"improve our website based on how you use it",text3:"These cookies are optional. If you'd like to accept all optional cookies, select 'Accept all cookies'. If you'd like to reject them, select 'Reject'.",accept:"Accept all cookies",reject:"Reject"},j={CookiesModal:B},F={currentMirror:"你正在浏览 <1>{{mirror}}</1> 镜像"},q={header:"本网站的 Cookies",text1:"在 RMG，我们使用 Cookies 来确保本网站及服务可以正常运作。这些 Cookies 是必需的，因此已默认启动。",text2:"我们也会以 Cookies 的方式：",item1:"分析您的使用模式，用来改进本网站",text3:"这些 Cookies 是可选的。如果您想允许所有可选 Cookies，请选择“接受所有 Cookies”。如果您想禁用 Cookies，请选择“拒绝”。",accept:"接受所有 Cookies",reject:"拒绝"},z="关于",J="外观",X="贡献者",K="深色",Q="浅色",Y="保存",Z="跟随系统",ee={NavMenuFooter:F,CookiesModal:q,About:z,"Allow cookies to help improve our website":"允许用 Cookies 帮助改进本网站",Appearance:J,"Contribution Wiki":"贡献者指南",Contributors:X,"Core contributors":"核心贡献者",Dark:K,Light:Q,"Open in new Workspace":"在新 Workspace 中打开","Privacy settings":"隐私设置","Refreshing is required for changes to take effect.":"刷新页面后变更才会生效","Resource contributors":"资源贡献者","Resource Administrator":"资源管理员",Save:Y,"Select an app to start your own rail map design!":"选择一个应用程序来开始你的线路图设计！","Switch to":"切换至",System:Z,"Terms and conditions":"条款与细则","Visit GitHub":"访问 GitHub","Welcome to Rail Map Toolkit":"欢迎使用线路图工具包"},oe={currentMirror:"你正在瀏覽 <1>{{mirror}}</1> 鏡像"},te={header:"本網站的 Cookies",text1:"在 RMG，我們使用 Cookies 以確保本網站及服務可以正常運作。這些 Cookies 是必需的，因此已預設啟用。",text2:"我們亦會以 Cookies 的方式：",item1:"分析閣下的使用模式，用來改進本網站",text3:"這些 Cookies 是可選的。如果閣下想容許所有可選 Cookies，請選擇「接受所有 Cookies」。如果閣下想禁用 Cookies，請選擇「拒絕」。",accept:"接受所有 Cookies",reject:"拒絕"},ne="關於",se="外觀",ae="貢獻者",ie="深色",re="淺色",ce="儲存",le="跟隨系統",pe={NavMenuFooter:oe,CookiesModal:te,About:ne,"Allow cookies to help improve our website":"容許以 Cookies 幫助改進本網站",Appearance:se,"Contribution Wiki":"貢獻者指南",Contributors:ae,"Core contributors":"主要貢獻者",Dark:ie,Light:re,"Open in new Workspace":"在新 Workspace 中開啟","Privacy settings":"私隱設定","Refreshing is required for changes to take effect.":"重新整理頁面後變更才會生效","Resource contributors":"資源貢獻者","Resource Administrator":"資源管理員",Save:ce,"Select an app to start your own rail map design!":"選擇一個應用程式以開始你的路綫圖設計！","Switch to":"切換至",System:le,"Terms and conditions":"條款及細則","Visit GitHub":"造訪 GitHub","Welcome to Rail Map Toolkit":"歡迎使用路綫圖工具組"},de={currentMirror:"당신은 미러를 <1>{{mirror}}</1> 훑어보고 있습니다"},ue={header:"이 웹 사이트의 쿠키",text1:"RMG에서는 쿠키를 사용하여 웹 사이트 및 서비스가 제대로 작동하는지 확인합니다.이러한 쿠키는 필수이므로 기본적으로 시작됩니다.",text2:"저희도 쿠키 방식으로：",item1:"당신의 사용 패턴을 분석하여, 본 사이트를 개선합니다",text3:"이 쿠키들은 선택 사항입니다.모든 선택 가능한 쿠키를 허용하려면 '모든 쿠키 허용'을 선택하십시오.쿠키를 사용하지 않으려면 '거부'를 선택하십시오.",accept:"모든 쿠키 허용",reject:"거부"},me="관한",be="화면 스타일",ge="기여자",he="다크 모드",fe="라이트 모드",Te="저장",Ae="시스템 모드",ke={NavMenuFooter:de,CookiesModal:ue,About:me,"Allow cookies to help improve our website":"쿠키를 사용하여 이 웹 사이트를 개선할 수 있도록 허용",Appearance:be,"Contribution Wiki":"기여자 안내",Contributors:ge,"Core contributors":"핵심 기여자",Dark:he,Light:fe,"Open in new Workspace":"새 Workspace에서 열기","Privacy settings":"개인 정보 보호 설정","Refreshing is required for changes to take effect.":"페이지를 새로 고친 후에만 변경 가능","Resource contributors":"자원 기여자","Resource Administrator":"자원 관리자",Save:Te,"Select an app to start your own rail map design!":"응용 프로그램을 선택하여 노선도 설계를 시작하십시오.","Switch to":"곳으로 전환",System:Ae,"Terms and conditions":"조항과 세칙","Visit GitHub":"GitHub 방문하기","Welcome to Rail Map Toolkit":"노선도 툴킷에 오신 것을 환영합니다"},we=new p.I18nBuilder().use(y).withAppName("Rail Map Toolkit").withLng(p.getLanguage()).withDefaultResource(E).withResource("en",j).withResource("zh-Hans",ee).withResource("zh-Hant",pe).withResource("ko",ke).build(),ve={isShowMenu:!0,openedTabs:[],activeTab:void 0},v=M({name:"app",initialState:ve,reducers:{toggleMenu:e=>{e.isShowMenu=!e.isShowMenu},setOpenedTabs:(e,o)=>{e.openedTabs=o.payload},updateTabUrl:(e,o)=>{const{id:t,url:n}=o.payload;e.openedTabs=e.openedTabs.map(s=>s.id===t?{...s,url:n}:s)},setActiveTab:(e,o)=>{e.activeTab=o.payload},openApp:(e,o)=>{const t=o.payload,n=e.openedTabs.find(({id:a})=>a===e.activeTab),s=e.openedTabs.find(({app:a})=>a===t);if((n==null?void 0:n.app)!==t)if(s)e.activeTab=s.id;else{const a=g();e.openedTabs.push({id:a,app:t}),e.activeTab=a}},openAppInNew:(e,o)=>{const t=g();e.openedTabs.push({id:t,app:o.payload}),e.activeTab=t},closeTab:(e,o)=>{const t=o.payload,n=e.openedTabs.filter(s=>s.id!==t);if(n.length===0)e.openedTabs=[],e.activeTab=void 0,e.isShowMenu=!0;else if(e.activeTab===t){const s=e.openedTabs.findIndex(a=>a.id===t);e.openedTabs=n,e.activeTab=n[Math.min(s,n.length-1)].id}else e.openedTabs=n}}}),{toggleMenu:$e,setOpenedTabs:f,updateTabUrl:Re,setActiveTab:T,openApp:Se,openAppInNew:xe,closeTab:Ue}=v.actions,Ce=v.reducer,R=P(),d=_({reducer:{app:Ce},middleware:e=>e().prepend(R.middleware)}),He=()=>O(),Ve=I,A=R.startListening;window.rmgStore=d;const ye={rmg:{name:"Rail Map Generator",allowedEnvs:[i.DEV,i.UAT,i.PRD],allowMultiInstances:!0},rmp:{name:"Rail Map Painter",allowedEnvs:[i.DEV,i.UAT,i.PRD]},"rmg-palette":{name:"Palette",allowedEnvs:[i.DEV,i.UAT,i.PRD]},"rmg-components":{name:"Components",allowedEnvs:[i.DEV,i.UAT]},"rmg-templates":{name:"RMG Templates",allowedEnvs:[i.DEV,i.UAT,i.PRD]},"seed-project":{name:"Seed Project",allowedEnvs:[i.DEV,i.UAT]},"rmg-translate":{name:"Translate",allowedEnvs:[i.DEV,i.UAT]}},Ee=e=>Object.entries(ye).filter(([o,t])=>t.allowedEnvs.includes(e)).map(([o])=>o);var m=(e=>(e.OPENED_TABS="rmg-home__openedTabs",e.ACTIVE_TAB="rmg-home__activeTab",e))(m||{});const We={GitHub:"GitHub Pages",GitLab:"GitLab Pages",Bitbucket:"Bitbucket Cloud",localhost:"localhost",unknown:"unknown"},Be=(e,o)=>`https://${o===i.PRD?"":"uat-"}railmapgen.${e===L.GITLAB?"gitlab":"github"}.io`;var S=(e=>(e.APP_LOAD="APP_LOAD",e.OPEN_APP="OPEN_APP",e.CLOSE_APP="CLOSE_APP",e.TOGGLE_NAV_MENU="TOGGLE_NAV_MENU",e.CHANGE_LANGUAGE="CHANGE_LANGUAGE",e.SWITCH_MIRROR="SWITCH_MIRROR",e))(S||{});const Me="rmg-home:frame-",Pe=e=>{try{const o=window.localStorage.getItem(m.OPENED_TABS),t=window.localStorage.getItem("rmg-home__openedApps");if(o){const n=JSON.parse(o);Array.isArray(n)?e.dispatch(f(n)):console.warn("initOpenedTabs():: Cannot parse invalid opened tabs state from local storage")}else if(t){const n=JSON.parse(t);if(Array.isArray(n)&&typeof n[0]=="string"){const s=n.map(a=>({id:g(),app:a}));e.dispatch(f(s))}else console.warn("initOpenedTabs():: cannot parse invalid opened apps state from local storage")}}catch(o){console.warn("initOpenedTabs():: cannot parse opened apps state from local storage",o)}},_e=e=>{var n;const o=window.localStorage.getItem(m.ACTIVE_TAB),t=e.getState().app.openedTabs;o&&t.some(({id:s})=>s===o)?e.dispatch(T(o)):e.dispatch(T((n=t[0])==null?void 0:n.id))};function Oe(e){Pe(e),_e(e),A({predicate:(o,t,n)=>JSON.stringify(t.app.openedTabs)!==JSON.stringify(n.app.openedTabs),effect:(o,t)=>{window.localStorage.setItem(m.OPENED_TABS,JSON.stringify(t.getState().app.openedTabs))}}),A({predicate:(o,t,n)=>t.app.activeTab!==n.app.activeTab,effect:(o,t)=>{const n=t.getState().app.activeTab;n!==void 0&&window.localStorage.setItem(m.ACTIVE_TAB,n)}})}let k;const Ie=w.lazy(()=>W(()=>import("./app-root-2962e0eb.js"),["assets/app-root-2962e0eb.js","assets/vendor-59b10bec.js"])),Le=()=>{k=N(document.getElementById("root")),k.render(l(w.StrictMode,{children:l(D,{store:d,children:l(G,{i18n:we,children:l($,{children:l(x,{suspenseFallback:l(U,{isIndeterminate:!0}),allowReset:!0,children:l(Ie,{})})})})})}))};p.ready().then(()=>{Oe(d),Le(),p.onAppOpen(e=>{Ee(p.getEnv()).includes(e)&&d.dispatch(Se(e))}),p.onUrlUpdate((e,o)=>{if(o){const t=o.slice(Me.length);console.log(`Received URL update for frame=${t}, url=${e}`),d.dispatch(Re({id:t,url:e}))}}),p.event(S.APP_LOAD,{openedApps:d.getState().app.openedTabs.map(e=>e.app)})});export{S as E,Me as F,De as __vite_legacy_guard,Ve as a,ye as b,Ue as c,Se as d,Be as e,Ee as g,We as m,xe as o,T as s,$e as t,He as u};
