!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(R){l=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),c=new x(n||[]);return i(a,"_invoke",{value:A(e,r,c)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(R){return{type:"throw",arg:R}}}r.wrap=p;var d={};function h(){}function m(){}function v(){}var y={};l(y,c,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(O([])));g&&g!==n&&o.call(g,c)&&(y=g);var w=v.prototype=h.prototype=Object.create(y);function T(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(t,r){function n(i,a,c,s){var u=f(t[i],t,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==e(p)&&o.call(p,"__await")?r.resolve(p.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):r.resolve(p).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,t){function o(){return new r((function(r,o){n(e,t,r,o)}))}return a=a?a.then(o,o):o()}})}function A(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===d)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=f(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=f(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function O(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=v,i(w,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:m,configurable:!0}),m.displayName=l(v,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},r.awrap=function(e){return{__await:e}},T(k.prototype),l(k.prototype,s,(function(){return this})),r.AsyncIterator=k,r.async=function(e,t,n,o,i){void 0===i&&(i=Promise);var a=new k(p(e,t,n,o),i);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(w),l(w,u,"Generator"),l(w,c,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=O,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),s=o.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},r}function r(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,o)}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(t,r,n){return(r=function(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===e(r)?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],s=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(l){u=!0,o=l}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./vendor-legacy-2b677443.js"],(function(n,i){"use strict";var c,s,u,l,p,f,d,h,m,v,y,b,g,w,T,k,A,E,P,S=document.createElement("style");return S.textContent=":root{background-color:#fff}@media (prefers-color-scheme: dark){:root{background-color:#1a202c;color:#fff}}html{height:100%}body{margin:0;overflow:hidden;height:100%;width:100%;width:-webkit-fill-available;padding:env(safe-area-inset-top,20px) env(safe-area-inset-right,20px) env(safe-area-inset-bottom,20px) env(safe-area-inset-left,20px)}div#root{height:100%;width:100%}*{box-sizing:border-box}\n",document.head.appendChild(S),{setters:[function(e){c=e.r,s=e.i,u=e.d,l=e.R,p=e.a,f=e.c,d=e.b,h=e.e,m=e.u,v=e.f,y=e.g,b=e.h,g=e.j,w=e.k,T=e.P,k=e.I,A=e.l,E=e.m,P=e.n}],execute:function(){var S={CookiesModal:{header:"Cookies on this website",text1:"At RMG we use cookies to help ensure that our website and services are able to function properly. These cookies are necessary and so are set automatically.",text2:"We would also like to use some cookies to:",item1:"improve our website based on how you use it",text3:"These cookies are optional. If you'd like to accept all optional cookies, select 'Accept all cookies'. If you'd like to reject them, select 'Reject'.",accept:"Accept all cookies",reject:"Reject"}},x={CookiesModal:{header:"本网站的 Cookies",text1:"在 RMG，我们使用 Cookies 来确保本网站及服务可以正常运作。这些 Cookies 是必需的，因此已默认启动。",text2:"我们也会以 Cookies 的方式：",item1:"分析您的使用模式，用来改进本网站",text3:"这些 Cookies 是可选的。如果您想允许所有可选 Cookies，请选择“接受所有 Cookies”。如果您想禁用 Cookies，请选择“拒绝”。",accept:"接受所有 Cookies",reject:"拒绝"},About:"关于","Allow cookies to help improve our website":"允许用 Cookies 帮助改进本网站",Appearance:"外观","Close all tabs":"关闭所有标签页","Close app":"关闭应用程式","Close current tab":"关闭当前标签页","Close tab":"关闭标签页","Contribution Wiki":"贡献者指南",Contributors:"贡献者","Core contributors":"核心贡献者",Dark:"深色",Light:"浅色",More:"更多","New tab":"新标签页",Privacy:"隐私","Privacy settings":"隐私设置","Rail Map Toolkit is opened in another window":"线路图工具包已在另一窗口中打开","Refreshing is required for changes to take effect.":"刷新页面后变更才会生效","Resource contributors":"资源贡献者","Resource Administrator":"资源管理员",Running:"正在运行",Save:"保存","Select an app to start your own rail map design!":"选择一个应用程序来开始你的线路图设计！",Switch:"切换","Switch to":"切换至",System:"跟随系统",Tab:"标签页","Terms and conditions":"条款与细则","Visit GitHub":"访问 GitHub","Welcome to Rail Map Toolkit":"欢迎使用线路图工具包","You cannot open multiple Rail Map Toolkit at the same time. Please close this window.":"您不能同时打开多个线路图工具包。请关闭当前窗口。"},O={CookiesModal:{header:"本網站的 Cookies",text1:"在 RMG，我們使用 Cookies 以確保本網站及服務可以正常運作。這些 Cookies 是必需的，因此已預設啟用。",text2:"我們亦會以 Cookies 的方式：",item1:"分析閣下的使用模式，用來改進本網站",text3:"這些 Cookies 是可選的。如果閣下想容許所有可選 Cookies，請選擇「接受所有 Cookies」。如果閣下想禁用 Cookies，請選擇「拒絕」。",accept:"接受所有 Cookies",reject:"拒絕"},About:"關於","Allow cookies to help improve our website":"容許以 Cookies 幫助改進本網站",Appearance:"外觀","Close all tabs":"關閉所有分頁","Close app":"關閉應用程式","Close current tab":"關閉當前分頁","Close tab":"關閉分頁","Contribution Wiki":"貢獻者指南",Contributors:"貢獻者","Core contributors":"主要貢獻者",Dark:"深色",Light:"淺色",More:"更多","New tab":"新分頁",Privacy:"私隱","Privacy settings":"私隱設定","Rail Map Toolkit is opened in another window":"路綫圖工具組已於另一視窗中開啟","Refreshing is required for changes to take effect.":"重新整理頁面後變更才會生效","Resource contributors":"資源貢獻者","Resource Administrator":"資源管理員",Running:"運行中",Save:"儲存","Select an app to start your own rail map design!":"選擇一個應用程式以開始你的路綫圖設計！",Switch:"切換","Switch to":"切換至",System:"跟隨系統",Tab:"分頁","Terms and conditions":"條款及細則","Visit GitHub":"造訪 GitHub","Welcome to Rail Map Toolkit":"歡迎使用路綫圖工具組","You cannot open multiple Rail Map Toolkit at the same time. Please close this window.":"你不能同時開啟多個路綫圖工具組。請關閉當前視窗。"},C={CookiesModal:{header:"이 웹 사이트의 쿠키",text1:"RMG에서는 쿠키를 사용하여 웹 사이트 및 서비스가 제대로 작동하는지 확인합니다.이러한 쿠키는 필수이므로 기본적으로 시작됩니다.",text2:"저희도 쿠키 방식으로：",item1:"당신의 사용 패턴을 분석하여, 본 사이트를 개선합니다",text3:"이 쿠키들은 선택 사항입니다.모든 선택 가능한 쿠키를 허용하려면 '모든 쿠키 허용'을 선택하십시오.쿠키를 사용하지 않으려면 '거부'를 선택하십시오.",accept:"모든 쿠키 허용",reject:"거부"},About:"관한","Allow cookies to help improve our website":"쿠키를 사용하여 이 웹 사이트를 개선할 수 있도록 허용",Appearance:"화면 스타일","Contribution Wiki":"기여자 안내",Contributors:"기여자","Core contributors":"핵심 기여자",Dark:"다크 모드",Light:"라이트 모드","Privacy settings":"개인 정보 보호 설정","Refreshing is required for changes to take effect.":"페이지를 새로 고친 후에만 변경 가능","Resource contributors":"자원 기여자","Resource Administrator":"자원 관리자",Save:"저장","Select an app to start your own rail map design!":"응용 프로그램을 선택하여 노선도 설계를 시작하십시오.","Switch to":"곳으로 전환",System:"시스템 모드","Terms and conditions":"조항과 세칙","Visit GitHub":"GitHub 방문하기","Welcome to Rail Map Toolkit":"노선도 툴킷에 오신 것을 환영합니다"},R=(new c.I18nBuilder).use(s).withAppName("Rail Map Toolkit").withLng(c.getLanguage()).withDefaultResource(u).withResource("en",S).withResource("zh-Hans",x).withResource("zh-Hant",O).withResource("ko",C).build(),j=n("b",{rmg:{name:"Rail Map Generator",url:"/rmg/",allowedEnvs:[l.DEV,l.UAT,l.PRD],allowMultiInstances:!0},rmp:{name:"Rail Map Painter",url:"/rmp/",allowedEnvs:[l.DEV,l.UAT,l.PRD]},"rmg-palette":{name:"Palette",url:"/rmg-palette/",allowedEnvs:[l.DEV,l.UAT,l.PRD]},"rmg-palette-upload":{name:"Palette - Upload",url:"/rmg-palette/new",allowedEnvs:[l.DEV,l.UAT,l.PRD]},"rmg-components":{name:"Components",url:"/rmg-components/",allowedEnvs:[l.DEV,l.UAT]},"rmg-templates":{name:"RMG Templates",url:"/rmg-templates/",allowedEnvs:[l.DEV,l.UAT,l.PRD]},"rmg-templates-upload":{name:"RMG Templates - Upload",url:"/rmg-templates/new",allowedEnvs:[l.DEV,l.UAT,l.PRD]},"rmp-gallery":{name:"RMP Gallery",url:"/rmp-gallery/",allowedEnvs:[l.DEV,l.UAT,l.PRD]},"seed-project":{name:"Seed Project",url:"/seed-project/",allowedEnvs:[l.DEV,l.UAT]},"rmg-translate":{name:"Translate",url:"/rmg-translate/",allowedEnvs:[l.DEV,l.UAT]}}),L=n("g",(function(e){return Object.entries(j).filter((function(t){var r=a(t,2);r[0];return r[1].allowedEnvs.includes(e)})).map((function(e){return a(e,1)[0]}))})),_=function(e){return e.OPENED_TABS="rmg-home__openedTabs",e.ACTIVE_TAB="rmg-home__activeTab",e}(_||{}),I=(n("m",{GitHub:"GitHub Pages",GitLab:"GitLab Pages",Bitbucket:"Bitbucket Cloud",localhost:"localhost",unknown:"unknown"}),n("f",(function(e,t){return"https://".concat(t===l.PRD?"":"uat-","railmapgen.").concat(e===p.GITLAB?"gitlab":"github",".io")})),n("E",function(e){return e.APP_LOAD="APP_LOAD",e.OPEN_APP="OPEN_APP",e.CLOSE_APP="CLOSE_APP",e.TOGGLE_NAV_MENU="TOGGLE_NAV_MENU",e.CHANGE_LANGUAGE="CHANGE_LANGUAGE",e.SWITCH_MIRROR="SWITCH_MIRROR",e}(I||{}))),M=n("F","rmg-home:frame-"),G=f({name:"app",initialState:{isPrimary:void 0,isShowMenu:!0,openedTabs:[],activeTab:void 0},reducers:{setIsPrimary:function(e,t){e.isPrimary=t.payload},toggleMenu:function(e){e.isShowMenu=!e.isShowMenu},setOpenedTabs:function(e,t){e.openedTabs=t.payload},updateTabUrl:function(e,t){var r=t.payload,n=r.id,i=r.url;e.openedTabs=e.openedTabs.map((function(e){return e.id===n?o(o({},e),{},{url:i}):e}))},setActiveTab:function(e,t){e.activeTab=t.payload},openApp:function(e,t){var r=t.payload,n=r.appId,o=r.url,i=e.openedTabs.find((function(t){return t.id===e.activeTab})),a=e.openedTabs.find((function(e){return e.app===n}));if((null==i?void 0:i.app)===n);else if(a)e.activeTab=a.id;else{var c=crypto.randomUUID();e.openedTabs.push({id:c,app:n,url:null!=o?o:j[n].url}),e.activeTab=c}},openAppInNew:function(e,t){var r=crypto.randomUUID();e.openedTabs.push({id:r,app:t.payload}),e.activeTab=r},closeTab:function(e,t){var r=t.payload,n=e.openedTabs.slice().sort((function(e,t){var r=Object.keys(j);return r.indexOf(e.app)-r.indexOf(t.app)}));if(e.openedTabs=e.openedTabs.filter((function(e){return e.id!==r})),e.activeTab===r){var o,i=n.findIndex((function(e){return e.id===r}));e.activeTab=null===(o=n.filter((function(e){return e.id!==r}))[Math.max(0,i-1)])||void 0===o?void 0:o.id}},closeApp:function(e,t){var r,n=t.payload;if(e.openedTabs.some((function(e){return e.app===n}))){var o=Object.keys(j).filter((function(t){return e.openedTabs.some((function(e){return e.app===t}))})),i=null===(r=e.openedTabs.find((function(t){return t.id===e.activeTab})))||void 0===r?void 0:r.app,a=e.openedTabs.filter((function(e){return e.app!==n}));if(e.openedTabs=a,i===n){var c,s=o.findIndex((function(e){return e===n}));e.activeTab=null===(c=a.find((function(e){return e.app===o[Math.max(0,s-1)]})))||void 0===c?void 0:c.id}}}}}),D=G.actions,N=D.setIsPrimary,U=D.toggleMenu,V=D.setOpenedTabs,H=D.updateTabUrl,B=D.setActiveTab,W=D.openApp,F=D.openAppInNew,J=D.closeTab,z=D.closeApp;n({t:U,s:B,c:W,o:F,d:J,e:z});var Y=G.reducer,q=d(),$=h({reducer:{app:Y},middleware:function(e){return e().prepend(q.middleware)}}),K=(n("a",(function(){return m()})),n("u",v),q.startListening);window.rmgStore=$;var Q="ping",X="pong",Z=new BroadcastChannel("rmt-instance-checker");Z.addEventListener("message",(function(e){e.data===Q&&(console.log("[rmt] Received ping from another RMT instance."),Z.postMessage(X))}));var ee=function(){var e,n=(e=t().mark((function e(){var r,n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,Z.addEventListener("message",(function(e){e.data===X&&(console.warn("[rmt] Received pong from another RMT instance. This instance is not primary."),r=!1,Z.close())})),Z.postMessage(Q),n=5;case 4:if(!n--){e.next=11;break}return e.next=7,te(500);case 7:if(r){e.next=9;break}return e.abrupt("return",!1);case 9:e.next=4;break;case 11:return console.log("[rmt] This instance is primary."),e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function c(e){r(a,o,i,c,s,"next",e)}function s(e){r(a,o,i,c,s,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}}(),te=function(e){return new Promise((function(t){setTimeout(t,e,"Timeout after ".concat(e/1e3," seconds"))}))};function re(e){!function(e){try{var t=window.localStorage.getItem(_.OPENED_TABS),r=window.localStorage.getItem("rmg-home__openedApps");if(t){var n=JSON.parse(t);if(Array.isArray(n)){var o=n.filter((function(e){return e.app in j}));e.dispatch(V(o))}else console.warn("initOpenedTabs():: Cannot parse invalid opened tabs state from local storage")}else if(r){var i=JSON.parse(r);if(Array.isArray(i)&&"string"==typeof i[0]){var a=i.map((function(e){return{id:crypto.randomUUID(),app:e}}));e.dispatch(V(a))}else console.warn("initOpenedTabs():: cannot parse invalid opened apps state from local storage")}}catch(c){console.warn("initOpenedTabs():: cannot parse opened apps state from local storage",c)}}(e),function(e){var t,r=window.localStorage.getItem(_.ACTIVE_TAB),n=e.getState().app.openedTabs;r&&n.some((function(e){return e.id===r}))?e.dispatch(B(r)):e.dispatch(B(null===(t=n[0])||void 0===t?void 0:t.id))}(e),K({predicate:function(e,t,r){return JSON.stringify(t.app.openedTabs)!==JSON.stringify(r.app.openedTabs)},effect:function(e,t){window.localStorage.setItem(_.OPENED_TABS,JSON.stringify(t.getState().app.openedTabs))}}),K({predicate:function(e,t,r){return t.app.activeTab!==r.app.activeTab},effect:function(e,t){var r=t.getState().app.activeTab;void 0!==r&&window.localStorage.setItem(_.ACTIVE_TAB,r)}}),function(e){var t=new URLSearchParams(window.location.search).get("app");console.log("openSearchedApp():: searchParams app=".concat(t)),L(c.getEnv()).includes(t)?e.dispatch(W({appId:t})):console.warn("openSearchedApp():: app ".concat(t," not found"))}(e),ee().then((function(t){e.dispatch(N(t)),t||e.dispatch(y())}))}var ne=b.lazy((function(){return function(){return i.import("./app-root-legacy-1110124f.js")}()}));c.ready().then((function(){re($),g(document.getElementById("root")).render(w.jsx(b.StrictMode,{children:w.jsx(T,{store:$,children:w.jsx(k,{i18n:R,children:w.jsx(A,{children:w.jsx(E,{suspenseFallback:w.jsx(P,{isIndeterminate:!0}),allowReset:!0,children:w.jsx(ne,{})})})})})})),c.onAppOpen((function(t){var r=L(c.getEnv());"object"===e(t)?r.includes(t.appId)&&$.dispatch(W({appId:t.appId,url:t.url})):r.includes(t)&&$.dispatch(W({appId:t}))})),c.onAppClose((function(e){L(c.getEnv()).includes(e)&&$.dispatch(z(e))})),c.onUrlUpdate((function(e,t){if(t){var r=t.slice(M.length);console.log("Received URL update for frame=".concat(r,", url=").concat(e)),$.dispatch(H({id:r,url:e}))}})),c.event(I.APP_LOAD,{openedApps:$.getState().app.openedTabs.map((function(e){return e.app}))})}))}}}))}();
