import{u as mt,j as p,I as Zt,T as en,P as tn,a as nn,B as rn,b as on,c as an,d as sn,e as ln,f as un,A as cn,M as dn,g as fn,h as pn,i as gn,k as hn,l as F,m as mn,n as Ke,o as D,p as vt,L as Je,q as vn,r as yn,s as bn,t as wn,F as xn,v as Sn,S as On,w as yt,x as Cn,y as we,z as Ye,C as _n,D as Rn,E as En,G as An,H as bt,J as Pn,K as Q,N as Tn,O as Ln,Q as jn,R as kn}from"./chakra-ri5b5yy4.js";import{i as $n,d as Mn,e as In,f as Nn,h as Dn,u as Fn,j as Bn,a as Un,r as y,b as Vn,k as wt,P as zn,I as Hn}from"./react-4N00T80C.js";function al(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const Gn="modulepreload",Wn=function(n){return"/"+n},qe={},Kn=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link");o=Promise.all(t.map(a=>{if(a=Wn(a),a in qe)return;qe[a]=!0;const s=a.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const d=i[f];if(d.href===a&&(!s||d.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(a,'"]').concat(l)))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":Gn,s||(c.as="script",c.crossOrigin=""),c.href=a,document.head.appendChild(c),s)return new Promise((f,d)=>{c.addEventListener("load",f),c.addEventListener("error",()=>d(new Error("Unable to preload CSS for ".concat(a))))})}))}return o.then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},xt=n=>new Promise(e=>{setTimeout(e,n,"Timeout after ".concat(n/1e3," seconds"))});var v;(function(n){n.DEV="DEV",n.UAT="UAT",n.PRD="PRD"})(v||(v={}));var St=function(n,e,t,r){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?i(c.value):o(c.value).then(s,l)}u((r=r.apply(n,e||[])).next())})};let De,Fe,Be,Ue,Ve;const Ot=()=>{De=!1,Fe="rmg-unknown",Be="unknown",Ue=v.PRD,Ve="unknown"},Jn=()=>St(void 0,void 0,void 0,function*(){const n=window.location.pathname.split("/")[1],e=n?"/".concat(n,"/info.json"):"/info.json",t=yield fetch(e);if(t.ok){const r=yield t.json();Fe=r.component,Be=r.version,Ue=r.environment,Ve=r.instance}else throw new Error("Failed to fetch config from ".concat(e))}),Yn=()=>St(void 0,void 0,void 0,function*(){try{console.log("[rmg-runtime] Loading config...");const n=yield Promise.race([Jn(),xt(10*1e3)]);n?console.error("[rmg-runtime] Failed to load config.",n):(De=!0,console.log("[rmg-runtime] Config loaded!"))}catch(n){console.error("[rmg-runtime] Failed to load config.",n)}}),qn=()=>De,Qn=()=>Fe,Xn=()=>Be,Zn=()=>Ue,er=()=>Ve;Ot();const T={loadWithTimeout:Yn,isInitialised:qn,getComponent:Qn,getVersion:Xn,getEnvironment:Zn,getInstance:er,_resetConfig:Ot};window.dataLayer=window.dataLayer||[];const tr=()=>{const n=document.createElement("script");n.async=!0,n.src="https://www.googletagmanager.com/gtag/js?id=G-2HP8Y4MRRQ",document.head.append(n)};function Ee(...n){if(T.getEnvironment()!==v.DEV)return window.dataLayer.push(arguments);console.log("[rmg-runtime] Not going to send event in DEV environment",n)}const nr=(n,e)=>{Ee("event",n,e)},rr=()=>{tr(),Ee("js",new Date),Ee("config","G-2HP8Y4MRRQ",{appName:T.getComponent(),version:T.getVersion(),environment:T.getEnvironment(),instance:T.getInstance()})},de={init:rr,customEvent:nr},or="rmg-runtime-channel",le={};let X;try{X=new BroadcastChannel(or),X.onmessage=n=>{var e;const{event:t,data:r,frameId:o}=n.data;(e=le[t])===null||e===void 0||e.forEach(i=>i(r,o))}}catch(n){console.warn("[rmg-runtime] Failed to initiate broadcast channel. Some features may be unavailable.",n)}const ir=(n,e,t)=>{var r;t&&console.log("[rmg-runtime] Broadcasting event ".concat(n," with data"),e),X==null||X.postMessage({event:n,data:e,frameId:(r=window.frameElement)===null||r===void 0?void 0:r.id})},ar=(n,e)=>{var t;n in le?(t=le[n])===null||t===void 0||t.push(e):le[n]=[e]},E={postEvent:ir,onMessage:ar},Ct="TOGGLE_NAV_MENU",_t="OPEN_APP",Rt="CLOSE_APP",Et="UPDATE_URL",ue=()=>!window.frameElement,sr=()=>{var n;return!!(!((n=window.frameElement)===null||n===void 0)&&n.closest(".show-menu"))},lr=()=>{if(!ue()){const e=document.createElement("style");e.textContent="body{padding: 0;}",document.head.appendChild(e)}const n=document.createElement("style");n.textContent=".rmg-window__header:not(.rmg-window__app-clip-header){margin-left: 40px;}",!ue()&&!sr()&&document.head.appendChild(n),ue()||E.onMessage(Ct,e=>{if(e)try{document.head.removeChild(n)}catch(t){console.warn("[rmg-runtime] Unable to remove indent style from RmgWindowHeader",t)}else document.head.appendChild(n)})},ur=(n,e)=>{E.postEvent(_t,{appId:n,url:e})},cr=n=>{E.postEvent(Rt,n)},dr=n=>{E.postEvent(Et,n)},fr=n=>{E.onMessage(_t,n)},pr=n=>{E.onMessage(Rt,n)},gr=n=>{E.onMessage(Et,n)},hr=n=>{E.postEvent(Ct,n,!0)},k={isStandaloneWindow:ue,injectUITools:lr,openApp:ur,onAppOpen:fr,closeApp:cr,onAppClose:pr,updateUrl:dr,onUrlUpdate:gr,toggleNavMenu:hr},At="rmg-runtime__language",Pt="rmg-runtime__colourMode",fe="rmg-runtime__allowAnalytics",Tt="SET_LANGUAGE",Lt="SET_COLOUR_MODE",mr=n=>{E.postEvent(Tt,n),window.localStorage.setItem(At,n)},vr=()=>window.localStorage.getItem(At)||"en",yr=n=>{E.onMessage(Tt,n)},jt=["light","dark","system"],br=n=>{jt.includes(n)&&(E.postEvent(Lt,n,!0),window.localStorage.setItem(Pt,n))},wr=()=>{const n=window.localStorage.getItem(Pt);return n&&jt.includes(n)?n:"system"},xr=n=>{E.onMessage(Lt,n)},Sr=()=>window.localStorage.getItem(fe)!==null,kt=()=>window.localStorage.getItem(fe)==="true",Or=n=>{const e=kt();return n?(e||(window.localStorage.setItem(fe,n.toString()),de.init()),{refreshRequired:!1}):e?(window.localStorage.setItem(fe,n.toString()),{refreshRequired:!0}):{refreshRequired:!1}},L={setLanguage:mr,getLanguage:vr,onLanguageChange:yr,setColourMode:br,getColourMode:wr,onColourModeChange:xr,isAnalyticsQADone:Sr,isAllowAnalytics:kt,allowAnalytics:Or},Cr=new Date().getTime();function _r(){const n=T.getComponent(),e=window.localStorage.getItem(n+"__startTime");return e===null?new Date().getTime()-Cr:new Date().getTime()-Number(e)}const Rr={getMsSinceStartUp:_r},ce={},W=()=>{const n=T.getComponent();if(n==="rmg-unknown")throw new Error("[rmg-runtime] Unable to clear storage for unknown app");return n==="railmapgen.github.io"?"rmg-home":n};window.addEventListener("storage",n=>{var e;const{key:t,newValue:r}=n;t&&((e=ce[t])===null||e===void 0||e.forEach(o=>o(r)))});const Er=(n,e)=>{var t;const r="".concat(W(),"__").concat(n);r in ce?(t=ce[r])===null||t===void 0||t.push(e):ce[r]=[e]},Ar=n=>{const e=W();return window.localStorage.getItem("".concat(e,"__").concat(n))},Pr=()=>{const n=W(),e={};let t=0;for(;t<window.localStorage.length;){const r=window.localStorage.key(t);if(r!=null&&r.startsWith(n+"__")){const o=window.localStorage.getItem(r);o&&(e[r]=o)}t++}return e},Tr=(n,e)=>{const t=W();window.localStorage.setItem("".concat(t,"__").concat(n),e)},Lr=n=>{const e=W();window.localStorage.removeItem("".concat(e,"__").concat(n))},jr=()=>{const n=W();let e=0;for(;e<window.localStorage.length;){const t=window.localStorage.key(e);t!=null&&t.startsWith(n+"__")?(window.localStorage.removeItem(t),console.log("[rmg-runtime] Removed item ".concat(t))):e++}},U={on:Er,get:Ar,getAll:Pr,set:Tr,remove:Lr,clear:jr},kr={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console&&console[n]&&console[n].apply(console,e)}};class pe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||kr,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,o){return o&&!this.debug?null:(typeof e[0]=="string"&&(e[0]="".concat(r).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}create(e){return new pe(this.logger,{prefix:"".concat(this.prefix,":").concat(e,":"),...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new pe(this.logger,e)}}var M=new pe;class xe{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]=this.observers[r]||[],this.observers[r].push(t)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e]=this.observers[e].filter(r=>r!==t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];this.observers[e]&&[].concat(this.observers[e]).forEach(a=>{a(...r)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(a=>{a.apply(a,[e,...r])})}}function q(){let n,e;const t=new Promise((r,o)=>{n=r,e=o});return t.resolve=n,t.reject=e,t}function Qe(n){return n==null?"":""+n}function $r(n,e,t){n.forEach(r=>{e[r]&&(t[r]=e[r])})}function ze(n,e,t){function r(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function o(){return!n||typeof n=="string"}const i=typeof e!="string"?[].concat(e):e.split(".");for(;i.length>1;){if(o())return{};const a=r(i.shift());!n[a]&&t&&(n[a]=new t),Object.prototype.hasOwnProperty.call(n,a)?n=n[a]:n={}}return o()?{}:{obj:n,k:r(i.shift())}}function Xe(n,e,t){const{obj:r,k:o}=ze(n,e,Object);r[o]=t}function Mr(n,e,t,r){const{obj:o,k:i}=ze(n,e,Object);o[i]=o[i]||[],r&&(o[i]=o[i].concat(t)),r||o[i].push(t)}function ge(n,e){const{obj:t,k:r}=ze(n,e);if(t)return t[r]}function Ir(n,e,t){const r=ge(n,t);return r!==void 0?r:ge(e,t)}function $t(n,e,t){for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?typeof n[r]=="string"||n[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?t&&(n[r]=e[r]):$t(n[r],e[r],t):n[r]=e[r]);return n}function V(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Nr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Dr(n){return typeof n=="string"?n.replace(/[&<>"'\/]/g,e=>Nr[e]):n}const Fr=[" ",",","?","!",";"];function Br(n,e,t){e=e||"",t=t||"";const r=Fr.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(r.length===0)return!0;const o=new RegExp("(".concat(r.map(a=>a==="?"?"\\?":a).join("|"),")"));let i=!o.test(n);if(!i){const a=n.indexOf(t);a>0&&!o.test(n.substring(0,a))&&(i=!0)}return i}function he(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return n[e];const r=e.split(t);let o=n;for(let i=0;i<r.length;++i){if(!o||typeof o[r[i]]=="string"&&i+1<r.length)return;if(o[r[i]]===void 0){let a=2,s=r.slice(i,i+a).join(t),l=o[s];for(;l===void 0&&r.length>i+a;)a++,s=r.slice(i,i+a).join(t),l=o[s];if(l===void 0)return;if(l===null)return null;if(e.endsWith(s)){if(typeof l=="string")return l;if(s&&typeof l[s]=="string")return l[s]}const u=r.slice(i+a).join(t);return u?he(l,u,t):void 0}o=o[r[i]]}return o}function me(n){return n&&n.indexOf("_")>0?n.replace("_","-"):n}class Ze extends xe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,a=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let s=[e,t];r&&typeof r!="string"&&(s=s.concat(r)),r&&typeof r=="string"&&(s=s.concat(i?r.split(i):r)),e.indexOf(".")>-1&&(s=e.split("."));const l=ge(this.data,s);return l||!a||typeof r!="string"?l:he(this.data&&this.data[e]&&this.data[e][t],r,i)}addResource(e,t,r,o){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let s=[e,t];r&&(s=s.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(s=e.split("."),o=t,t=s[1]),this.addNamespaces(t),Xe(this.data,s,o),i.silent||this.emit("added",e,t,r,o)}addResources(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(typeof r[i]=="string"||Object.prototype.toString.apply(r[i])==="[object Array]")&&this.addResource(e,t,i,r[i],{silent:!0});o.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,o,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},s=[e,t];e.indexOf(".")>-1&&(s=e.split("."),o=r,r=t,t=s[1]),this.addNamespaces(t);let l=ge(this.data,s)||{};o?$t(l,r,i):l={...l,...r},Xe(this.data,s,l),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(o=>t[o]&&Object.keys(t[o]).length>0)}toJSON(){return this.data}}var Mt={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,o){return n.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,t,r,o))}),e}};const et={};class ve extends xe{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),$r(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=M.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return r&&r.res!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const o=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,s=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Br(e,r,o);if(a&&!s){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:i};const u=e.split(r);(r!==o||r===o&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(o)}return typeof i=="string"&&(i=[i]),{key:e,namespaces:i}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const o=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:s}=this.extractFromKey(e[e.length-1],t),l=s[s.length-1],u=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const x=t.nsSeparator||this.options.nsSeparator;return o?{res:"".concat(l).concat(x).concat(a),usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:"".concat(l).concat(x).concat(a)}return o?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:a}const f=this.resolve(e,t);let d=f&&f.res;const h=f&&f.usedKey||a,g=f&&f.exactUsedKey||a,m=Object.prototype.toString.apply(d),b=["[object Number]","[object Function]","[object RegExp]"],O=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,w=!this.i18nFormat||this.i18nFormat.handleAsObject;if(w&&d&&(typeof d!="string"&&typeof d!="boolean"&&typeof d!="number")&&b.indexOf(m)<0&&!(typeof O=="string"&&m==="[object Array]")){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const x=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,d,{...t,ns:s}):"key '".concat(a," (").concat(this.language,")' returned an object instead of string.");return o?(f.res=x,f.usedParams=this.getUsedParamsDetails(t),f):x}if(i){const x=m==="[object Array]",A=x?[]:{},j=x?g:h;for(const _ in d)if(Object.prototype.hasOwnProperty.call(d,_)){const ie="".concat(j).concat(i).concat(_);A[_]=this.translate(ie,{...t,joinArrays:!1,ns:s}),A[_]===ie&&(A[_]=d[_])}d=A}}else if(w&&typeof O=="string"&&m==="[object Array]")d=d.join(O),d&&(d=this.extendTranslation(d,e,t,r));else{let x=!1,A=!1;const j=t.count!==void 0&&typeof t.count!="string",_=ve.hasDefaultValue(t),ie=j?this.pluralResolver.getSuffix(u,t.count,t):"",Qt=t.ordinal&&j?this.pluralResolver.getSuffix(u,t.count,{ordinal:!1}):"",K=t["defaultValue".concat(ie)]||t["defaultValue".concat(Qt)]||t.defaultValue;!this.isValidLookup(d)&&_&&(x=!0,d=K),this.isValidLookup(d)||(A=!0,d=a);const Xt=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&A?void 0:d,J=_&&K!==d&&this.options.updateMissing;if(A||x||J){if(this.logger.log(J?"updateKey":"missingKey",u,l,a,J?K:d),i){const P=this.resolve(a,{...t,keySeparator:!1});P&&P.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Y=[];const ae=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ae&&ae[0])for(let P=0;P<ae.length;P++)Y.push(ae[P]);else this.options.saveMissingTo==="all"?Y=this.languageUtils.toResolveHierarchy(t.lng||this.language):Y.push(t.lng||this.language);const He=(P,B,Ge)=>{const We=_&&Ge!==d?Ge:Xt;this.options.missingKeyHandler?this.options.missingKeyHandler(P,l,B,We,J,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(P,l,B,We,J,t),this.emit("missingKey",P,l,B,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&j?Y.forEach(P=>{this.pluralResolver.getSuffixes(P,t).forEach(B=>{He([P],a+B,t["defaultValue".concat(B)]||K)})}):He(Y,a,K))}d=this.extendTranslation(d,e,t,f,r),A&&d===a&&this.options.appendNamespaceToMissingKey&&(d="".concat(l,":").concat(a)),(A||x)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?d=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(l,":").concat(a):a,x?d:void 0):d=this.options.parseMissingKeyHandler(d))}return o?(f.res=d,f.usedParams=this.getUsedParamsDetails(t),f):d}extendTranslation(e,t,r,o,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=typeof e=="string"&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const d=e.match(this.interpolator.nestingRegexp);c=d&&d.length}let f=r.replace&&typeof r.replace!="string"?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language,r),u){const d=e.match(this.interpolator.nestingRegexp),h=d&&d.length;c<h&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&o&&o.res&&(r.lng=o.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var d=arguments.length,h=new Array(d),g=0;g<d;g++)h[g]=arguments[g];return i&&i[0]===h[0]&&!r.context?(a.logger.warn("It seems you are nesting recursively key: ".concat(h[0]," in key: ").concat(t[0])),null):a.translate(...h,t)},r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,l=typeof s=="string"?[s]:s;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=Mt.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,o,i,a,s;return typeof e=="string"&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,t),c=u.key;o=c;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const d=t.count!==void 0&&typeof t.count!="string",h=d&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),g=t.context!==void 0&&(typeof t.context=="string"||typeof t.context=="number")&&t.context!=="",m=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);f.forEach(b=>{this.isValidLookup(r)||(s=b,!et["".concat(m[0],"-").concat(b)]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(et["".concat(m[0],"-").concat(b)]=!0,this.logger.warn('key "'.concat(o,'" for languages "').concat(m.join(", "),'" won\'t get resolved as namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(O=>{if(this.isValidLookup(r))return;a=O;const w=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(w,c,O,b,t);else{let x;d&&(x=this.pluralResolver.getSuffix(O,t.count,t));const A="".concat(this.options.pluralSeparator,"zero"),j="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(d&&(w.push(c+x),t.ordinal&&x.indexOf(j)===0&&w.push(c+x.replace(j,this.options.pluralSeparator)),h&&w.push(c+A)),g){const _="".concat(c).concat(this.options.contextSeparator).concat(t.context);w.push(_),d&&(w.push(_+x),t.ordinal&&x.indexOf(j)===0&&w.push(_+x.replace(j,this.options.pluralSeparator)),h&&w.push(_+A))}}let oe;for(;oe=w.pop();)this.isValidLookup(r)||(i=oe,r=this.getResource(O,b,oe,t))}))})}),{res:r,usedKey:o,exactUsedKey:i,usedLng:a,usedNS:s}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,r,o):this.resourceStore.getResource(e,t,r,o)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&typeof e.replace!="string";let o=r?e.replace:e;if(r&&typeof e.count<"u"&&(o.count=e.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(const i of t)delete o[i]}return o}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}function Ce(n){return n.charAt(0).toUpperCase()+n.slice(1)}class tt{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=M.create("languageUtils")}getScriptPartFromCode(e){if(e=me(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=me(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(typeof e=="string"&&e.indexOf("-")>-1){const t=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(o=>o.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),t.indexOf(r[1].toLowerCase())>-1&&(r[1]=Ce(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),t.indexOf(r[1].toLowerCase())>-1&&(r[1]=Ce(r[1].toLowerCase())),t.indexOf(r[2].toLowerCase())>-1&&(r[2]=Ce(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(t=o)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(i=>{if(i===o)return i;if(!(i.indexOf("-")<0&&o.indexOf("-")<0)&&i.indexOf(o)===0)return i})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),typeof e=="string"&&(e=[e]),Object.prototype.toString.apply(e)==="[object Array]")return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),o=[],i=a=>{a&&(this.isSupportedCode(a)?o.push(a):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(a)))};return typeof e=="string"&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):typeof e=="string"&&i(this.formatLanguageCode(e)),r.forEach(a=>{o.indexOf(a)<0&&i(this.formatLanguageCode(a))}),o}}let Ur=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Vr={1:function(n){return+(n>1)},2:function(n){return+(n!=1)},3:function(n){return 0},4:function(n){return n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2},5:function(n){return n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5},6:function(n){return n==1?0:n>=2&&n<=4?1:2},7:function(n){return n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2},8:function(n){return n==1?0:n==2?1:n!=8&&n!=11?2:3},9:function(n){return+(n>=2)},10:function(n){return n==1?0:n==2?1:n<7?2:n<11?3:4},11:function(n){return n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3},12:function(n){return+(n%10!=1||n%100==11)},13:function(n){return+(n!==0)},14:function(n){return n==1?0:n==2?1:n==3?2:3},15:function(n){return n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2},16:function(n){return n%10==1&&n%100!=11?0:n!==0?1:2},17:function(n){return n==1||n%10==1&&n%100!=11?0:1},18:function(n){return n==0?0:n==1?1:2},19:function(n){return n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3},20:function(n){return n==1?0:n==0||n%100>0&&n%100<20?1:2},21:function(n){return n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0},22:function(n){return n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3}};const zr=["v1","v2","v3"],Hr=["v4"],nt={zero:0,one:1,two:2,few:3,many:4,other:5};function Gr(){const n={};return Ur.forEach(e=>{e.lngs.forEach(t=>{n[t]={numbers:e.nr,plurals:Vr[e.fc]}})}),n}class Wr{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=M.create("pluralResolver"),(!this.options.compatibilityJSON||Hr.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Gr()}addRule(e,t){this.rules[e]=t}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(me(e),{type:t.ordinal?"ordinal":"cardinal"})}catch(r){return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,t);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(o=>"".concat(t).concat(o))}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,t);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((o,i)=>nt[o]-nt[i]).map(o=>"".concat(this.options.prepend).concat(t.ordinal?"ordinal".concat(this.options.prepend):"").concat(o)):r.numbers.map(o=>this.getSuffix(e,o,t)):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=this.getRule(e,r);return o?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(r.ordinal?"ordinal".concat(this.options.prepend):"").concat(o.select(t)):this.getSuffixRetroCompatible(o,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}getSuffixRetroCompatible(e,t){const r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let o=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));const i=()=>this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString();return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!zr.includes(this.options.compatibilityJSON)}}function rt(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=Ir(n,e,t);return!i&&o&&typeof t=="string"&&(i=he(n,t,r),i===void 0&&(i=he(e,t,r))),i}class Kr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=M.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const t=e.interpolation;this.escape=t.escape!==void 0?t.escape:Dr,this.escapeValue=t.escapeValue!==void 0?t.escapeValue:!0,this.useRawValueToEscape=t.useRawValueToEscape!==void 0?t.useRawValueToEscape:!1,this.prefix=t.prefix?V(t.prefix):t.prefixEscaped||"{{",this.suffix=t.suffix?V(t.suffix):t.suffixEscaped||"}}",this.formatSeparator=t.formatSeparator?t.formatSeparator:t.formatSeparator||",",this.unescapePrefix=t.unescapeSuffix?"":t.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":t.unescapeSuffix||"",this.nestingPrefix=t.nestingPrefix?V(t.nestingPrefix):t.nestingPrefixEscaped||V("$t("),this.nestingSuffix=t.nestingSuffix?V(t.nestingSuffix):t.nestingSuffixEscaped||V(")"),this.nestingOptionsSeparator=t.nestingOptionsSeparator?t.nestingOptionsSeparator:t.nestingOptionsSeparator||",",this.maxReplaces=t.maxReplaces?t.maxReplaces:1e3,this.alwaysFormat=t.alwaysFormat!==void 0?t.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");const t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");const r="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(r,"g")}interpolate(e,t,r,o){let i,a,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(g){return g.replace(/\$/g,"$$$$")}const c=g=>{if(g.indexOf(this.formatSeparator)<0){const w=rt(t,l,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,r,{...o,...t,interpolationkey:g}):w}const m=g.split(this.formatSeparator),b=m.shift().trim(),O=m.join(this.formatSeparator).trim();return this.format(rt(t,l,b,this.options.keySeparator,this.options.ignoreJSONStructure),O,r,{...o,...t,interpolationkey:b})};this.resetRegExp();const f=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,d=o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>u(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?u(this.escape(g)):u(g)}].forEach(g=>{for(s=0;i=g.regex.exec(e);){const m=i[1].trim();if(a=c(m),a===void 0)if(typeof f=="function"){const O=f(e,i,o);a=typeof O=="string"?O:""}else if(o&&Object.prototype.hasOwnProperty.call(o,m))a="";else if(d){a=i[0];continue}else this.logger.warn("missed to pass in variable ".concat(m," for interpolating ").concat(e)),a="";else typeof a!="string"&&!this.useRawValueToEscape&&(a=Qe(a));const b=g.safeValue(a);if(e=e.replace(i[0],b),d?(g.regex.lastIndex+=a.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,i,a;function s(l,u){const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const f=l.split(new RegExp("".concat(c,"[ ]*{")));let d="{".concat(f[1]);l=f[0],d=this.interpolate(d,a);const h=d.match(/'/g),g=d.match(/"/g);(h&&h.length%2===0&&!g||g.length%2!==0)&&(d=d.replace(/'/g,'"'));try{a=JSON.parse(d),u&&(a={...u,...a})}catch(m){return this.logger.warn("failed parsing options string in nesting for key ".concat(l),m),"".concat(l).concat(c).concat(d)}return delete a.defaultValue,l}for(;o=this.nestingRegexp.exec(e);){let l=[];a={...r},a=a.replace&&typeof a.replace!="string"?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let u=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){const c=o[1].split(this.formatSeparator).map(f=>f.trim());o[1]=c.shift(),l=c,u=!0}if(i=t(s.call(this,o[1].trim(),a),a),i&&o[0]===e&&typeof i!="string")return i;typeof i!="string"&&(i=Qe(i)),i||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(e)),i=""),u&&(i=l.reduce((c,f)=>this.format(c,f,r.lng,{...r,interpolationkey:o[1].trim()}),i.trim())),e=e.replace(o[0],i),this.regexp.lastIndex=0}return e}}function Jr(n){let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);e==="currency"&&o.indexOf(":")<0?t.currency||(t.currency=o.trim()):e==="relativetime"&&o.indexOf(":")<0?t.range||(t.range=o.trim()):o.split(";").forEach(a=>{if(!a)return;const[s,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,"");t[s.trim()]||(t[s.trim()]=u),u==="false"&&(t[s.trim()]=!1),u==="true"&&(t[s.trim()]=!0),isNaN(u)||(t[s.trim()]=parseInt(u,10))})}return{formatName:e,formatOptions:t}}function z(n){const e={};return function(r,o,i){const a=o+JSON.stringify(i);let s=e[a];return s||(s=n(me(o),i),e[a]=s),s(r)}}class Yr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=M.create("formatter"),this.options=e,this.formats={number:z((t,r)=>{const o=new Intl.NumberFormat(t,{...r});return i=>o.format(i)}),currency:z((t,r)=>{const o=new Intl.NumberFormat(t,{...r,style:"currency"});return i=>o.format(i)}),datetime:z((t,r)=>{const o=new Intl.DateTimeFormat(t,{...r});return i=>o.format(i)}),relativetime:z((t,r)=>{const o=new Intl.RelativeTimeFormat(t,{...r});return i=>o.format(i,r.range||"day")}),list:z((t,r)=>{const o=new Intl.ListFormat(t,{...r});return i=>o.format(i)})},this.init(e)}init(e){const r=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=z(t)}format(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return t.split(this.formatSeparator).reduce((s,l)=>{const{formatName:u,formatOptions:c}=Jr(l);if(this.formats[u]){let f=s;try{const d=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},h=d.locale||d.lng||o.locale||o.lng||r;f=this.formats[u](s,h,{...c,...o,...d})}catch(d){this.logger.warn(d)}return f}else this.logger.warn("there was no format function for ".concat(u));return s},e)}}function qr(n,e){n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)}class Qr extends xe{constructor(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=M.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,o.backend,o)}queueLoad(e,t,r,o){const i={},a={},s={},l={};return e.forEach(u=>{let c=!0;t.forEach(f=>{const d="".concat(u,"|").concat(f);!r.reload&&this.store.hasResourceBundle(u,f)?this.state[d]=2:this.state[d]<0||(this.state[d]===1?a[d]===void 0&&(a[d]=!0):(this.state[d]=1,c=!1,a[d]===void 0&&(a[d]=!0),i[d]===void 0&&(i[d]=!0),l[f]===void 0&&(l[f]=!0)))}),c||(s[u]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(e,t,r){const o=e.split("|"),i=o[0],a=o[1];t&&this.emit("failedLoading",i,a,t),r&&this.store.addResourceBundle(i,a,r),this.state[e]=t?-1:2;const s={};this.queue.forEach(l=>{Mr(l.loaded,[i],a),qr(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{s[u]||(s[u]={});const c=l.loaded[u];c.length&&c.forEach(f=>{s[u][f]===void 0&&(s[u][f]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(l=>!l.done)}read(e,t,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:o,wait:i,callback:a});return}this.readingCalls++;const s=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&c&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,o+1,i*2,a)},i);return}a(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,t);u&&typeof u.then=="function"?u.then(c=>s(null,c)).catch(s):s(null,u)}catch(u){s(u)}return}return l(e,t,s)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();typeof e=="string"&&(e=this.languageUtils.toResolveHierarchy(e)),typeof t=="string"&&(t=[t]);const i=this.queueLoad(e,t,r,o);if(!i.toLoad.length)return i.pending.length||o(),null;i.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),o=r[0],i=r[1];this.read(o,i,"read",void 0,void 0,(a,s)=>{a&&this.logger.warn("".concat(t,"loading namespace ").concat(i," for language ").concat(o," failed"),a),!a&&s&&this.logger.log("".concat(t,"loaded namespace ").concat(i," for language ").concat(o),s),this.loaded(e,a,s)})}saveMissing(e,t,r,o,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn('did not save key "'.concat(r,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...a,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(e,t,r,o,l):c=u(e,t,r,o),c&&typeof c.then=="function"?c.then(f=>s(null,f)).catch(s):s(null,c)}catch(c){s(c)}else u(e,t,r,o,s,l)}!e||!e[0]||this.store.addResource(e[0],t,r,o)}}}function ot(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){let t={};if(typeof e[1]=="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(o=>{t[o]=r[o]})}return t},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function it(n){return typeof n.ns=="string"&&(n.ns=[n.ns]),typeof n.fallbackLng=="string"&&(n.fallbackLng=[n.fallbackLng]),typeof n.fallbackNS=="string"&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n}function se(){}function Xr(n){Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})}class ne extends xe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=it(e),this.services={},this.logger=M,this.modules={external:[]},Xr(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;typeof t=="function"&&(r=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(typeof t.ns=="string"?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const o=ot();this.options={...o,...this.options,...it(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...o.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);function i(c){return c?typeof c=="function"?new c:c:null}if(!this.options.isClone){this.modules.logger?M.init(i(this.modules.logger),this.options):M.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=Yr);const f=new tt(this.options);this.store=new Ze(this.options.resources,this.options);const d=this.services;d.logger=M,d.resourceStore=this.store,d.languageUtils=f,d.pluralResolver=new Wr(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(d.formatter=i(c),d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new Kr(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new Qr(i(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(h){for(var g=arguments.length,m=new Array(g>1?g-1:0),b=1;b<g;b++)m[b-1]=arguments[b];e.emit(h,...m)}),this.modules.languageDetector&&(d.languageDetector=i(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=i(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new ve(this.services,this.options),this.translator.on("*",function(h){for(var g=arguments.length,m=new Array(g>1?g-1:0),b=1;b<g;b++)m[b-1]=arguments[b];e.emit(h,...m)}),this.modules.external.forEach(h=>{h.init&&h.init(this)})}if(this.format=this.options.interpolation.format,r||(r=se),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return e.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return e.store[c](...arguments),e}});const l=q(),u=()=>{const c=(f,d)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(d),r(f,d)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:se;const o=typeof e=="string"?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(o&&o.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],a=s=>{if(!s||s==="cimode")return;this.services.languageUtils.toResolveHierarchy(s).forEach(u=>{u!=="cimode"&&i.indexOf(u)<0&&i.push(u)})};o?a(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>a(l)),this.options.preload&&this.options.preload.forEach(s=>a(s)),this.services.backendConnector.load(i,this.options.ns,s=>{!s&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(s)})}else r(null)}reloadResources(e,t,r){const o=q();return e||(e=this.languages),t||(t=this.options.ns),r||(r=se),this.services.backendConnector.reload(e,t,i=>{o.resolve(),r(i)}),o}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Mt.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const o=q();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,o.resolve(function(){return r.t(...arguments)}),t&&t(l,function(){return r.t(...arguments)})},s=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{a(c,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),o}getFixedT(e,t,r){var o=this;const i=function(a,s){let l;if(typeof s!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),f=2;f<u;f++)c[f-2]=arguments[f];l=o.options.overloadTranslationOptionHandler([a,s].concat(c))}else l={...s};l.lng=l.lng||i.lng,l.lngs=l.lngs||i.lngs,l.ns=l.ns||i.ns,l.keyPrefix=l.keyPrefix||r||i.keyPrefix;const d=o.options.keySeparator||".";let h;return l.keyPrefix&&Array.isArray(a)?h=a.map(g=>"".concat(l.keyPrefix).concat(d).concat(g)):h=l.keyPrefix?"".concat(l.keyPrefix).concat(d).concat(a):a,o.t(h,l)};return typeof e=="string"?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(s,l)=>{const u=this.services.backendConnector.state["".concat(s,"|").concat(l)];return u===-1||u===2};if(t.precheck){const s=t.precheck(this,a);if(s!==void 0)return s}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!o||a(i,e)))}loadNamespaces(e,t){const r=q();return this.options.ns?(typeof e=="string"&&(e=[e]),e.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),t&&t(o)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=q();typeof e=="string"&&(e=[e]);const o=this.options.preload||[],i=e.filter(a=>o.indexOf(a)<0);return i.length?(this.options.preload=o.concat(i),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new tt(ot());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new ne(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:se;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const o={...this.options,...e,isClone:!0},i=new ne(o);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(s=>{i[s]=this[s]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new Ze(this.store.data,o),i.services.resourceStore=i.store),i.translator=new ve(i.services,o),i.translator.on("*",function(s){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];i.emit(s,...u)}),i.init(o,t),i.translator.options=o,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const C=ne.createInstance();C.createInstance=ne.createInstance;C.createInstance;C.dir;C.init;C.loadResources;C.reloadResources;C.use;C.changeLanguage;C.getFixedT;C.t;C.exists;C.setDefaultNamespace;C.hasLoadedNamespace;C.loadNamespaces;C.loadLanguages;let H;const Zr=()=>H,eo=n=>{L.onLanguageChange(e=>n.changeLanguage(e))};class to{constructor(){this._appName="RMG",this._lng=void 0,this._defaultResources={},this._resources={}}use(e){return C.use(e),this}withAppName(e){return this._appName=e,this}withLng(e){return this._lng=e,this}withDefaultResource(e){return Object.entries(e).forEach(([t,r])=>{this._defaultResources[t]=r}),this}withResource(e,t){return this._resources[e]=t,this}combineResource(){const e={};return Object.entries(this._defaultResources).forEach(([t,r])=>{e[t]={translation:r}}),Object.entries(this._resources).forEach(([t,r])=>{t in e?e[t].translation=Object.assign(Object.assign({},e[t].translation),r):e[t]={translation:r}}),e}build(){return H=C.createInstance({lng:this._lng,fallbackLng:{"zh-CN":["zh-Hans","zh-Hant","en"],"zh-HK":["zh-Hant","zh-Hans","en"],"zh-TW":["zh-Hant","zh-Hans","en"],default:["en"]},resources:this.combineResource()},(e,t)=>{var r;if(e){console.error("[rmg-runtime] unexpected error occurs while initialising i18n",e);return}document.title=t(this._appName),document.documentElement.lang=(r=this._lng)!==null&&r!==void 0?r:"en"}),H.on("languageChanged",e=>{document.title=H.t(this._appName),document.documentElement.lang=e}),eo(H),H}}var It=function(n,e,t,r){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(c){try{u(r.next(c))}catch(f){a(f)}}function l(c){try{u(r.throw(c))}catch(f){a(f)}}function u(c){c.done?i(c.value):o(c.value).then(s,l)}u((r=r.apply(n,e||[])).next())})};let Nt=!1;const no=()=>It(void 0,void 0,void 0,function*(){yield T.loadWithTimeout(),L.isAnalyticsQADone()?L.isAllowAnalytics()&&(console.log("[rmg-runtime] User has previously allowed GA"),de.init()):k.isStandaloneWindow()&&T.getComponent()!=="rmg-home"&&(console.warn("[rmg-runtime] App is opened in standalone window but analytics Q&A is not finished. GA will be init by default."),de.init()),Nt=!0}),ro=()=>It(void 0,void 0,void 0,function*(){let n=0;for(;n<=10&&!Nt;)yield xt(1e3),n+=1}),S={ready:ro,getAppName:T.getComponent,getAppVersion:T.getVersion,getEnv:T.getEnvironment,getInstance:T.getInstance,event:de.customEvent,isStandaloneWindow:k.isStandaloneWindow,injectUITools:k.injectUITools,openApp:k.openApp,onAppOpen:k.onAppOpen,closeApp:k.closeApp,onAppClose:k.onAppClose,updateUrl:k.updateUrl,onUrlUpdate:k.onUrlUpdate,toggleNavMenu:k.toggleNavMenu,postEvent:E.postEvent,onMessage:E.onMessage,setLanguage:L.setLanguage,getLanguage:L.getLanguage,onLanguageChange:L.onLanguageChange,setColourMode:L.setColourMode,getColourMode:L.getColourMode,onColourModeChange:L.onColourModeChange,isAnalyticsQADone:L.isAnalyticsQADone,isAllowAnalytics:L.isAllowAnalytics,allowAnalytics:L.allowAnalytics,storage:{on:U.on,get:U.get,getAll:U.getAll,set:U.set,remove:U.remove,clear:U.clear},getMsSinceStartUp:Rr.getMsSinceStartUp,I18nBuilder:to,getI18nInstance:Zr};no().then();window.rmgRuntime=S;const oo="",io="",ao="",so="",lo="",uo="",co="",fo="",po="",go="",ho="/Language",mo="",vo="",yo="",bo="",wo="",xo="",So="",Oo="",Co="",_o="",Ro="",Eo="",Ao="",Po={Action:oo,Apps:io,"Back to list":"","Background colour":"",Black:ao,Cancel:so,City:lo,Components:uo,"Configuration file":"",Confirm:co,Continue:fo,"Country/Region":"/",Copy:po,Edit:go,"Foreground colour":"","Go back":"",Language:ho,Justification:mo,Name:vo,Next:yo,Open:bo,Palette:wo,"Please select...":"...",Previous:xo,"Rail Map Generator":"","Rail Map Painter":"","Rail Map Toolkit":"",Remove:So,Reset:Oo,"RMG Templates":"RMG ","RMP Gallery":"RMP ","Seed Project":"",Settings:Co,Submit:_o,Translate:Ro,Upload:Eo,White:Ao},To="",Lo="",jo="",ko="",$o="",Mo="",Io="",No="",Do="",Fo="",Bo="/Language",Uo="",Vo="",zo="",Ho="",Go="",Wo="",Ko="",Jo="",Yo="",qo="",Qo="",Xo="",Zo="",ei={Action:To,Apps:Lo,"Back to list":"","Background colour":"",Black:jo,Cancel:ko,City:$o,Components:Mo,"Configuration file":"",Confirm:Io,Continue:No,Copy:Do,"Country/Region":"/",Edit:Fo,"Foreground colour":"","Go back":"",Language:Bo,Justification:Uo,Name:Vo,Next:zo,Open:Ho,Palette:Go,"Please select...":"...",Previous:Wo,"Rail Map Generator":"","Rail Map Painter":"","Rail Map Toolkit":"",Remove:Ko,Reset:Jo,"RMG Templates":"RMG ","RMP Gallery":"RMP ","Seed Project":"",Settings:Yo,Submit:qo,Translate:Qo,Upload:Xo,White:Zo},ti="/Language",ni="",ri="",oi={Language:ti,Palette:ni,"Rail Map Generator":"","Rail Map Toolkit":"",Remove:ri,"RMG Templates":"RMG "},ii="",ai="",si="",li="",ui="",ci="",di="",fi="",pi="",gi="/Language",hi="",mi="",vi="",yi="",bi="",wi="",xi="",Si="",Oi="",Ci="",_i="",Ri="",Ei="",Ai={Action:ii,Apps:ai,"Back to list":" ","Background colour":"",Black:si,Cancel:li,City:ui,Components:ci,"Configuration file":"  ",Confirm:di,Copy:fi,"Country/Region":"/",Edit:pi,"Foreground colour":"","Go back":"",Language:gi,Justification:hi,Name:mi,Next:vi,Open:yi,Palette:bi,"Please select...":"",Previous:wi,"Rail Map Generator":"  ","Rail Map Painter":"  ","Rail Map Toolkit":" ",Remove:xi,Reset:Si,"RMG Templates":"RMG ","RMP Gallery":"RMP ","Seed Project":" ",Settings:Oi,Submit:Ci,Translate:_i,Upload:Ri,White:Ei};var Pi={en:{},"zh-Hans":Po,"zh-Hant":ei,ja:oi,ko:Ai};const Ti={header:"Cookies on this website",text1:"At RMG we use cookies to help ensure that our website and services are able to function properly. These cookies are necessary and so are set automatically.",text2:"We would also like to use some cookies to:",item1:"improve our website based on how you use it",text3:"These cookies are optional. If you'd like to accept all optional cookies, select 'Accept all cookies'. If you'd like to reject them, select 'Reject'.",accept:"Accept all cookies",reject:"Reject"},Li={CookiesModal:Ti},ji={header:" Cookies",text1:" RMG Cookies  Cookies ",text2:" Cookies ",item1:"",text3:" Cookies  Cookies Cookies Cookies",accept:" Cookies",reject:""},ki="",$i="",Mi="",Ii="",Ni="",Di="",Fi="",Bi="",Ui="",Vi="",zi="",Hi="",Gi="",Wi="",Ki={CookiesModal:ji,About:ki,"Allow cookies to help improve our website":" Cookies ",Appearance:$i,"Back to production environment":"","Close all tabs":"","Close app":"","Close current tab":"","Close tab":"","Contribution Wiki":"",Contributors:Mi,"Current session has been terminated. Please close this window.":"",Dark:Ii,"Developer team":"",Donators:Ni,"Download offline app":"",Light:Di,"Main languages":"",More:Fi,"New tab":"","Notes: Contributors are sorted by number of commits and commit time.":"","Other languages":"",Privacy:Bi,"Privacy settings":"","Rail Map Toolkit is opened in another window":"","Refreshing is required for changes to take effect.":"","Resource administrators":"","Resource contributors":"","Restart RMT in this window":"",Running:Ui,Save:Vi,"Select an app to start your own rail map design!":"",Switch:zi,"Switch to":"",System:Hi,Tab:Gi,"Terms and conditions":"",Tutorial:Wi,"Unable to load contributors":"","Visit GitHub":" GitHub","Welcome to Rail Map Toolkit":"","You cannot open multiple Rail Map Toolkit at the same time. Please close this window.":"","You're currently viewing a testing environment.":""},Ji={header:" Cookies",text1:" RMG Cookies  Cookies ",text2:" Cookies ",item1:"",text3:" Cookies  Cookies Cookies Cookies",accept:" Cookies",reject:""},Yi="",qi="",Qi="",Xi="",Zi="",ea="",ta="",na="",ra="",oa="",ia="",aa="",sa="",la="",ua={CookiesModal:Ji,About:Yi,"Allow cookies to help improve our website":" Cookies ",Appearance:qi,"Back to production environment":"","Close all tabs":"","Close app":"","Close current tab":"","Close tab":"","Contribution Wiki":"",Contributors:Qi,"Current session has been terminated. Please close this window.":"",Dark:Xi,"Developer team":"",Donators:Zi,"Download offline app":"",Light:ea,"Main languages":"",More:ta,"New tab":"","Notes: Contributors are sorted by number of commits and commit time.":"","Other languages":"",Privacy:na,"Privacy settings":"","Rail Map Toolkit is opened in another window":"","Refreshing is required for changes to take effect.":"","Resource administrators":"","Resource contributors":"","Restart RMT in this window":"",Running:ra,Save:oa,"Select an app to start your own rail map design!":"",Switch:ia,"Switch to":"",System:aa,Tab:sa,"Terms and conditions":"",Tutorial:la,"Unable to load contributors":"","Visit GitHub":" GitHub","Welcome to Rail Map Toolkit":"","You cannot open multiple Rail Map Toolkit at the same time. Please close this window.":"","You're currently viewing a testing environment.":""},ca="",da="",fa="",pa={Contributors:ca,"Main languages":"",Privacy:da,"Privacy settings":"",Tab:fa,"Welcome to Rail Map Toolkit":""},ga={header:"   ",text1:"RMG         .    .",text2:"  ",item1:"   ,   ",text3:"   .     '  ' .   '' .",accept:"  ",reject:""},ha="",ma=" ",va="",ya=" ",ba=" ",wa="",xa=" ",Sa={CookiesModal:ga,About:ha,"Allow cookies to help improve our website":"        ",Appearance:ma,"Contribution Wiki":" ",Contributors:va,"Core contributors":" ",Dark:ya,Light:ba,"Privacy settings":"   ","Refreshing is required for changes to take effect.":"     ","Resource administrators":" ","Resource contributors":" ",Save:wa,"Select an app to start your own rail map design!":"     .","Switch to":" ",System:xa,"Terms and conditions":" ","Visit GitHub":"GitHub ","Welcome to Rail Map Toolkit":"    "},Oa=new S.I18nBuilder().use($n).withAppName("Rail Map Toolkit").withLng(S.getLanguage()).withDefaultResource(Pi).withResource("en",Li).withResource("zh-Hans",Ki).withResource("zh-Hant",ua).withResource("ja",pa).withResource("ko",Sa).build(),Z={rmg:{name:"Rail Map Generator",url:"/rmg/",allowedEnvs:[v.DEV,v.UAT,v.PRD],allowMultiInstances:!0},rmp:{name:"Rail Map Painter",url:"/rmp/",allowedEnvs:[v.DEV,v.UAT,v.PRD]},"rmg-palette":{name:"Palette",url:"/rmg-palette/",allowedEnvs:[v.DEV,v.UAT,v.PRD],showContributors:!0,legacyContributors:"legacy-contributor-list.txt"},"rmg-palette-upload":{name:"Palette - Upload",url:"/rmg-palette/#/new",allowedEnvs:[v.DEV,v.UAT,v.PRD]},"rmg-components":{name:"Components",url:"/rmg-components/",allowedEnvs:[v.DEV,v.UAT]},"rmg-templates":{name:"RMG Templates",url:"/rmg-templates/",allowedEnvs:[v.DEV,v.UAT,v.PRD],showContributors:!0,legacyContributors:"legacy-contributor-list.txt"},"rmg-templates-upload":{name:"RMG Templates - Upload",url:"/rmg-templates/#/new",allowedEnvs:[v.DEV,v.UAT,v.PRD]},"rmp-gallery":{name:"RMP Gallery",url:"/rmp-gallery/",allowedEnvs:[v.DEV,v.UAT,v.PRD],showContributors:!0,showDonators:!0},"seed-project":{name:"Seed Project",url:"/seed-project/",allowedEnvs:[v.DEV,v.UAT]},"rmg-translate":{name:"Translate",url:"/rmg-translate/",allowedEnvs:[v.DEV,v.UAT]}},Ae=n=>Object.entries(Z).filter(([e,t])=>t.allowedEnvs.includes(n)).map(([e])=>e);var re=(n=>(n.OPENED_TABS="rmg-home__openedTabs",n.ACTIVE_TAB="rmg-home__activeTab",n))(re||{});const ul={GitHub:"GitHub Pages",GitLab:"GitLab Pages",Bitbucket:"Bitbucket Cloud",Tauri:"Tauri Offline",localhost:"localhost",unknown:"unknown"},cl=(n,e)=>"https://".concat(e===v.PRD?"":"uat-","railmapgen.").concat(n==="GitLab"?"gitlab":"github",".io");var Dt=(n=>(n.APP_LOAD="APP_LOAD",n.OPEN_APP="OPEN_APP",n.CLOSE_APP="CLOSE_APP",n.TOGGLE_NAV_MENU="TOGGLE_NAV_MENU",n.CHANGE_LANGUAGE="CHANGE_LANGUAGE",n.SWITCH_MIRROR="SWITCH_MIRROR",n.DOWNLOAD_APP="DOWNLOAD_APP",n))(Dt||{});const Ca="rmg-home:frame-",_a={isShowMenu:!0,openedTabs:[],activeTab:void 0},Ft=Mn({name:"app",initialState:_a,reducers:{setIsPrimary:(n,e)=>{n.isPrimary=e.payload},terminateSession:n=>{n.isTerminated=!0},toggleMenu:n=>{n.isShowMenu=!n.isShowMenu},setOpenedTabs:(n,e)=>{n.openedTabs=e.payload},updateTabUrl:(n,e)=>{const{id:t,url:r}=e.payload;n.openedTabs=n.openedTabs.map(o=>o.id===t?{...o,url:r}:o)},setActiveTab:(n,e)=>{n.activeTab=e.payload},openApp:(n,e)=>{const{appId:t,url:r}=e.payload,o=n.openedTabs.find(({id:a})=>a===n.activeTab),i=n.openedTabs.find(({app:a})=>a===t);if((o==null?void 0:o.app)!==t)if(i)n.activeTab=i.id;else{const a=crypto.randomUUID();n.openedTabs.push({id:a,app:t,url:r!=null?r:Z[t].url}),n.activeTab=a}},openAppInNew:(n,e)=>{const t=crypto.randomUUID();n.openedTabs.push({id:t,app:e.payload}),n.activeTab=t},closeTab:(n,e)=>{var o;const t=e.payload,r=n.openedTabs.slice().sort((i,a)=>{const s=Object.keys(Z);return s.indexOf(i.app)-s.indexOf(a.app)});if(n.openedTabs=n.openedTabs.filter(i=>i.id!==t),n.activeTab===t){const i=r.findIndex(a=>a.id===t);n.activeTab=(o=r.filter(a=>a.id!==t)[Math.max(0,i-1)])==null?void 0:o.id}},closeApp:(n,e)=>{var a,s;const t=e.payload;if(!n.openedTabs.some(l=>l.app===t))return;const r=Object.keys(Z).filter(l=>n.openedTabs.some(u=>u.app===l)),o=(a=n.openedTabs.find(l=>l.id===n.activeTab))==null?void 0:a.app,i=n.openedTabs.filter(l=>l.app!==t);if(n.openedTabs=i,o===t){const l=r.findIndex(u=>u===t);n.activeTab=(s=i.find(u=>u.app===r[Math.max(0,l-1)]))==null?void 0:s.id}}}}),{setIsPrimary:Ra,terminateSession:Ea,toggleMenu:dl,setOpenedTabs:Aa,updateTabUrl:Pa,setActiveTab:at,openApp:Pe,openAppInNew:fl,closeTab:pl,closeApp:Ta}=Ft.actions,La=Ft.reducer,ja=In({app:La}),Bt=Nn(),ka=(n={})=>Dn({reducer:ja,middleware:e=>e().prepend(Bt.middleware),preloadedState:n}),$=ka(),gl=()=>Fn(),hl=Bn,st=Bt.startListening;window.rmgStore=$;var Ut,lt=Un;Ut=lt.createRoot,lt.hydrateRoot;var Vt=function(){if(typeof Map<"u")return Map;function n(e,t){var r=-1;return e.some(function(o,i){return o[0]===t?(r=i,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var r=n(this.__entries__,t),o=this.__entries__[r];return o&&o[1]},e.prototype.set=function(t,r){var o=n(this.__entries__,t);~o?this.__entries__[o][1]=r:this.__entries__.push([t,r])},e.prototype.delete=function(t){var r=this.__entries__,o=n(r,t);~o&&r.splice(o,1)},e.prototype.has=function(t){return!!~n(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,r){r===void 0&&(r=null);for(var o=0,i=this.__entries__;o<i.length;o++){var a=i[o];t.call(r,a[1],a[0])}},e}()}(),Te=typeof window<"u"&&typeof document<"u"&&window.document===document,ye=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),$a=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(ye):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),Ma=2;function Ia(n,e){var t=!1,r=!1,o=0;function i(){t&&(t=!1,n()),r&&s()}function a(){$a(i)}function s(){var l=Date.now();if(t){if(l-o<Ma)return;r=!0}else t=!0,r=!1,setTimeout(a,e);o=l}return s}var Na=20,Da=["top","right","bottom","left","width","height","size","weight"],Fa=typeof MutationObserver<"u",Ba=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Ia(this.refresh.bind(this),Na)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!Te||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Fa?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!Te||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var t=e.propertyName,r=t===void 0?"":t,o=Da.some(function(i){return!!~r.indexOf(i)});o&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),zt=function(n,e){for(var t=0,r=Object.keys(e);t<r.length;t++){var o=r[t];Object.defineProperty(n,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return n},G=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||ye},Ht=Se(0,0,0,0);function be(n){return parseFloat(n)||0}function ut(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(r,o){var i=n["border-"+o+"-width"];return r+be(i)},0)}function Ua(n){for(var e=["top","right","bottom","left"],t={},r=0,o=e;r<o.length;r++){var i=o[r],a=n["padding-"+i];t[i]=be(a)}return t}function Va(n){var e=n.getBBox();return Se(0,0,e.width,e.height)}function za(n){var e=n.clientWidth,t=n.clientHeight;if(!e&&!t)return Ht;var r=G(n).getComputedStyle(n),o=Ua(r),i=o.left+o.right,a=o.top+o.bottom,s=be(r.width),l=be(r.height);if(r.boxSizing==="border-box"&&(Math.round(s+i)!==e&&(s-=ut(r,"left","right")+i),Math.round(l+a)!==t&&(l-=ut(r,"top","bottom")+a)),!Ga(n)){var u=Math.round(s+i)-e,c=Math.round(l+a)-t;Math.abs(u)!==1&&(s-=u),Math.abs(c)!==1&&(l-=c)}return Se(o.left,o.top,s,l)}var Ha=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof G(n).SVGGraphicsElement}:function(n){return n instanceof G(n).SVGElement&&typeof n.getBBox=="function"}}();function Ga(n){return n===G(n).document.documentElement}function Wa(n){return Te?Ha(n)?Va(n):za(n):Ht}function Ka(n){var e=n.x,t=n.y,r=n.width,o=n.height,i=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(i.prototype);return zt(a,{x:e,y:t,width:r,height:o,top:t,right:e+r,bottom:o+t,left:e}),a}function Se(n,e,t,r){return{x:n,y:e,width:t,height:r}}var Ja=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Se(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=Wa(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),Ya=function(){function n(e,t){var r=Ka(t);zt(this,{target:e,contentRect:r})}return n}(),qa=function(){function n(e,t,r){if(this.activeObservations_=[],this.observations_=new Vt,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof G(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Ja(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof G(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(r){return new Ya(r.target,r.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),Gt=typeof WeakMap<"u"?new WeakMap:new Vt,Wt=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=Ba.getInstance(),r=new qa(e,t,this);Gt.set(this,r)}return n}();["observe","unobserve","disconnect"].forEach(function(n){Wt.prototype[n]=function(){var e;return(e=Gt.get(this))[n].apply(e,arguments)}});var Qa=function(){return typeof ye.ResizeObserver<"u"?ye.ResizeObserver:Wt}();window.ResizeObserver||(window.ResizeObserver=Qa);var Le=function(){return Le=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Le.apply(this,arguments)},Xa=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t},Za=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return i},es=function(n,e){var t=n.validator,r=n.onDebouncedChange,o=n.delay,i=n.optionList,a=n.defaultValue;n.onChange;var s=Xa(n,["validator","onDebouncedChange","delay","optionList","defaultValue","onChange"]),l=y.useRef(null),u=mt(l,e),c=y.useRef("datalist-"+new Date().valueOf()),f=Za(y.useState(!1),2),d=f[0],h=f[1],g=y.useRef();y.useEffect(function(){l.current&&(l.current.value=(a==null?void 0:a.toString())||"")},[a]);var m=function(O){var w=O.target.value;window.clearTimeout(g.current),t&&h(!t(w)),g.current=window.setTimeout(function(){r==null||r(w),g.current=void 0},o!=null?o:500)},b=function(O){var w=O.target.value;g.current!==void 0&&(window.clearTimeout(g.current),t&&h(!t(w)),r==null||r(w),g.current=void 0)};return p.jsxs(p.Fragment,{children:[p.jsx(Zt,Le({ref:u,list:c.current,variant:"flushed",size:"sm",h:6,onChange:m,onBlur:b,isInvalid:d},s)),i&&p.jsx("datalist",{id:c.current,children:i==null?void 0:i.map(function(O,w){return p.jsx("option",{children:O},w)})})]})},ml=y.forwardRef(es);var je=function(){return je=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},je.apply(this,arguments)},ts=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t},ns=function(n,e){var t=n.onDebouncedChange,r=n.defaultValue;n.onChange;var o=ts(n,["onDebouncedChange","defaultValue","onChange"]),i=y.useRef(null),a=mt(i,e),s=y.useRef();y.useEffect(function(){i.current&&(i.current.value=(r==null?void 0:r.toString())||"")},[r]);var l=function(u){var c=u.target.value;window.clearTimeout(s.current),s.current=window.setTimeout(function(){t==null||t(c)},500)};return p.jsx(en,je({ref:a,variant:"flushed",size:"sm",resize:"none",onChange:l},o))},vl=y.forwardRef(ns);var rs=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return i},os=function(n){switch(n){case v.DEV:return"red";case v.UAT:return"orange";case v.PRD:return"green"}};function yl(n){var e=n.environment,t=n.version,r=n.popoverHeader,o=n.popoverBody,i=rs(y.useState(!1),2),a=i[0],s=i[1];return p.jsxs(tn,{isOpen:a,onOpen:function(){return r&&s(!0)},onClose:function(){return s(!1)},children:[p.jsx(nn,{children:p.jsx(rn,{ml:1,colorScheme:os(e),title:"".concat(e,": ").concat(t),cursor:r?"pointer":"help",children:e===v.PRD?t:e})}),p.jsxs(on,{children:[p.jsx(an,{}),p.jsx(sn,{}),p.jsx(ln,{children:r}),p.jsx(un,{children:o})]})]})}var is=function(n,e,t){var r=new Blob([t],{type:e});as(n,r)},as=function(n,e){var t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)},ss=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return i};function ls(n){var e=n.cancelRef,t=n.isOpen,r=n.onClose,o=ss(y.useState(!1),2),i=o[0],a=o[1],s=function(){a(!0);var l=S.storage.getAll(),u=S.getAppName(),c="".concat(u,"_BACKUP_").concat(new Date().toISOString(),".json");is(c,"application/json",JSON.stringify(l)),S.storage.clear(),setTimeout(function(){window.location.reload()},2e3)};return p.jsxs(cn,{leastDestructiveRef:e,isOpen:t,onClose:r,children:[p.jsx(dn,{}),p.jsxs(fn,{children:[p.jsx(pn,{children:"Warning "}),p.jsx(gn,{}),p.jsxs(hn,{sx:{"& p":{my:1}},children:[p.jsx(F,{children:"Are you sure you want to reset the app? The webpage local storage for this app will be cleared. A copy of the local storage will be downloaded and it may be used for restoration (varies with app)."}),p.jsx(F,{children:""}),p.jsx(F,{children:""})]}),p.jsxs(mn,{children:[p.jsx(Ke,{ref:e,onClick:r,children:"Cancel"}),p.jsx(Ke,{isLoading:i,colorScheme:"red",ml:3,onClick:s,children:"Confirm and reload"})]})]})]})}var ee=function(){return ee=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},ee.apply(this,arguments)},us=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t},cs=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return i};function ds(n){var e=n.error,t=n.errorInfo,r=n.allowReset,o=n.sx,i=us(n,["error","errorInfo","allowReset","sx"]),a=D("RmgErrorBoundary"),s=vt("primary.500","primary.300"),l=cs(y.useState(!1),2),u=l[0],c=l[1],f=y.useRef(null),d=function(m){return p.jsx(Je,{color:s,role:"button",onClick:function(){return c(!0)},children:m})},h=S.getAppName(),g=p.jsx(Je,{color:s,href:"https://github.com/railmapgen/".concat(h,"/issues"),isExternal:!0,children:"GitHub Issue"});return p.jsxs(vn,ee({status:"error",sx:ee(ee({},a),o)},i,{children:[p.jsx(yn,{}),p.jsx(bn,{children:"Something went wrong!"}),p.jsxs(wn,{children:[p.jsxs(F,{children:["Please try to refresh or re-import your configuration files. If the issue still persists, please consider upgrading your browser",r?p.jsxs(p.Fragment,{children:[" or ",d("reset this app")]}):"",". Should you need any help, please contact us by submitting an issue in ",g," with the details shown below."]}),p.jsxs(F,{children:["",r?p.jsxs(p.Fragment,{children:["",d("")]}):""," ",g,"  Issue "]}),p.jsxs(F,{children:["",r?p.jsxs(p.Fragment,{children:["",d("")]}):""," ",g,"  Issue "]}),p.jsxs(F,{as:"details",children:[e==null?void 0:e.toString(),p.jsx("br",{}),t==null?void 0:t.componentStack]}),r&&p.jsx(ls,{cancelRef:f,isOpen:u,onClose:function(){return c(!1)}})]})]}))}var fs=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ke=function(){return ke=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},ke.apply(this,arguments)},ps=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t},gs=function(n){fs(e,n);function e(t){var r=n.call(this,t)||this;return r.state={hasError:!1,error:null,errorInfo:null},r}return e.getDerivedStateFromError=function(){return{hasError:!0}},e.prototype.componentDidCatch=function(t,r){this.setState({error:t,errorInfo:r})},e.prototype.render=function(){var t=this.props,r=t.children,o=t.suspenseFallback,i=t.allowReset,a=ps(t,["children","suspenseFallback","allowReset"]);return this.state.hasError?p.jsx(ds,ke({error:this.state.error,errorInfo:this.state.errorInfo,allowReset:i},a)):o?p.jsx(y.Suspense,{fallback:o,children:r}):r},e}(Vn.Component),$e=function(){return $e=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},$e.apply(this,arguments)},hs=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t},bl=function(n){var e=n.label,t=n.children;n.width;var r=n.noLabel,o=n.oneLine,i=n.className,a=hs(n,["label","children","width","noLabel","oneLine","className"]),s=D("RmgLabel");return p.jsxs(xn,$e({className:"".concat(o?"rmg-label__one-line":""," ").concat(i!=null?i:""),"aria-label":e,sx:s},a,{children:[!r&&p.jsx(Sn,{size:"xs",children:e}),t]}))},Me=function(){return Me=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Me.apply(this,arguments)},ms=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t},ct=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return i};function wl(n){var e=n.defaultValue,t=n.options,r=n.disabledOptions,o=ms(n,["defaultValue","options","disabledOptions"]),i=y.useRef(null);y.useEffect(function(){i.current&&(i.current.value=(e==null?void 0:e.toString())||"")},[e]);var a=function(s,l){return p.jsx("option",{value:s,disabled:(r==null?void 0:r.find(function(u){return u.toString()===s}))!==void 0,children:l},s)};return p.jsx(On,Me({ref:i,variant:"flushed",size:"sm",h:6},o,{children:Object.entries(t).map(function(s){var l=ct(s,2),u=l[0],c=l[1];return typeof c=="object"?p.jsx("optgroup",{label:u,children:Object.entries(c).map(function(f){var d=ct(f,2),h=d[0],g=d[1];return a(h,g)})},u):a(u,c)})}))}var vs=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return i},xl=function(){var n=yt(),e=n.colorMode,t=n.setColorMode,r=vs(Cn("(prefers-color-scheme: dark)"),1),o=r[0],i=y.useCallback(function(a){S.setColourMode(a),t(a==="system"?o?"dark":"light":a)},[e,t,o]);return{colourMode:e,setColourMode:i}},_e=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return i},dt=function(n,e,t){if(t||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))},ys=function(n,e){e===void 0&&(e=500);var t=_e(y.useState(!0),2),r=t[0],o=t[1],i=y.useRef([]),a=y.useRef(),s=y.useCallback(function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];if(!r){i.current=l;return}o(!1),i.current=[],n.apply(void 0,dt([],_e(l),!1))},[r,n]);return y.useEffect(function(){if(!r)return a.current=window.setTimeout(function(){o(!0),i.current.length&&n.apply(void 0,dt([],_e(i.current),!1))},e),function(){window.clearTimeout(a.current)}},[r,e]),s},bs=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}return i};function Sl(n){var e=n.defaultValue,t=n.min,r=n.max,o=n.step,i=n.onThrottledChange,a=n.leftIcon,s=n.rightIcon,l=D("RmgThrottledSlider"),u=bs(y.useState(e!=null?e:0),2),c=u[0],f=u[1],d=ys(i!=null?i:function(){},500),h=function(){var m=Math.min(c+(o!=null?o:1)*10,r!=null?r:100);i==null||i(m),f(m)},g=function(){var m=Math.max(c-(o!=null?o:1)*10,t!=null?t:0);i==null||i(m),f(m)};return p.jsxs(we,{sx:l,children:[a&&p.jsx(Ye,{size:"xs",variant:"ghost","aria-label":"Drag left",icon:a,onClick:g}),p.jsxs(_n,{value:c,min:t,max:r,step:o,onChange:function(m){d(m),f(m)},children:[p.jsx(Rn,{children:p.jsx(En,{})}),p.jsx(An,{})]}),s&&p.jsx(Ye,{size:"xs",variant:"ghost","aria-label":"Drag right",icon:s,onClick:h})]})}var R=function(){return R=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},R.apply(this,arguments)},Oe=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t},Ol=function(n){var e=n.sx,t=n.className,r=Oe(n,["sx","className"]),o=D("RmgWindow");return p.jsx(we,R({className:"rmg-window ".concat(t!=null?t:""),sx:R(R({},o),e)},r))},Cl=function(n){var e=n.sx,t=n.className,r=Oe(n,["sx","className"]),o=D("RmgPage");return p.jsx(we,R({className:"rmg-page ".concat(t!=null?t:""),sx:R(R({},o),e)},r))},_l=function(n){var e=n.sx,t=n.className,r=Oe(n,["sx","className"]),o=D("RmgSection");return p.jsx(bt.section,R({className:"rmg-section ".concat(t!=null?t:""),sx:R(R({},o),e)},r))},Rl=function(n){var e=n.sx,t=n.className,r=Oe(n,["sx","className"]),o=D("RmgSectionHeader");return p.jsx(bt.div,R({className:"rmg-section__header ".concat(t!=null?t:""),sx:R(R({},o),e)},r))};var te=function(){return te=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},te.apply(this,arguments)},ws=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t},xs=function(n){var e=n.isIndeterminate,t=n.value,r=n.sx,o=ws(n,["isIndeterminate","value","sx"]),i=vt("primary.500","primary.300"),a=D("RmgLoader");return p.jsxs(we,{sx:te(te({},a),r),children:[p.jsx("div",{className:"rmg-loader__backdrop"}),p.jsx(Pn,te({isIndeterminate:e,value:t,color:i},o))]})};var ft=function(n){return n==="dark"?"primary.300":"primary.500"},Re={variants:{flushed:function(n){var e=n.theme,t=n.colorMode;return{field:{_focusVisible:{borderColor:ft(t),boxShadow:"0px 1px 0px 0px ".concat(Q(e,ft(t)))}}}}}},Ss={defaultProps:{colorScheme:"primary"}},pt={defaultProps:{colorScheme:"primary"}},Os={baseStyle:{w:"100%",h:"100%","& .ag-header-cell:not(.ag-header-cell-auto-height) .ag-header-cell-comp-wrapper":{height:"unset"},"& .ag-cell":{display:"flex",lineHeight:"unset",alignItems:"center"},"& .ag-cell, & .ag-header-cell":{padding:"8px 9px"},"& .ag-row, & .ag-header":{border:"unset"},"&.ag-theme-alpine .ag-row .ag-cell, &.ag-theme-alpine .ag-header .ag-header-cell":{borderRight:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, #dde2eb))",borderBottom:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, #dde2eb))"},"&.ag-theme-alpine-dark .ag-row .ag-cell, &.ag-theme-alpine-dark .ag-header .ag-header-cell":{borderRight:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, rgba(88, 86, 82, 0.5)))",borderBottom:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, rgba(88, 86, 82, 0.5)))"},"& .ag-pinned-left-cols-container, & .ag-pinned-left-header":{boxShadow:"var(--chakra-shadows-lg)",zIndex:1},"&.ag-theme-alpine":{"& .ag-row .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-background-color, #fff)"},"& .ag-row-odd .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-odd-row-background-color, #fcfcfc)"}},"&.ag-theme-alpine-dark":{"& .ag-row .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-background-color, #181d1f)"},"& .ag-row-odd .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-odd-row-background-color, #222628)"}}}},Cs={baseStyle:function(n){var e=n.colorMode,t=n.zIndex;return{display:"none","&.show-app-clip":{display:"block"},"& .rmg-app-clip__overlay":{position:"fixed",top:0,left:0,w:"100vw",h:"100vh",zIndex:t,bg:"blackAlpha.600"},"& .rmg-app-clip__container":{position:"fixed",top:0,left:0,w:"100vw",h:"100vh",display:"flex",justifyContent:"center",alignItems:"flex-start",zIndex:t},"& .rmg-app-clip__content":{display:"flex",w:"100%",maxW:"md",my:16,bg:e==="light"?"white":"gray.700",boxShadow:"lg",borderRadius:"md",overflow:"hidden"}}},sizes:{xs:{"& .rmg-app-clip__content":{maxW:"xs"}},sm:{"& .rmg-app-clip__content":{maxW:"sm"}},lg:{"& .rmg-app-clip__content":{maxW:"lg"}},xl:{"& .rmg-app-clip__content":{maxW:"xl"}},full:{"& .rmg-app-clip__content":{maxW:"100vw",minH:"var(--chakra-vh)",my:0,borderRadius:0}}}},_s={baseStyle:function(n){var e=n.colorMode;return{p:1,my:1,w:"100%",borderRadius:2,bg:e==="dark"?"gray.700":"gray.50",boxShadow:"lg"}}},Rs={baseStyle:function(n){var e=n.colorMode;return{"& thead":{position:"sticky",top:0,zIndex:10},"& td, th":{borderRight:"1px solid",borderColor:e==="dark"?"whiteAlpha.400":"blackAlpha.200",backgroundColor:e==="dark"?"gray.700":"gray.50",whiteSpace:"nowrap","&:first-of-type":{position:"sticky",left:0,zIndex:1},"&:last-of-type":{borderRight:"none",position:"sticky",right:0,zIndex:1}}}}},Es={baseStyle:function(){return{flexGrow:1,flexDirection:"column",justifyContent:"center",alignItems:"flex-start",h:10,"& span":{maxW:"100%",textOverflow:"ellipsis",overflow:"hidden"},"& span:last-of-type":{fontWeight:"normal",fontSize:"2xs"}}}},As={baseStyle:{flexDirection:"column",alignItems:"center",maxH:"100%",overflowY:"auto","& .chakra-alert__icon":{w:"40px",h:"40px",mr:0},"& .chakra-alert__title":{mt:4,mb:1,fontSize:"lg"},"& .chakra-alert__desc":{w:"100%","& p":{my:1},"& details":{whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"sm"}}}},Ps={baseStyle:{display:"flex",flexDirection:"column",m:1,w:"unset","& label":{overflow:"hidden",fontSize:12,mr:0,mb:-.5,whiteSpace:"nowrap",textOverflow:"ellipsis"},"&.rmg-label__one-line":{flexDirection:"row",alignItems:"center","& label:first-of-type":{mr:"auto"}}}},Ts={baseStyle:{display:"inline-flex",alignItems:"center","& > button:first-of-type":{ml:1}}},Ls={baseStyle:{w:"100%",h:"100%",position:"absolute",top:0,right:0,alignItems:"center",justifyContent:"center","& .rmg-loader__backdrop":{position:"absolute",w:"100%",h:"100%",zIndex:1500,bg:"blackAlpha.400"},"& .chakra-progress":{zIndex:2e3}}},I=function(n){return n==="dark"?"primary.300":"primary.500"},js={baseStyle:function(n){var e=n.theme,t=n.colorMode;return{"& .rmg-multi-select__wrapper":{position:"relative",w:"100%",h:"25.75px",transform:"translateY(1.75px)",cursor:"default"},"& .rmg-multi-select__field":{position:"relative",w:"100%",minW:0,outline:0,appearance:"none",transitionProperty:"common",transitionDuration:"normal",pb:"1px",fontSize:"sm",h:"6",borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_active:{borderColor:I(t),boxShadow:"0px 1px 0px 0px ".concat(Q(e,I(t)))},_focus:{borderColor:I(t),boxShadow:"0px 1px 0px 0px ".concat(Q(e,I(t)))},_focusVisible:{borderColor:I(t),boxShadow:"0px 1px 0px 0px ".concat(Q(e,I(t)))},"&.active":{borderColor:I(t),boxShadow:"0px 1px 0px 0px ".concat(Q(e,I(t)))},"& > span:last-of-type":{position:"absolute",right:8}},"& .rmg-multi-select__icon-wrapper":{display:"inline-flex",justifyContent:"center",w:6,h:"100%",position:"absolute",right:2,top:0,fontSize:"xl","& svg":{h:"1em",w:"1em"}},"& .chakra-popover__content":{w:"unset",minW:200},"& .chakra-popover__body":{p:0,"li label":{p:2,w:"100%",_hover:{bg:t==="dark"?"whiteAlpha.200":"gray.100"},_active:{bg:t==="dark"?"whiteAlpha.300":"gray.200"}}}}}},Ie=function(){return Ie=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Ie.apply(this,arguments)},ks={overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap"},$s={baseStyle:function(n){var e=n.noWrap;return Ie({h:6,fontSize:"sm"},e?ks:{})}},Ms={baseStyle:{position:"relative",flexDirection:"column",flex:1,overflow:"hidden",background:"inherit"}},Is={baseStyle:{alignItems:"center",flexWrap:"wrap",pl:2,pr:3,py:1,zIndex:10}},Ns={baseStyle:{position:"relative",background:"inherit"}},Ds={baseStyle:{display:"flex",alignItems:"center",flexWrap:"wrap",position:"sticky",top:0,background:"inherit",px:2,py:1,zIndex:5}},Fs={baseStyle:function(n){var e=n.colorMode,t=n.width,r=n.alwaysOverlay;return{height:"100%",position:r?"absolute":{base:"absolute",lg:"relative"},right:r?0:{base:0,lg:"unset"},background:e==="light"?"white":"gray.800",boxShadow:"lg",flexShrink:0,flexDirection:"column",transition:"0.3s ease-in-out",maxW:0,visibility:"hidden",zIndex:5,"&.show-side-panel":{maxW:{base:"100%",sm:t},w:{base:"100%",sm:"unset"},visibility:"initial"},"& .rmg-side-panel__inner":{flexDirection:"column",h:"100%",w:{base:"100vw",sm:t}},"& .rmg-side-panel__header":{flexShrink:0,pl:3,pr:1,py:0,"& button":{ml:"auto"}},"& .rmg-side-panel__body":{display:"flex",flexDirection:"column",flex:1,overflowY:"auto",p:1},"& .rmg-side-panel__footer":{display:"flex",justifyContent:"flex-end",p:1}}}},Bs={baseStyle:{h:6,alignItems:"center","& .chakra-button:first-of-type":{mr:1},"& .chakra-button:last-of-type":{ml:1}}},Us={baseStyle:{position:"relative",flexDirection:"column",height:"100%",overflow:"hidden",background:"inherit"}},Vs={baseStyle:{px:2,alignItems:"center",zIndex:15,minH:10,transition:"0.3s ease-in-out"}},zs={Input:Re,Checkbox:pt,Select:Re,Slider:Ss,Switch:pt,Textarea:Re,RmgAgGrid:Os,RmgAppClip:Cs,RmgCard:_s,RmgDataTable:Rs,RmgEnrichedButton:Es,RmgErrorBoundary:As,RmgLabel:Ps,RmgLineBadge:Ts,RmgLoader:Ls,RmgMultiSelect:js,RmgOutput:$s,RmgPage:Ms,RmgPageHeader:Is,RmgSection:Ns,RmgSectionHeader:Ds,RmgSidePanel:Fs,RmgThrottledSlider:Bs,RmgWindow:Us,RmgWindowHeader:Vs},Ne=function(){return Ne=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},Ne.apply(this,arguments)},gt="chakra-ui-color-mode",Hs=function(){var n=S.getColourMode()==="system";return S.isStandaloneWindow()&&(n?window.localStorage.removeItem(gt):window.localStorage.setItem(gt,S.getColourMode())),{initialColorMode:"system",useSystemColorMode:n}},Gs={primary:Ne({},Tn.colors.teal)},Ws={global:{".mw-full":{w:"100%",flexBasis:"100%"}}},Ks=function(){return Ln({config:Hs(),colors:Gs,styles:Ws,components:zs})},Js=function(n){var e=n.children;return p.jsx(jn,{theme:Ks(),children:p.jsx(Ys,{children:e})})},Ys=function(n){var e=n.children,t=yt().setColorMode,r=kn();return y.useEffect(function(){console.log("[rmg-components] RMG theme is initialised with",r.config),S.onColourModeChange(function(o){if(o==="system"){var i=window.matchMedia("(prefers-color-scheme: dark)").matches;t(i?"dark":"light")}else t(o)})},[t]),p.jsx(p.Fragment,{children:e})};const qs=n=>new Promise(e=>{setTimeout(e,n,"Timeout after ".concat(n/1e3," seconds"))}),Qs="rmt-instance-checker",Kt="ping",Jt="pong",Yt="restart",N=new BroadcastChannel(Qs),qt=n=>{n.data===Kt&&(console.log("[rmt] Received ping from another RMT instance."),N.postMessage(Jt))};N.addEventListener("message",qt);N.addEventListener("message",n=>{n.data===Yt&&(console.log("[rmt] Received restart from another RMT instance. Closing current session..."),N.close(),$.dispatch(Ea()),$.dispatch(wt()))});const El=()=>{N.postMessage(Yt)},Xs=async()=>{let n=!0;N.addEventListener("message",t=>{t.data===Jt&&(console.warn("[rmt] Received pong from another RMT instance. This instance is not primary."),n=!1,N.removeEventListener("message",qt))}),N.postMessage(Kt);let e=5;for(;e--;)if(await qs(500),!n)return!1;return console.log("[rmt] This instance is primary."),!0},Zs=n=>{try{const e=window.localStorage.getItem(re.OPENED_TABS);if(e){const t=JSON.parse(e);if(Array.isArray(t)){const r=t.filter(o=>o.app in Z);n.dispatch(Aa(r))}else console.warn("initOpenedTabs():: Cannot parse invalid opened tabs state from local storage")}}catch(e){console.warn("initOpenedTabs():: cannot parse opened apps state from local storage",e)}},el=n=>{var r;const e=window.localStorage.getItem(re.ACTIVE_TAB),t=n.getState().app.openedTabs;e&&t.some(({id:o})=>o===e)?n.dispatch(at(e)):n.dispatch(at((r=t[0])==null?void 0:r.id))},tl=n=>{const t=new URLSearchParams(window.location.search).get("app");console.log("openSearchedApp():: searchParams app=".concat(t)),Ae(S.getEnv()).includes(t)?n.dispatch(Pe({appId:t})):console.warn("openSearchedApp():: app ".concat(t," not found"))};function nl(n){Zs(n),el(n),st({predicate:(e,t,r)=>JSON.stringify(t.app.openedTabs)!==JSON.stringify(r.app.openedTabs),effect:(e,t)=>{window.localStorage.setItem(re.OPENED_TABS,JSON.stringify(t.getState().app.openedTabs))}}),st({predicate:(e,t,r)=>t.app.activeTab!==r.app.activeTab,effect:(e,t)=>{const r=t.getState().app.activeTab;r!==void 0&&window.localStorage.setItem(re.ACTIVE_TAB,r)}}),tl(n),Xs().then(e=>{n.dispatch(Ra(e)),e||n.dispatch(wt())})}let ht;const rl=y.lazy(()=>Kn(()=>import("./app-root-5Q5dVrdA.js"),__vite__mapDeps([0,1,2]))),ol=()=>{ht=Ut(document.getElementById("root")),ht.render(p.jsx(y.StrictMode,{children:p.jsx(zn,{store:$,children:p.jsx(Hn,{i18n:Oa,children:p.jsx(Js,{children:p.jsx(gs,{suspenseFallback:p.jsx(xs,{isIndeterminate:!0}),allowReset:!0,children:p.jsx(rl,{})})})})})}))};S.ready().then(()=>{nl($),ol(),S.onAppOpen(n=>{const e=Ae(S.getEnv());typeof n=="object"?e.includes(n.appId)&&$.dispatch(Pe({appId:n.appId,url:n.url})):e.includes(n)&&$.dispatch(Pe({appId:n}))}),S.onAppClose(n=>{Ae(S.getEnv()).includes(n)&&$.dispatch(Ta(n))}),S.onUrlUpdate((n,e)=>{if(e){const t=e.slice(Ca.length);console.log("Received URL update for frame=".concat(t,", url=").concat(n)),$.dispatch(Pa({id:t,url:n}))}}),S.event(Dt.APP_LOAD,{openedApps:$.getState().app.openedTabs.map(n=>n.app)})});export{Dt as E,Ca as F,bl as R,al as __vite_legacy_guard,wl as a,Sl as b,vl as c,ml as d,gl as e,Z as f,Pe as g,pl as h,Ta as i,Ae as j,xl as k,cl as l,ul as m,_l as n,fl as o,Rl as p,xs as q,S as r,at as s,dl as t,hl as u,yl as v,El as w,Ol as x,Cl as y};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/app-root-5Q5dVrdA.js","assets/chakra-ri5b5yy4.js","assets/react-4N00T80C.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}